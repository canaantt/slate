for(var BinaryParser=require("./binary_parser").BinaryParser,MACHINE_ID=parseInt(16777215*Math.random(),10),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),ObjectID=function e(t){if(!(this instanceof e))return new e(t);if(t instanceof e||t&&t.toHexString)return t;this._bsontype="ObjectID";var r=e.isValid(t);if(!r&&null!=t)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return r&&"string"==typeof t&&24==t.length?e.createFromHexString(t):(null==t||"number"==typeof t?this.id=this.generate(t):null!=t&&12===t.length&&(this.id=t),void(e.cacheHexString&&(this.__id=this.toHexString())))},ObjectId=ObjectID,hexTable=[],i=0;256>i;i++)hexTable[i]=(15>=i?"0":"")+i.toString(16);ObjectID.prototype.toHexString=function(){if(ObjectID.cacheHexString&&this.__id)return this.__id;for(var e="",t=0;t<this.id.length;t++)e+=hexTable[this.id.charCodeAt(t)];return ObjectID.cacheHexString&&(this.__id=e),e},ObjectID.prototype.get_inc=function(){return ObjectID.index=(ObjectID.index+1)%16777215},ObjectID.prototype.getInc=function(){return this.get_inc()},ObjectID.prototype.generate=function(e){"number"!=typeof e&&(e=parseInt(Date.now()/1e3,10));var t=BinaryParser.encodeInt(e,32,!0,!0),r=BinaryParser.encodeInt(MACHINE_ID,24,!1),n=BinaryParser.fromShort(("undefined"==typeof process?Math.floor(1e5*Math.random()):process.pid)%65535),i=BinaryParser.encodeInt(this.get_inc(),24,!1,!0);return t+r+n+i},ObjectID.prototype.toString=function(){return this.toHexString()},ObjectID.prototype.inspect=ObjectID.prototype.toString,ObjectID.prototype.toJSON=function(){return this.toHexString()},ObjectID.prototype.equals=function(e){var t;if(null!=e&&(e instanceof ObjectID||e.toHexString))t=e.id;else{if("string"!=typeof e||!ObjectID.isValid(e))return!1;t=ObjectID.createFromHexString(e).id}return this.id===t},ObjectID.prototype.getTimestamp=function(){var e=new Date;return e.setTime(1e3*Math.floor(BinaryParser.decodeInt(this.id.substring(0,4),32,!0,!0))),e},ObjectID.index=parseInt(16777215*Math.random(),10),ObjectID.createPk=function(){return new ObjectID},ObjectID.createFromTime=function(e){var t=BinaryParser.encodeInt(e,32,!0,!0)+BinaryParser.encodeInt(0,64,!0,!0);return new ObjectID(t)},ObjectID.createFromHexString=function(e){if("undefined"==typeof e||null!=e&&24!=e.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");var t=e.length;if(t>24)throw new Error("Id cannot be longer than 12 bytes");for(var r,n,i="",o=0;t>o;o+=2)r=e.substr(o,2),n=parseInt(r,16),i+=BinaryParser.fromByte(n);return new ObjectID(i,e)},ObjectID.isValid=function(e){return null==e?!1:"number"==typeof e?!0:"string"==typeof e?12==e.length||24==e.length&&checkForHexRegExp.test(e):e instanceof ObjectID?!0:e.toHexString?12==e.id.length||24==e.id.length&&checkForHexRegExp.test(e.id):!1},Object.defineProperty(ObjectID.prototype,"generationTime",{enumerable:!0,get:function(){return Math.floor(BinaryParser.decodeInt(this.id.substring(0,4),32,!0,!0))},set:function(e){var e=BinaryParser.encodeInt(e,32,!0,!0);this.id=e+this.id.substr(4),this.toHexString()}}),module.exports=ObjectID,module.exports.ObjectID=ObjectID,module.exports.ObjectId=ObjectID;