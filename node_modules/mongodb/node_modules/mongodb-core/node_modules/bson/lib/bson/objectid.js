for(var MACHINE_ID=parseInt(16777215*Math.random(),10),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),ObjectID=function t(e){if(e instanceof t)return e;if(!(this instanceof t))return new t(e);this._bsontype="ObjectID";var i=t.isValid(e);if(!i&&null!=e)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(i&&"string"==typeof e&&24==e.length)return t.createFromHexString(e);if(null==e||"number"==typeof e)this.id=this.generate(e);else if(null!=e&&12===e.length)this.id=e;else if(null!=e&&e.toHexString)return e;t.cacheHexString&&(this.__id=this.toHexString())},ObjectId=ObjectID,hexTable=[],i=0;256>i;i++)hexTable[i]=(15>=i?"0":"")+i.toString(16);ObjectID.prototype.toHexString=function(){if(ObjectID.cacheHexString&&this.__id)return this.__id;var t="";if(this.id instanceof _Buffer)return t=convertToHex(this.id),ObjectID.cacheHexString&&(this.__id=t),t;for(var e=0;e<this.id.length;e++)t+=hexTable[this.id.charCodeAt(e)];return ObjectID.cacheHexString&&(this.__id=t),t},ObjectID.prototype.get_inc=function(){return ObjectID.index=(ObjectID.index+1)%16777215},ObjectID.prototype.getInc=function(){return this.get_inc()},ObjectID.prototype.generate=function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var e=("undefined"==typeof process?Math.floor(1e5*Math.random()):process.pid)%65535,i=this.get_inc(),n=new Buffer(12);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,n[6]=255&MACHINE_ID,n[5]=MACHINE_ID>>8&255,n[4]=MACHINE_ID>>16&255,n[8]=255&e,n[7]=e>>8&255,n[11]=255&i,n[10]=i>>8&255,n[9]=i>>16&255,n},ObjectID.prototype.toString=function(){return this.toHexString()},ObjectID.prototype.inspect=ObjectID.prototype.toString,ObjectID.prototype.toJSON=function(){return this.toHexString()},ObjectID.prototype.equals=function(t){return t instanceof ObjectID?this.toString()==t.toString():"string"==typeof t&&ObjectID.isValid(t)&&12==t.length&&this.id instanceof _Buffer?t===this.id.toString("binary"):"string"==typeof t&&ObjectID.isValid(t)&&24==t.length?t===this.toHexString():"string"==typeof t&&ObjectID.isValid(t)&&12==t.length?t===this.id:null!=t&&(t instanceof ObjectID||t.toHexString)?t.toHexString()===this.toHexString():!1},ObjectID.prototype.getTimestamp=function(){var t=new Date,e=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return t.setTime(1e3*Math.floor(e)),t},ObjectID.index=~~(16777215*Math.random()),ObjectID.createPk=function(){return new ObjectID},ObjectID.createFromTime=function(t){var e=new Buffer([0,0,0,0,0,0,0,0,0,0,0,0]);return e[3]=255&t,e[2]=t>>8&255,e[1]=t>>16&255,e[0]=t>>24&255,new ObjectID(e)};for(var encodeLookup="0123456789abcdef".split(""),decodeLookup=[],i=0;10>i;)decodeLookup[48+i]=i++;for(;16>i;)decodeLookup[87+i]=i++;var _Buffer=Buffer,convertToHex=function(t){return t.toString("hex")};ObjectID.createFromHexString=function(t){if("undefined"==typeof t||null!=t&&24!=t.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");var e=t.length;if(e>24)throw new Error("Id cannot be longer than 12 bytes");for(var i=e>>1,n=new _Buffer(i),r=0,o=0;e>o;)n[r++]=decodeLookup[t.charCodeAt(o++)]<<4|decodeLookup[t.charCodeAt(o++)];return new ObjectID(n)},ObjectID.isValid=function(t){return null==t?!1:"number"==typeof t?!0:"string"==typeof t?12==t.length||24==t.length&&checkForHexRegExp.test(t):t instanceof ObjectID?!0:t instanceof _Buffer?!0:t.toHexString?12==t.id.length||24==t.id.length&&checkForHexRegExp.test(t.id):!1},Object.defineProperty(ObjectID.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(t){this.id[3]=255&t,this.id[2]=t>>8&255,this.id[1]=t>>16&255,this.id[0]=t>>24&255}}),module.exports=ObjectID,module.exports.ObjectID=ObjectID,module.exports.ObjectId=ObjectID;