for(var ReplSetManager=require("mongodb-topology-manager").ReplSet,f=require("util").format,rsOptions={server:{keyFile:__dirname+"/test/functional/data/keyfile.txt",auth:null,replSet:"rs"},client:{replSet:"rs"}},nodes=[{options:{bind_ip:"localhost",port:31e3,dbpath:f("%s/../db/31000",__dirname)}},{options:{bind_ip:"localhost",port:31001,dbpath:f("%s/../db/31001",__dirname)}},{options:{bind_ip:"localhost",port:31002,dbpath:f("%s/../db/31002",__dirname)}}],i=0;i<nodes.length;i++)for(var name in rsOptions.server)nodes[i].options[name]=rsOptions.server[name];var replicasetManager=new ReplSetManager("mongod",nodes,rsOptions.client);replicasetManager.purge().then(function(){replicasetManager.start().then(function(){process.exit(0)})["catch"](function(e){console.log("====== "),console.dir(e)})});