var MongoClient=require("./").MongoClient,assert=require("assert");MongoClient.connect("mongodb://localhost:27017/bench",function(e,n){function t(e,n){var t=(new Date).getTime();e.find({}).limit(100).toArray(function(e,o){r.push((new Date).getTime()-t),assert.equal(null,e),n()})}for(var o=[],a=1e3,s=a,r=[],d=0;100>d;d++)o.push(JSON.parse(data));var i=n.collection("inserts");console.log("== insert documents"),i.insert(o,function(e,d){o=[],assert.equal(null,e),console.log("== start bench");for(var m=0;a>m;m++)t(i,function(e){if(s-=1,0==s){var t=r.reduce(function(e,n){return e+n},0);console.log("==========================================="),console.log("total time: "+t),n.close(),process.exit(0)}})})});var data=JSON.stringify({data:[{_id:1,x:11},{_id:2,x:22},{_id:3,x:33}],collection_name:"test",database_name:"command-monitoring-tests",tests:[{description:"A successful mixed bulk write",operation:{name:"bulkWrite",arguments:{requests:[{insertOne:{document:{_id:4,x:44}}},{updateOne:{filter:{_id:3},update:{set:{x:333}}}}]}},expectations:[{command_started_event:{command:{insert:"test",documents:[{_id:4,x:44}],ordered:!0},command_name:"insert",database_name:"command-monitoring-tests"}},{command_succeeded_event:{reply:{ok:1,n:1},command_name:"insert"}},{command_started_event:{command:{update:"test",updates:[{q:{_id:3},u:{set:{x:333}},upsert:!1,multi:!1}],ordered:!0},command_name:"update",database_name:"command-monitoring-tests"}},{command_succeeded_event:{reply:{ok:1,n:1},command_name:"update"}}]},{description:"A successful unordered bulk write with an unacknowledged write concern",operation:{name:"bulkWrite",arguments:{requests:[{insertOne:{document:{_id:4,x:44}}}],ordered:!1,writeConcern:{w:0}}},expectations:[{command_started_event:{command:{insert:"test",documents:[{_id:4,x:44}],ordered:!1,writeConcern:{w:0}},command_name:"insert",database_name:"command-monitoring-tests"}},{command_succeeded_event:{reply:{ok:1},command_name:"insert"}}]}]});