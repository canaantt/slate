function acornShimPrepare(r){var e=new stream.Transform;if(r==path.resolve(__dirname,"../src/index.js")){var o=!1;e._transform=function(r,e,n){o?n():(o=!0,n(null,ACORN_PLACEHOLDER))}}else e._transform=function(r,e,o){o(null,r)};return e}function acornShimComplete(){var r=new stream.Transform,e="";return r._transform=function(r,o,n){e+=r.toString("utf8"),n()},r._flush=function(o){r.push(e.replace(ACORN_PLACEHOLDER,"module.exports = typeof acorn != 'undefined' ? acorn : require(\"./acorn\")")),o(null)},r}var fs=require("fs"),path=require("path"),stream=require("stream"),browserify=require("browserify"),babel=require("babel-core"),babelify=require("babelify").configure({loose:"all"});process.chdir(path.resolve(__dirname,"..")),browserify({standalone:"acorn"}).plugin(require("browserify-derequire")).transform(babelify).require("./src/index.js",{entry:!0}).bundle().on("error",function(r){console.log("Error: "+r.message)}).pipe(fs.createWriteStream("dist/acorn.js"));var ACORN_PLACEHOLDER="this_function_call_should_be_replaced_with_a_call_to_load_acorn()";browserify({standalone:"acorn.loose"}).plugin(require("browserify-derequire")).transform(acornShimPrepare).transform(babelify).require("./src/loose/index.js",{entry:!0}).bundle().on("error",function(r){console.log("Error: "+r.message)}).pipe(acornShimComplete()).pipe(fs.createWriteStream("dist/acorn_loose.js")),browserify({standalone:"acorn.walk"}).plugin(require("browserify-derequire")).transform(acornShimPrepare).transform(babelify).require("./src/walk/index.js",{entry:!0}).bundle().on("error",function(r){console.log("Error: "+r.message)}).pipe(acornShimComplete()).pipe(fs.createWriteStream("dist/walk.js")),babel.transformFile("./src/bin/acorn.js",function(r,e){return r?console.log("Error: "+r.message):void fs.writeFile("bin/acorn",e.code,function(r){if(r)return console.log("Error: "+r.message);if("win32"!==process.platform){var e=fs.statSync("bin/acorn"),o=e.mode|parseInt("111",8);fs.chmodSync("bin/acorn",o)}})});