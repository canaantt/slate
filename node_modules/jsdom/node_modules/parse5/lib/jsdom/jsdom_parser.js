"use strict";var Parser=require("../tree_construction/parser"),ParsingUnit=require("./parsing_unit");exports.parseDocument=function(r,e){var n=new Parser(e),s=new ParsingUnit(n);return n._runParsingLoop=function(){for(s.parsingLoopLock=!0;!s.suspended&&!this.stopped;)this._iterateParsingLoop();s.parsingLoopLock=!1,this.stopped&&s.callback(this.document)},process.nextTick(function(){n.parse(r)}),s},exports.parseInnerHtml=function(r,e,n){var s=new Parser(n);return s.parseFragment(r,e)};