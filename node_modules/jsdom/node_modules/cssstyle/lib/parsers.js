"use strict";exports.TYPES={INTEGER:1,NUMBER:2,LENGTH:3,PERCENT:4,URL:5,COLOR:6,STRING:7,ANGLE:8,KEYWORD:9,NULL_OR_EMPTY_STR:10};var integerRegEx=/^[\-+]?[0-9]+$/,numberRegEx=/^[\-+]?[0-9]*\.[0-9]+$/,lengthRegEx=/^(0|[\-+]?[0-9]*\.?[0-9]+(in|cm|em|mm|pt|pc|px))$/,percentRegEx=/^[\-+]?[0-9]*\.?[0-9]+%$/,urlRegEx=/^url\(\s*([^\)]*)\s*\)$/,stringRegEx=/^(\"[^\"]*\"|\'[^\']*\')$/,colorRegEx1=/^#[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]([0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])?$/,colorRegEx2=/^rgb\(([^\)]*)\)$/,colorRegEx3=/^rgba\(([^\)]*)\)$/,angleRegEx=/^([\-+]?[0-9]*\.?[0-9]+)(deg|grad|rad)$/;exports.valueType=function(e){if(""===e||null===e)return exports.TYPES.NULL_OR_EMPTY_STR;if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)return void 0;if(integerRegEx.test(e))return exports.TYPES.INTEGER;if(numberRegEx.test(e))return exports.TYPES.NUMBER;if(lengthRegEx.test(e))return exports.TYPES.LENGTH;if(percentRegEx.test(e))return exports.TYPES.PERCENT;if(urlRegEx.test(e))return exports.TYPES.URL;if(stringRegEx.test(e))return exports.TYPES.STRING;if(angleRegEx.test(e))return exports.TYPES.ANGLE;if(colorRegEx1.test(e))return exports.TYPES.COLOR;var t,r=colorRegEx2.exec(e);if(null!==r)return t=r[1].split(/\s*,\s*/),3!==t.length?void 0:t.every(percentRegEx.test.bind(percentRegEx))||t.every(integerRegEx.test.bind(integerRegEx))?exports.TYPES.COLOR:void 0;if(r=colorRegEx3.exec(e),null!==r)return t=r[1].split(/\s*,\s*/),4!==t.length?void 0:(t.slice(0,3).every(percentRegEx.test.bind(percentRegEx))||t.every(integerRegEx.test.bind(integerRegEx)))&&numberRegEx.test(t[3])?exports.TYPES.COLOR:void 0;switch(e=e.toLowerCase()){case"maroon":case"red":case"orange":case"yellow":case"olive":case"purple":case"fuchsia":case"white":case"lime":case"green":case"navy":case"blue":case"aqua":case"teal":case"black":case"silver":case"gray":case"activeborder":case"activecaption":case"appworkspace":case"background":case"buttonface":case"buttonhighlight":case"buttonshadow":case"buttontext":case"captiontext":case"graytext":case"highlight":case"highlighttext":case"inactiveborder":case"inactivecaption":case"inactivecaptiontext":case"infobackground":case"infotext":case"menu":case"menutext":case"scrollbar":case"threeddarkshadow":case"threedface":case"threedhighlight":case"threedlightshadow":case"threedshadow":case"window":case"windowframe":case"windowtext":return exports.TYPES.COLOR;default:return exports.TYPES.KEYWORD}},exports.parseInteger=function(e){var t=exports.valueType(e);return t===exports.TYPES.NULL_OR_EMPTY_STR?e:t!==exports.TYPES.INTEGER?void 0:String(parseInt(e,10))},exports.parseNumber=function(e){var t=exports.valueType(e);return t===exports.TYPES.NULL_OR_EMPTY_STR?e:t!==exports.TYPES.NUMBER&&t!==exports.TYPES.INTEGER?void 0:String(parseFloat(e))},exports.parseLength=function(e){if(0===e||"0"===e)return"0px";var t=exports.valueType(e);return t===exports.TYPES.NULL_OR_EMPTY_STR?e:t!==exports.TYPES.LENGTH?void 0:e},exports.parsePercent=function(e){if(0===e||"0"===e)return"0%";var t=exports.valueType(e);return t===exports.TYPES.NULL_OR_EMPTY_STR?e:t!==exports.TYPES.PERCENT?void 0:e},exports.parseMeasurement=function(e){var t=exports.parseLength(e);return void 0!==t?t:exports.parsePercent(e)},exports.parseUrl=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;var r=urlRegEx.exec(e);if(!r)return void 0;var s=r[1];if(('"'===s[0]||"'"===s[0])&&s[0]!==s[s.length-1])return void 0;('"'===s[0]||"'"===s[0])&&(s=s.substr(1,s.length-2));var o;for(o=0;o<s.length;o++)switch(s[o]){case"(":case")":case" ":case"	":case"\n":case"'":case'"':return void 0;case"\\":o++}return"url("+s+")"},exports.parseString=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t!==exports.TYPES.STRING)return void 0;var r;for(r=1;r<e.length-1;r++)switch(e[r]){case e[0]:return void 0;case"\\":for(r++;r<e.length-1&&/[0-9A-Fa-f]/.test(e[r]);)r++}return r>=e.length?void 0:e},exports.parseColor=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;var r,s,o,a,n=1,i=colorRegEx1.exec(e);if(i){var p=e.substr(1);return 3===p.length&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),r=parseInt(p.substr(0,2),16),s=parseInt(p.substr(2,2),16),o=parseInt(p.substr(4,2),16),"rgb("+r+", "+s+", "+o+")"}if(i=colorRegEx2.exec(e)){if(a=i[1].split(/\s*,\s*/),3!==a.length)return void 0;if(a.every(percentRegEx.test.bind(percentRegEx)))r=Math.floor(255*parseFloat(a[0].slice(0,-1))/100),s=Math.floor(255*parseFloat(a[1].slice(0,-1))/100),o=Math.floor(255*parseFloat(a[2].slice(0,-1))/100);else{if(!a.every(integerRegEx.test.bind(integerRegEx)))return void 0;r=parseInt(a[0],10),s=parseInt(a[1],10),o=parseInt(a[2],10)}return r=Math.min(255,Math.max(0,r)),s=Math.min(255,Math.max(0,s)),o=Math.min(255,Math.max(0,o)),"rgb("+r+", "+s+", "+o+")"}if(i=colorRegEx3.exec(e)){if(a=i[1].split(/\s*,\s*/),4!==a.length)return void 0;if(a.slice(0,3).every(percentRegEx.test.bind(percentRegEx)))r=Math.floor(255*parseFloat(a[0].slice(0,-1))/100),s=Math.floor(255*parseFloat(a[1].slice(0,-1))/100),o=Math.floor(255*parseFloat(a[2].slice(0,-1))/100),n=parseFloat(a[3]);else{if(!a.slice(0,3).every(integerRegEx.test.bind(integerRegEx)))return void 0;r=parseInt(a[0],10),s=parseInt(a[1],10),o=parseInt(a[2],10),n=parseFloat(a[3])}return isNaN(n)&&(n=1),r=Math.min(255,Math.max(0,r)),s=Math.min(255,Math.max(0,s)),o=Math.min(255,Math.max(0,o)),n=Math.min(1,Math.max(0,n)),1===n?"rgb("+r+", "+s+", "+o+")":"rgba("+r+", "+s+", "+o+", "+n+")"}return t===exports.TYPES.COLOR?e:void 0},exports.parseAngle=function(e){var t=exports.valueType(e);if(t===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(t!==exports.TYPES.ANGLE)return void 0;var r=angleRegEx.exec(e),s=parseFloat(r[1]);for("rad"===r[2]?s*=180/Math.PI:"grad"===r[2]&&(s*=.9);0>s;)s+=360;for(;s>360;)s-=360;return s+"deg"},exports.parseKeyword=function(e,t){var r=exports.valueType(e);if(r===exports.TYPES.NULL_OR_EMPTY_STR)return e;if(r!==exports.TYPES.KEYWORD)return void 0;e=e.toString().toLowerCase();var s;for(s=0;s<t.length;s++)if(t[s].toLowerCase()===e)return t[s];return void 0};var dashedToCamelCase=function(e){var t,r="",s=!1;for(t=0;t<e.length;t++)"-"!==e[t]?(r+=s?e[t].toUpperCase():e[t],s=!1):s=!0;return r};exports.dashedToCamelCase=dashedToCamelCase;var is_space=/\s/,opening_deliminators=['"',"'","("],closing_deliminators=['"',"'",")"],getParts=function(e){var t,r,s,o=[],a=e.length,n=[],i="";for(t=0;a>t;t++)r=opening_deliminators.indexOf(e[t]),s=closing_deliminators.indexOf(e[t]),is_space.test(e[t])?0===o.length?(""!==i&&n.push(i),i=""):i+=e[t]:"\\"===e[t]?(t++,i+=e[t]):(i+=e[t],-1!==s&&s===o[o.length-1]?o.pop():-1!==r&&o.push(r));return""!==i&&n.push(i),n};exports.shorthandParser=function(e,t){var r={},s=exports.valueType(e);if(s===exports.TYPES.NULL_OR_EMPTY_STR)return Object.keys(t).forEach(function(e){r[e]=""}),r;if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)return void 0;if("inherit"===e.toLowerCase())return{};var o=getParts(e),a=!0;return o.forEach(function(e){var s=!1;Object.keys(t).forEach(function(o){t[o].isValid(e)&&(s=!0,r[o]=e)}),a=a&&s}),a?r:void 0},exports.shorthandSetter=function(e,t){return function(r){var s=exports.shorthandParser(r,t);if(void 0!==s){Object.keys(s).forEach(function(e){var t=dashedToCamelCase(e);this[t]=s[e],s[e]=this[t],this.removeProperty(e),""!==s[e]&&(this._values[e]=s[e])},this),Object.keys(t).forEach(function(e){s.hasOwnProperty(e)||(this.removeProperty(e),delete this._values[e])},this),this.removeProperty(e);var o=exports.shorthandGetter(e,t).call(this);""!==o&&this._setProperty(e,o)}}},exports.shorthandGetter=function(e,t){return function(){return void 0!==this._values[e]?this.getPropertyValue(e):Object.keys(t).map(function(e){return this.getPropertyValue(e)},this).filter(function(e){return""!==e}).join(" ")}},exports.implicitSetter=function(e,t,r,s){t=t||"",""!==t&&(t="-"+t);var o=["top","right","bottom","left"];return function(a){if("number"==typeof a&&(a=a.toString()),"string"!=typeof a)return void 0;var n;if(n="inherit"===a.toLowerCase()||""===a?[a]:getParts(a),n.length<1||n.length>4)return void 0;if(!n.every(r))return void 0;n=n.map(function(e){return s(e)}),this._setProperty(e+t,n.join(" ")),1===n.length&&(n[1]=n[0]),2===n.length&&(n[2]=n[0]),3===n.length&&(n[3]=n[1]);for(var i=0;4>i;i++){var p=e+"-"+o[i]+t;this.removeProperty(p),""!==n[i]&&(this._values[p]=n[i])}return a}},exports.subImplicitSetter=function(e,t,r,s){var o=e+"-"+t,a=[e+"-top",e+"-right",e+"-bottom",e+"-left"];return function(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)return void 0;if(!r(t))return void 0;t=s(t),this._setProperty(o,t);for(var n=[],i=0;4>i&&(null!=this._values[a[i]]&&""!==this._values[a[i]]);i++)n.push(this._values[a[i]]);if(4===n.length){for(i=0;4>i;i++)this.removeProperty(a[i]),this._values[a[i]]=n[i];this._setProperty(e,n.join(" "))}return t}};var camel_to_dashed=/[A-Z]/g,first_segment=/^\([^\-]\)-/,vendor_prefixes=["o","moz","ms","webkit"];exports.camelToDashed=function(e){var t,r=e.replace(camel_to_dashed,"-$&").toLowerCase();return t=r.match(first_segment),t&&-1!==vendor_prefixes.indexOf(t[1])&&(r="-"+r),r};