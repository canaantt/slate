"use strict";var CSSOM=require("cssom"),fs=require("fs"),path=require("path"),camelToDashed=require("./parsers").camelToDashed,dashedToCamelCase=require("./parsers").dashedToCamelCase,CSSStyleDeclaration=function(t){this._values={},this._importants={},this._length=0,this._onChange=t||function(){}};CSSStyleDeclaration.prototype={constructor:CSSStyleDeclaration,getPropertyValue:function(t){return this._values.hasOwnProperty(t)?this._values[t].toString():""},setProperty:function(t,e,r){if(void 0!==e){if(null===e||""===e)return void this.removeProperty(t);var i=dashedToCamelCase(t);this[i]=e,this._importants[t]=r}},_setProperty:function(t,e,r){if(void 0!==e){if(null===e||""===e)return void this.removeProperty(t);if(this._values[t]){var i=Array.prototype.indexOf.call(this,t);0>i&&(this[this._length]=t,this._length++)}else this[this._length]=t,this._length++;this._values[t]=e,this._importants[t]=r,this._onChange(this.cssText)}},removeProperty:function(t){if(!this._values.hasOwnProperty(t))return"";var e=this._values[t];delete this._values[t],delete this._importants[t];var r=Array.prototype.indexOf.call(this,t);return 0>r?e:(Array.prototype.splice.call(this,r,1),this._onChange(this.cssText),e)},getPropertyPriority:function(t){return this._importants[t]||""},getPropertyCSSValue:function(){},getPropertyShorthand:function(){},isPropertyImplicit:function(){},item:function(t){return t=parseInt(t,10),0>t||t>=this._length?"":this[t]}},Object.defineProperties(CSSStyleDeclaration.prototype,{cssText:{get:function(){var t,e,r,i,s=[];for(t=0;t<this._length;t++)e=this[t],r=this.getPropertyValue(e),i=this.getPropertyPriority(e),""!==i&&(i=" !"+i),s.push([e,": ",r,i,";"].join(""));return s.join(" ")},set:function(t){var e;this._values={},Array.prototype.splice.call(this,0,this._length),this._importants={};var r;try{r=CSSOM.parse("#bogus{"+t+"}").cssRules[0].style}catch(i){return}var s,n=r.length;for(e=0;n>e;++e)s=r[e],this.setProperty(r[e],r.getPropertyValue(s),r.getPropertyPriority(s));this._onChange(this.cssText)},enumerable:!0,configurable:!0},parentRule:{get:function(){return null},enumerable:!0,configurable:!0},length:{get:function(){return this._length},set:function(t){var e;for(e=t;e<this._length;e++)delete this[e];this._length=t},enumerable:!0,configurable:!0},"float":{get:function(){return this.cssFloat},set:function(t){this.cssFloat=t},enumerable:!0,configurable:!0}}),require("./properties")(CSSStyleDeclaration.prototype),exports.CSSStyleDeclaration=CSSStyleDeclaration;