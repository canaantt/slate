"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(e,r,n){function t(e,r){y.push(function(){i(e,r)})}function a(){if(0===y.length&&0===d)return n(null,c);for(;y.length&&r>d;){var e=y.shift();e()}}function u(e,r){var n=p[e];n||(n=p[e]=[]),n.push(r)}function o(e){var r=p[e]||[];_arrayEach2["default"](r,function(e){e()}),a()}function i(e,r){if(!h){var t=_onlyOnce2["default"](_rest2["default"](function(r,t){if(d--,t.length<=1&&(t=t[0]),r){var a={};_baseForOwn2["default"](c,function(e,r){a[r]=e}),a[e]=t,h=!0,p=[],n(r,a)}else c[e]=t,o(e)}));d++;var a=r[r.length-1];r.length>1?a(c,t):a(t)}}function f(){for(var e,r=0;q.length;)e=q.pop(),r++,_arrayEach2["default"](l(e),function(e){0===--O[e]&&q.push(e)});if(r!==_)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function l(r){var n=[];return _baseForOwn2["default"](e,function(e,t){_isArray2["default"](e)&&_baseIndexOf2["default"](e,r,0)>=0&&n.push(t)}),n}"function"==typeof r&&(n=r,r=null),n=_once2["default"](n||_noop2["default"]);var s=_keys2["default"](e),_=s.length;if(!_)return n(null);r||(r=_);var c={},d=0,h=!1,p={},y=[],q=[],O={};_baseForOwn2["default"](e,function(r,n){if(!_isArray2["default"](r))return t(n,[r]),void q.push(n);var a=r.slice(0,r.length-1),o=a.length;return 0===o?(t(n,r),void q.push(n)):(O[n]=o,void _arrayEach2["default"](a,function(i){if(!e[i])throw new Error("async.auto task `"+n+"` has a non-existent dependency in "+a.join(", "));u(i,function(){o--,0===o&&t(n,r)})}))}),f(),a()};var _arrayEach=require("lodash/_arrayEach"),_arrayEach2=_interopRequireDefault(_arrayEach),_baseForOwn=require("lodash/_baseForOwn"),_baseForOwn2=_interopRequireDefault(_baseForOwn),_baseIndexOf=require("lodash/_baseIndexOf"),_baseIndexOf2=_interopRequireDefault(_baseIndexOf),_isArray=require("lodash/isArray"),_isArray2=_interopRequireDefault(_isArray),_keys=require("lodash/keys"),_keys2=_interopRequireDefault(_keys),_noop=require("lodash/noop"),_noop2=_interopRequireDefault(_noop),_rest=require("lodash/rest"),_rest2=_interopRequireDefault(_rest),_once=require("./internal/once"),_once2=_interopRequireDefault(_once),_onlyOnce=require("./internal/onlyOnce"),_onlyOnce2=_interopRequireDefault(_onlyOnce);module.exports=exports["default"];