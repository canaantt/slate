"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(e,r){var t=_queue2["default"](e,r);return t.push=function(e,r,a){if(null==a&&(a=_noop2["default"]),"function"!=typeof a)throw new Error("task callback must be a function");if(t.started=!0,_isArray2["default"](e)||(e=[e]),0===e.length)return _setImmediate2["default"](function(){t.drain()});r=r||0;for(var u=t._tasks.head;u&&r>=u.priority;)u=u.next;_arrayEach2["default"](e,function(e){var i={data:e,priority:r,callback:a};u?t._tasks.insertBefore(u,i):t._tasks.push(i)}),_setImmediate2["default"](t.process)},delete t.unshift,t};var _arrayEach=require("lodash/_arrayEach"),_arrayEach2=_interopRequireDefault(_arrayEach),_isArray=require("lodash/isArray"),_isArray2=_interopRequireDefault(_isArray),_noop=require("lodash/noop"),_noop2=_interopRequireDefault(_noop),_setImmediate=require("./setImmediate"),_setImmediate2=_interopRequireDefault(_setImmediate),_queue=require("./queue"),_queue2=_interopRequireDefault(_queue);module.exports=exports["default"];