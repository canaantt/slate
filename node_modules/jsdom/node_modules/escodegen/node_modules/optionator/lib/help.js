(function(){function n(n,e){var t,r;return t=n.length,r=e-t,n+""+a(" ",r>0?r:0)}function e(n){var e,t,a;return e=n.charAt(0).toUpperCase(),t=n.slice(1),a=/[\.!\?]$/.test(n)?"":".",e+""+t+a}function t(n,e){return n.replace(/{{([a-zA-Z$_][a-zA-Z$_0-9]*)}}/g,function(n,t){var a;return null!=(a=e[t])?a:"{{"+t+"}}"})}function a(n,e){for(var t="";e>0;(e>>=1)&&(n+=n))1&e&&(t+=n);return t}var r,l,i,o,u,p,s,c,d,h,f,g,m,y,v,S;r=require("prelude-ls"),l=r.id,i=r.find,o=r.sort,u=r.min,p=r.max,s=r.map,c=r.unlines,r=require("./util"),d=r.nameToRaw,h=r.dasherize,f=r.naturalJoin,g=require("wordwrap"),m=function(n,e,t){var a,r,l,i,o,u,p,c,h,f,m,y,v,S,w;return a=n.option,r=null!=(l=n.shortNames)?l:[],i=null!=(l=n.longNames)?l:[],o=n.type,u=n.description,p=e.aliasSeparator,c=e.typeSeparator,h=e.initialIndent,n.negateName&&(a="no-"+a,i&&(i=s(function(n){return"no-"+n},i))),f=1===a.length?[a].concat(r,i):r.concat([a],i),m=s(d,f).join(p),y=m.length,v="NUM"===a?"::":c,S=v.length,null!=t&&!n["boolean"]&&h+y+S+o.length>t?(w=g(h+y+S,t),m+""+v+w(o).replace(/^\s+/,"")):m+""+(n["boolean"]?"":v+""+o)},y=function(n){null==n.aliasSeparator&&(n.aliasSeparator=", "),null==n.typeSeparator&&(n.typeSeparator=" "),null==n.descriptionSeparator&&(n.descriptionSeparator="  "),null==n.initialIndent&&(n.initialIndent=2),null==n.secondaryIndent&&(n.secondaryIndent=4),null==n.maxPadFactor&&(n.maxPadFactor=1.5)},v=function(n,t){var r,i,o;return r=t.stdout,i=null!=(o=t.helpStyle)?o:{},y(i),function(t){var o,u,p,s,d,f,y,v,S,w,x,I,N,T,F;o=null!=r&&r.isTTY?r.columns-1:null,u=o?g(o):l;try{p=n(h(t))}catch(P){return s=P,s.message}return d=m(p,i),f=p["default"]&&!p.negateName?"\ndefault: "+p["default"]:"",y=p.restPositional?"Everything after this option is considered a positional argument, even if it looks like an option.":"",v=p.longDescription||p.description&&e(p.description),S=v&&y?v+" "+y:(w=v||y)?w:"",x="description:",I=S?o&&S.length-1-x.length>o?"\n"+x+"\n"+u(S):"\n"+x+" "+S:"",N=(w=p.example)?(T=[].concat(w),T.length>1?"\nexamples:\n"+c(T):"\nexample: "+T[0]):"",F=f||I||N?"\n"+a("=",d.length):"",d+""+F+f+I+N}},S=function(e){var r,l,i,s,d,h,v,S,w,x,I,N;return r=e.options,l=e.prepend,i=e.append,s=null!=(d=e.helpStyle)?d:{},h=e.stdout,y(s),v=s.aliasSeparator,S=s.typeSeparator,w=s.descriptionSeparator,x=s.maxPadFactor,I=s.initialIndent,N=s.secondaryIndent,function(e){var d,y,v,S,T,F,P,b,k,q,z,A,H,L,$,j,U,Y,Z,_,C,D,E,J,M,O,R,B,G,K,Q,V;for(d=null!=e?e:{},y=d.showHidden,v=d.interpolate,S=null!=h&&h.isTTY?h.columns-1:null,T=[],F=function(n){return T.push(null!=n?n:"")},l&&(F(v?t(l,v):l),F()),P=[],b=0,k=0,q=[],z=0,A=(d=r).length;A>z;++z)H=d[z],(y||!H.hidden)&&((L=H.heading)?P.push({type:"heading",value:L}):($=m(H,s,S),j=[],null!=(L=H.description)&&j.push(L),(L=H["enum"])&&j.push("either: "+f(L)),H["default"]&&!H.negateName&&j.push("default: "+H["default"]),U=j.join(" - "),P.push({type:"option",pre:$,desc:U,descLen:U.length}),Y=$.length,b++,k+=Y,q.push(Y)));for(Z=o(q),_=Z[Z.length-1],C=I+k/b,D=b>2?u(C*x,_):_,z=Z.length-1;z>=0;--z)if(Y=Z[z],D>=Y){E=Y;break}if(J=w.length,null!=S)for(M=0,O=0,z=0,A=P.length;A>z;++z)H=P[z],"option"===H.type&&($=H.pre,U=H.desc,R=H.descLen,0===R?H.wrap="none":(Y=p(E,$.length)+I+J,B=Y+R,B>S?R/2.5>S-Y?(M++,H.wrap="full"):(O++,H.wrap="partial"):H.wrap="none"));for(G=a(" ",I),K=b>1&&M+.5*O>.5*b,z=0,A=P.length;A>z;++z)if(Q=z,H=P[z],"heading"===H.type)0!==Q&&F(),F(H.value+":");else{if($=H.pre,U=H.desc,R=H.descLen,V=H.wrap,null!=S){if(K||"full"===V){V=g(I+N,S),F(G+""+$+"\n"+V(U));continue}if("partial"===V){V=g(I+J+p(E,$.length),S),F(G+""+n($,E)+w+V(U).replace(/^\s+/,""));continue}}F(0===R?G+""+$:G+""+n($,E)+w+U)}return i&&(F(),F(v?t(i,v):i)),c(T)}},module.exports={generateHelp:S,generateHelpForOption:v}}).call(this);