(function(){function t(t,e){var r,n;return"Array"!==N.call(t).slice(8,-1)?{type:"Nothing"}:(r=e.of,{type:"Just",value:function(){var e,i,a,c=[];for(e=0,a=(i=t).length;a>e;++e)n=i[e],c.push(u(n,r));return c}()})}function e(t,e){var r,n;return"Array"!==N.call(t).slice(8,-1)?{type:"Nothing"}:{type:"Just",value:function(){var i,a,c,o=[];for(i=0,c=(a=e.of).length;c>i;++i)r=i,n=a[i],o.push(u(t[r],n));return o}()}}function r(t,e){var r,n,i;return"Object"!==N.call(t).slice(8,-1)?{type:"Nothing"}:(r=e.of,{type:"Just",value:function(){var e,a={};for(n in e=t)i=e[n],a[n]=u(i,r[n]||[{type:"*"}]);return a}()})}function n(n,u,i){var a,c,o;if(a=u.type,c=u.structure,a)return(o=d[a])(n,i);switch(c){case"array":return t(n,u);case"tuple":return e(n,u);case"fields":return r(n,u)}}function u(t,e,r){var u,i,a,c,o,l;for(null==r&&(r={}),u=0,i=e.length;i>u;++u)if(a=e[u],c=n(t,a,r),o=c.type,l=c.value,"Nothing"!==o&&J([a],l))return l;throw new Error("Value '"+t+"' does not type check against "+JSON.stringify(e)+".")}function i(t,e){if(t[0]===e)return t.shift();throw new Error("Expected '"+e+"', but got "+t[0]+" instead.")}function a(t,e){return t[0]===e?t.shift():void 0}function c(t,e,r){var n;for(r&&i(t,e[0]),n=[];t.length&&t[0]!==e[1];)n.push(s(t)),a(t,",");return r&&i(t,e[1]),n}function o(t,e){return c(t,["[","]"],e)}function l(t,e){return c(t,["(",")"],e)}function p(t,e){var r,n;for(e&&i(t,"{"),r={};t.length&&(!e||"}"!==t[0]);)n=t.shift(),i(t,":"),r[n]=s(t),a(t,",");return e&&i(t,"}"),r}function s(t){switch(t[0]){case"[":return o(t,!0);case"(":return l(t,!0);case"{":return p(t,!0);default:return t.shift()}}function f(t,e){var r,n,u;return r=e[0].structure,1===e.length&&r?(n=t.slice(),u="array"===r?o(t,"["===t[0]):"tuple"===r?l(t,"("===t[0]):p(t,"{"===t[0]),t.length?s("array"===r?["["].concat(n,["]"]):["("].concat(n,[")"])):u):s(t)}function y(t,e){var r,n;if(r=g(function(t){return!t||/^\s+$/.test(t)},e.split(w)),n=f(r,t),!n)throw new Error("Error parsing "+e);return u(n,t)}var v,h,g,J,d,w,N={}.toString;v=require("prelude-ls"),h=v.id,g=v.reject,J=require("type-check").parsedTypeCheck,d={"*":function(t){switch(N.call(t).slice(8,-1)){case"Array":return n(t,{type:"Array"});case"Object":return n(t,{type:"Object"});default:return{type:"Just",value:u(t,[{type:"Undefined"},{type:"Null"},{type:"Boolean"},{type:"Number"},{type:"Date"},{type:"RegExp"},{type:"Array"},{type:"Object"},{type:"String"}],{explicit:!0})}}},Undefined:function(t){return"undefined"===t?{type:"Just",value:void 0}:{type:"Nothing"}},Null:function(t){return"null"===t?{type:"Just",value:null}:{type:"Nothing"}},Boolean:function(t){return"true"===t?{type:"Just",value:!0}:"false"===t?{type:"Just",value:!1}:{type:"Nothing"}},Number:function(t){return{type:"Just",value:+t}},Int:function(t){return{type:"Just",value:parseInt(t)}},Float:function(t){return{type:"Just",value:parseFloat(t)}},Date:function(t,e){var r;return(r=/^\#(.*)\#$/.exec(t))?{type:"Just",value:new Date(+r[1]||r[1])}:e.explicit?{type:"Nothing"}:{type:"Just",value:new Date(+t||t)}},RegExp:function(t,e){var r;return(r=/^\/(.*)\/([gimy]*)$/.exec(t))?{type:"Just",value:new RegExp(r[1],r[2])}:e.explicit?{type:"Nothing"}:{type:"Just",value:new RegExp(t)}},Array:function(e){return t(e,{of:[{type:"*"}]})},Object:function(t){return r(t,{of:{}})},String:function(t){var e;return(e=t.match(/^'(.*)'$/))?{type:"Just",value:e[1]}:(e=t.match(/^"(.*)"$/))?{type:"Just",value:e[1]}:{type:"Just",value:t}}},w=/("(?:[^"]|\\")*")|('(?:[^']|\\')*')|(#.*#)|(\/(?:\\\/|[^\/])*\/[gimy]*)|([\[\]\(\)}{:,])|([-\.\$\w]+)|\s*/,module.exports=y}).call(this);