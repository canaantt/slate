(function(){function r(r,t){if(r[0]===t)return r.shift();throw new Error("Expected '"+t+"', but got '"+r[0]+"' instead in "+JSON.stringify(r)+".")}function t(r,t){return r[0]===t?r.shift():void 0}function n(n,e,u){var i,c,o,s;for(i=e[0],c=e[1],u&&r(n,i),o=[],s=","+(u?c:"");n.length&&u&&n[0]!==c;)o.push(f(n,s)),t(n,",");return u&&r(n,c),o}function e(r,t){return n(r,["[","]"],t)}function u(r,t){return n(r,["(",")"],t)}function i(n,e){var u,i,o;for(e&&r(n,"{"),u={},i=","+(e?"}":"");n.length&&(!e||"}"!==n[0]);)o=c(n,":"),r(n,":"),u[o]=f(n,i),t(n,",");return e&&r(n,"}"),u}function c(r,t){var n;for(null==t&&(t=""),n="";r.length&&-1===t.indexOf(r[0]);)n+=r.shift();return n}function f(r,t){switch(r[0]){case"[":return e(r,!0);case"(":return u(r,!0);case"{":return i(r,!0);default:return c(r,t)}}function o(r,t,n){var c,o,s,a,l,h,p,g;return c=t[0],o=c.type,s=c.structure,a=r.concat(),n.explicit||1!==t.length||(o||!s)&&"Array"!==o&&"Object"!==o?h=f(r):(l="array"===s||"Array"===o?e(r,"["===r[0]):"tuple"===s?u(r,"("===r[0]):i(r,"{"===r[0]),h=r.length?f("array"===s||"Array"===o?(p=a,p.unshift("["),p.push("]"),p):(g=a,g.unshift("("),g.push(")"),g)):l),h}function s(r){return!r}var a,l,h;a=require("prelude-ls").reject,l=/\[\]\(\)}{:,/.source,h=RegExp("(\"(?:\\\\\"|[^\"])*\")|('(?:\\\\'|[^'])*')|(/(?:\\\\/|[^/])*/[a-zA-Z]*)|(#.*#)|(["+l+"])|([^\\s"+l+"](?:\\s*[^\\s"+l+"]+)*)|\\s*"),module.exports=function(r,t,n){var e,u;if(null==n&&(n={}),!n.explicit&&1===r.length&&"String"===r[0].type)return"'"+t.replace(/\\'/g,"\\\\'")+"'";if(e=a(s,t.split(h)),u=o(e,r,n),!u)throw new Error("Error parsing '"+t+"'.");return u}}).call(this);