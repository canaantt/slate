/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */
if("function"!=typeof define)var define=require("amdefine")(module,require);define(function(t,r,e){function n(){this._array=[],this._set={}}var i=t("./util");n.fromArray=function(t,r){for(var e=new n,i=0,o=t.length;o>i;i++)e.add(t[i],r);return e},n.prototype.add=function(t,r){var e=this.has(t),n=this._array.length;(!e||r)&&this._array.push(t),e||(this._set[i.toSetString(t)]=n)},n.prototype.has=function(t){return Object.prototype.hasOwnProperty.call(this._set,i.toSetString(t))},n.prototype.indexOf=function(t){if(this.has(t))return this._set[i.toSetString(t)];throw new Error('"'+t+'" is not in the set.')},n.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},n.prototype.toArray=function(){return this._array.slice()},r.ArraySet=n});