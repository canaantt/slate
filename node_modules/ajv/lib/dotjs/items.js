"use strict";module.exports=function(a,e){var r,t=" ",l=a.level,s=a.dataLevel,i=a.schema[e],h=a.schemaPath+"."+e,v=a.errSchemaPath+"/"+e,o=!a.opts.allErrors,c="data"+(s||""),d="valid"+l,m="errs__"+l,n=a.util.copy(a),u="";n.level++;var P=n.dataLevel=a.dataLevel+1,f="data"+P,p=a.baseId;if(t+="var "+m+" = errors;var "+d+";",Array.isArray(i)){var g=a.schema.additionalItems;if(g===!1){t+=" "+d+" = "+c+".length <= "+i.length+"; ";var E=v;v=a.errSchemaPath+"/additionalItems",t+="  if (!"+d+") {   ";var R=R||[];R.push(t),t="",a.createErrors!==!1?(t+=" { keyword: '"+(r||"additionalItems")+"' , dataPath: (dataPath || '') + "+a.errorPath+' , schemaPath: "'+v+'" , params: { limit: '+i.length+" } ",a.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+i.length+" items' "),a.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+a.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var S=t;t=R.pop(),t+=!a.compositeRule&&o?a.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",v=E,o&&(u+="}",t+=" else { ")}var I=i;if(I)for(var b,y=-1,L=I.length-1;L>y;)if(b=I[y+=1],a.util.schemaHasRules(b,a.RULES.all)){t+=" valid"+n.level+" = true; if ("+c+".length > "+y+") { ";var A=c+"["+y+"]";n.schema=b,n.schemaPath=h+"["+y+"]",n.errSchemaPath=v+"/"+y,n.errorPath=a.util.getPathExpr(a.errorPath,y,a.opts.jsonPointers,!0),n.dataPathArr[P]=y;var j=a.validate(n);n.baseId=p,t+=a.util.varOccurences(j,f)<2?" "+a.util.varReplace(j,f,A)+" ":" var "+f+" = "+A+"; "+j+" ",t+=" }  ",o&&(t+=" if (valid"+n.level+") { ",u+="}")}if("object"==typeof g&&a.util.schemaHasRules(g,a.RULES.all)){n.schema=g,n.schemaPath=a.schemaPath+".additionalItems",n.errSchemaPath=a.errSchemaPath+"/additionalItems",t+=" valid"+n.level+" = true; if ("+c+".length > "+i.length+") {  for (var i"+l+" = "+i.length+"; i"+l+" < "+c+".length; i"+l+"++) { ",n.errorPath=a.util.getPathExpr(a.errorPath,"i"+l,a.opts.jsonPointers,!0);var A=c+"[i"+l+"]";n.dataPathArr[P]="i"+l;var j=a.validate(n);n.baseId=p,t+=a.util.varOccurences(j,f)<2?" "+a.util.varReplace(j,f,A)+" ":" var "+f+" = "+A+"; "+j+" ",o&&(t+=" if (!valid"+n.level+") break; "),t+=" } }  ",o&&(t+=" if (valid"+n.level+") { ",u+="}")}}else if(a.util.schemaHasRules(i,a.RULES.all)){n.schema=i,n.schemaPath=h,n.errSchemaPath=v,t+="  for (var i"+l+" = 0; i"+l+" < "+c+".length; i"+l+"++) { ",n.errorPath=a.util.getPathExpr(a.errorPath,"i"+l,a.opts.jsonPointers,!0);var A=c+"[i"+l+"]";n.dataPathArr[P]="i"+l;var j=a.validate(n);n.baseId=p,t+=a.util.varOccurences(j,f)<2?" "+a.util.varReplace(j,f,A)+" ":" var "+f+" = "+A+"; "+j+" ",o&&(t+=" if (!valid"+n.level+") break; "),t+=" }  ",o&&(t+=" if (valid"+n.level+") { ",u+="}")}return o&&(t+=" "+u+" if ("+m+" == errors) {"),t=a.util.cleanUpCode(t)};