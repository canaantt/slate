"use strict";module.exports=function(e,a){var r,s=" ",t=e.level,l=e.dataLevel,o=e.schema[a],h=e.schemaPath+"."+a,i=e.errSchemaPath+"/"+a,v=!e.opts.allErrors,c="data"+(l||""),d="valid"+t,n="errs__"+t,m=e.util.copy(e),p="";m.level++;var u,f="ifPassed"+e.level,P=m.baseId;s+="var "+f+";";var E=o;if(E)for(var w,y=-1,R=E.length-1;R>y;){if(w=E[y+=1],y&&!u&&(s+=" if (!"+f+") { ",p+="}"),w["if"]&&e.util.schemaHasRules(w["if"],e.RULES.all)){s+=" var "+n+" = errors;   ";var b=e.compositeRule;if(e.compositeRule=m.compositeRule=!0,m.createErrors=!1,m.schema=w["if"],m.schemaPath=h+"["+y+"].if",m.errSchemaPath=i+"/"+y+"/if",s+="  "+e.validate(m)+" ",m.baseId=P,m.createErrors=!0,e.compositeRule=m.compositeRule=b,s+=" "+f+" = valid"+m.level+"; if ("+f+") {  ","boolean"==typeof w.then){if(w.then===!1){var S=S||[];S.push(s),s="",e.createErrors!==!1?(s+=" { keyword: '"+(r||"switch")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+i+'" , params: { caseIndex: '+y+" } ",e.opts.messages!==!1&&(s+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),s+=" } "):s+=" {} ";var g=s;s=S.pop(),s+=!e.compositeRule&&v?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}s+=" var valid"+m.level+" = "+w.then+"; "}else m.schema=w.then,m.schemaPath=h+"["+y+"].then",m.errSchemaPath=i+"/"+y+"/then",s+="  "+e.validate(m)+" ",m.baseId=P;s+="  } else {  errors = "+n+"; if (vErrors !== null) { if ("+n+") vErrors.length = "+n+"; else vErrors = null; } } "}else if(s+=" "+f+" = true;  ","boolean"==typeof w.then){if(w.then===!1){var S=S||[];S.push(s),s="",e.createErrors!==!1?(s+=" { keyword: '"+(r||"switch")+"' , dataPath: (dataPath || '') + "+e.errorPath+' , schemaPath: "'+i+'" , params: { caseIndex: '+y+" } ",e.opts.messages!==!1&&(s+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),s+=" } "):s+=" {} ";var g=s;s=S.pop(),s+=!e.compositeRule&&v?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}s+=" var valid"+m.level+" = "+w.then+"; "}else m.schema=w.then,m.schemaPath=h+"["+y+"].then",m.errSchemaPath=i+"/"+y+"/then",s+="  "+e.validate(m)+" ",m.baseId=P;u=w["continue"]}return s+=""+p+"var "+d+" = valid"+m.level+"; ",s=e.util.cleanUpCode(s)};