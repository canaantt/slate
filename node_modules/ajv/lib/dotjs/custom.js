"use strict";module.exports=function(r,a){var e,s,t=" ",o=r.level,l=r.dataLevel,i=r.schema[a],h=r.schemaPath+"."+a,d=r.errSchemaPath+"/"+a,v=!r.opts.allErrors,c="data"+(l||""),m="errs__"+o,n=r.opts.v5&&i.$data;n?(t+=" var schema"+o+" = "+r.util.getData(i.$data,l,r.dataPathArr)+"; ",s="schema"+o):s=i;var p,u,P,f,y,E=this,w="definition"+o,k=E.definition;k.validate;if(n&&k.$data){y="keywordValidate"+o;var R=k.validateSchema;t+=" var "+w+" = RULES.custom['"+a+"'].definition; var "+y+" = "+w+".validate;"}else f=r.useCustomRule(E,i,r.schema,r),s="validate.schema"+h,y=f.code,p=k.compile,u=k.inline,P=k.macro;var g=y+".errors",A="i"+o,S="ruleErr"+o,b=k.async;if(b&&!r.async)throw new Error("async keyword in sync schema");if(u||P||(t+=""+g+" = null;"),t+="var "+m+" = errors;var valid"+o+";",u&&k.statements)t+=" "+f.validate;else if(P){var V=r.util.copy(r);V.level++,V.schema=f.validate,V.schemaPath="";var D=r.compositeRule;r.compositeRule=V.compositeRule=!0;var $=r.validate(V).replace(/validate\.schema/g,y);r.compositeRule=V.compositeRule=D,t+=" "+$}else if(!u){var x=x||[];x.push(t),t="",t+="  "+y+".call( ",t+=r.opts.passContext?"this":"self",t+=p||k.schema===!1?" , "+c+" ":" , "+s+" , "+c+" , validate.schema"+r.schemaPath+" ",t+=" , (dataPath || '')",'""'!=r.errorPath&&(t+=" + "+r.errorPath),t+=l?" , data"+(l-1||"")+" , "+r.dataPathArr[l]+" ":" , parentData , parentDataProperty ",t+=" )  ";var C=t;t=x.pop(),k.errors!==!1&&(b?(g="customErrors"+o,t+=" var "+g+" = null; try { valid"+o+" = "+r.yieldAwait+C+"; } catch (e) { valid"+o+" = false; if (e instanceof ValidationError) "+g+" = e.errors; else throw e; } "):t+=" "+y+".errors = null; ")}t+="if (",R&&(t+=" !"+w+".validateSchema("+s+") || "),t+=" ! ",t+=u?k.statements?" valid"+o+" ":" ("+f.validate+") ":P?" valid"+V.level+" ":b?k.errors===!1?" ("+r.yieldAwait+C+") ":" valid"+o+" ":" "+C+" ",t+=") { ",e=E.keyword;var x=x||[];x.push(t),t="";var x=x||[];x.push(t),t="",r.createErrors!==!1?(t+=" { keyword: '"+(e||"custom")+"' , dataPath: (dataPath || '') + "+r.errorPath+' , schemaPath: "'+d+"\" , params: { keyword: '"+E.keyword+"' } ",r.opts.messages!==!1&&(t+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var L=t;t=x.pop(),t+=!r.compositeRule&&v?r.async?" throw new ValidationError(["+L+"]); ":" validate.errors = ["+L+"]; return false; ":" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var _=t;return t=x.pop(),u?k.errors?"full"!=k.errors&&(t+="  for (var "+A+"="+m+"; "+A+"<errors; "+A+"++) { var "+S+" = vErrors["+A+"]; if ("+S+".dataPath === undefined) { "+S+".dataPath = (dataPath || '') + "+r.errorPath+"; } if ("+S+".schemaPath === undefined) { "+S+'.schemaPath = "'+d+'"; } ',r.opts.verbose&&(t+=" "+S+".schema = "+s+"; "+S+".data = "+c+"; "),t+=" } "):k.errors===!1?t+=" "+_+" ":(t+=" if ("+m+" == errors) { "+_+" } else {  for (var "+A+"="+m+"; "+A+"<errors; "+A+"++) { var "+S+" = vErrors["+A+"]; if ("+S+".dataPath === undefined) { "+S+".dataPath = (dataPath || '') + "+r.errorPath+"; } if ("+S+".schemaPath === undefined) { "+S+'.schemaPath = "'+d+'"; } ',r.opts.verbose&&(t+=" "+S+".schema = "+s+"; "+S+".data = "+c+"; "),t+=" } } "):P?(t+="   var err =   ",r.createErrors!==!1?(t+=" { keyword: '"+(e||"custom")+"' , dataPath: (dataPath || '') + "+r.errorPath+' , schemaPath: "'+d+"\" , params: { keyword: '"+E.keyword+"' } ",r.opts.messages!==!1&&(t+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&v&&(t+=r.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false ")):k.errors===!1?t+=" "+_+" ":(t+=" if (Array.isArray("+g+")) { if (vErrors === null) vErrors = "+g+"; else vErrors = vErrors.concat("+g+"); errors = vErrors.length;  for (var "+A+"="+m+"; "+A+"<errors; "+A+"++) { var "+S+" = vErrors["+A+"];  "+S+".dataPath = (dataPath || '') + "+r.errorPath+";   "+S+'.schemaPath = "'+d+'";  ',r.opts.verbose&&(t+=" "+S+".schema = "+s+"; "+S+".data = "+c+"; "),t+=" } } else { "+_+" } "),t+=" } ",v&&(t+=" else { "),t};