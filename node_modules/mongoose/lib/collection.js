/*!
 * Module dependencies.
 */
function Collection(e,t,o){void 0===o&&(o={}),void 0===o.capped&&(o.capped={}),o.bufferCommands=void 0===o.bufferCommands?!0:o.bufferCommands,"number"==typeof o.capped&&(o.capped={size:o.capped}),this.opts=o,this.name=e,this.collectionName=e,this.conn=t,this.queue=[],this.buffer=this.opts.bufferCommands,this.emitter=new EventEmitter,STATES.connected===this.conn.readyState&&this.onOpen()}var EventEmitter=require("events").EventEmitter,STATES=require("./connectionstate");Collection.prototype.name,Collection.prototype.collectionName,Collection.prototype.conn,Collection.prototype.onOpen=function(){this.buffer=!1,this.doQueue()},Collection.prototype.onClose=function(){this.opts.bufferCommands&&(this.buffer=!0)},Collection.prototype.addQueue=function(e,t){return this.queue.push([e,t]),this},Collection.prototype.doQueue=function(){for(var e=0,t=this.queue.length;t>e;e++)this[this.queue[e][0]].apply(this,this.queue[e][1]);this.queue=[];var o=this;return process.nextTick(function(){o.emitter.emit("queue")}),this},Collection.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")},Collection.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")},Collection.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")},Collection.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")},Collection.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")},Collection.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")},Collection.prototype.update=function(){throw new Error("Collection#update unimplemented by driver")},Collection.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")},Collection.prototype.mapReduce=function(){throw new Error("Collection#mapReduce unimplemented by driver")},/*!
 * Module exports.
 */
module.exports=Collection;