/*!
 * Module requirements.
 */
function SchemaNumber(e,r){SchemaType.call(this,e,r,"Number")}/*!
 * ignore
 */
function handleSingle(e){return this.cast(e)}function handleArray(e){var r=this;return Array.isArray(e)?e.map(function(e){return r.cast(e)}):[this.cast(e)]}var SchemaType=require("../schematype"),CastError=SchemaType.CastError,handleBitwiseOperator=require("./operators/bitwise"),MongooseError=require("../error"),utils=require("../utils"),Document;SchemaNumber.schemaName="Number",/*!
 * Inherits from SchemaType.
 */
SchemaNumber.prototype=Object.create(SchemaType.prototype),SchemaNumber.prototype.constructor=SchemaNumber,SchemaNumber.prototype.checkRequired=function(e,r){return SchemaType._isRef(this,e,r,!0)?!!e:"number"==typeof e||e instanceof Number},SchemaNumber.prototype.min=function(e,r){if(this.minValidator&&(this.validators=this.validators.filter(function(e){return e.validator!==this.minValidator},this)),null!==e&&void 0!==e){var t=r||MongooseError.messages.Number.min;t=t.replace(/{MIN}/,e),this.validators.push({validator:this.minValidator=function(r){return null==r||r>=e},message:t,type:"min",min:e})}return this},SchemaNumber.prototype.max=function(e,r){if(this.maxValidator&&(this.validators=this.validators.filter(function(e){return e.validator!==this.maxValidator},this)),null!==e&&void 0!==e){var t=r||MongooseError.messages.Number.max;t=t.replace(/{MAX}/,e),this.validators.push({validator:this.maxValidator=function(r){return null==r||e>=r},message:t,type:"max",max:e})}return this},SchemaNumber.prototype.cast=function(e,r,t){if(SchemaType._isRef(this,e,r,t)){if(null===e||void 0===e)return e;if(Document||(Document=require("./../document")),e instanceof Document)return e.$__.wasPopulated=!0,e;if("number"==typeof e)return e;if(Buffer.isBuffer(e)||!utils.isObject(e))throw new CastError("number",e,this.path);var i=r.$__fullPath(this.path),a=r.ownerDocument?r.ownerDocument():r,n=a.populated(i,!0),o=new n.options.model(e);return o.$__.wasPopulated=!0,o}var s=e&&e._id?e._id:e;if(!isNaN(s)){if(null===s)return s;if(""===s)return null;if(("string"==typeof s||"boolean"==typeof s)&&(s=Number(s)),s instanceof Number)return s;if("number"==typeof s)return s;if(s.toString&&!Array.isArray(s)&&s.toString()==Number(s))return new Number(s)}throw new CastError("number",e,this.path)},SchemaNumber.prototype.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$bitsAllClear:handleBitwiseOperator,$bitsAnyClear:handleBitwiseOperator,$bitsAllSet:handleBitwiseOperator,$bitsAnySet:handleBitwiseOperator,$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle,$mod:handleArray}),SchemaNumber.prototype.castForQuery=function(e,r){var t;if(2===arguments.length){if(t=this.$conditionalHandlers[e],!t)throw new Error("Can't use "+e+" with Number.");return t.call(this,r)}return r=this.cast(e)},/*!
 * Module exports.
 */
module.exports=SchemaNumber;