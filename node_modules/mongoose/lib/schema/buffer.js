/*!
 * Module dependencies.
 */
function SchemaBuffer(e,r){SchemaType.call(this,e,r,"Buffer")}/*!
 * ignore
 */
function handleSingle(e){return this.castForQuery(e)}var handleBitwiseOperator=require("./operators/bitwise"),utils=require("../utils"),MongooseBuffer=require("../types").Buffer,SchemaType=require("../schematype"),Binary=MongooseBuffer.Binary,CastError=SchemaType.CastError,Document;SchemaBuffer.schemaName="Buffer",/*!
 * Inherits from SchemaType.
 */
SchemaBuffer.prototype=Object.create(SchemaType.prototype),SchemaBuffer.prototype.constructor=SchemaBuffer,SchemaBuffer.prototype.checkRequired=function(e,r){return SchemaType._isRef(this,e,r,!0)?!!e:!(!e||!e.length)},SchemaBuffer.prototype.cast=function(e,r,t){var o;if(SchemaType._isRef(this,e,r,t)){if(null===e||void 0===e)return e;if(Document||(Document=require("./../document")),e instanceof Document)return e.$__.wasPopulated=!0,e;if(Buffer.isBuffer(e))return e;if(!utils.isObject(e))throw new CastError("buffer",e,this.path);var n=r.$__fullPath(this.path),i=r.ownerDocument?r.ownerDocument():r,a=i.populated(n,!0);return o=new a.options.model(e),o.$__.wasPopulated=!0,o}if(e&&e._id&&(e=e._id),e&&e.isMongooseBuffer)return e;if(Buffer.isBuffer(e))return e&&e.isMongooseBuffer||(e=new MongooseBuffer(e,[this.path,r])),e;if(e instanceof Binary){if(o=new MongooseBuffer(e.value(!0),[this.path,r]),"number"!=typeof e.sub_type)throw new CastError("buffer",e,this.path);return o._subtype=e.sub_type,o}if(null===e)return e;var u=typeof e;if("string"===u||"number"===u||Array.isArray(e))return"number"===u&&(e=[e]),o=new MongooseBuffer(e,[this.path,r]);throw new CastError("buffer",e,this.path)},SchemaBuffer.prototype.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$bitsAllClear:handleBitwiseOperator,$bitsAnyClear:handleBitwiseOperator,$bitsAllSet:handleBitwiseOperator,$bitsAnySet:handleBitwiseOperator,$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle}),SchemaBuffer.prototype.castForQuery=function(e,r){var t;if(2===arguments.length){if(t=this.$conditionalHandlers[e],!t)throw new Error("Can't use "+e+" with Buffer.");return t.call(this,r)}return r=e,this.cast(r).toObject()},/*!
 * Module exports.
 */
module.exports=SchemaBuffer;