<h1 id="4-5-7-2016-07-25">4.5.7 / 2016-07-25</h1>

<ul>
<li>fix(document): ensure no unhandled rejections if callback specified for save #4364</li>
</ul>

<h1 id="4-5-6-2016-07-23">4.5.6 / 2016-07-23</h1>

<ul>
<li>fix(schema): don&rsquo;t overwrite createdAt if it isn&rsquo;t selected #4351 <a href="https://github.com/tusbar">tusbar</a></li>
<li>docs(api): fix link to populate() and add a new one from depopulate() #4345 <a href="https://github.com/Delapouite">Delapouite</a></li>
<li>fix(types): ownerDocument() works properly with single nested docs #4344 <a href="https://github.com/vichle">vichle</a></li>
<li>fix(populate): dont use findOne when justOne option set #4329</li>
<li>fix(document): dont trigger .then() deprecated warning when calling doc.remove() #4291</li>
<li>docs(connection): add promiseLibrary option #4280</li>
<li>fix(plugins): apply global plugins to subschemas #4271</li>
<li>fix(model): ensure <code class="prettyprint">ensureIndex()</code> never calls back in the same tick #4246</li>
<li>docs(schema): improve post hook docs on schema #4238</li>
</ul>

<h1 id="4-5-5-2016-07-18">4.5.5 / 2016-07-18</h1>

<ul>
<li>fix(document): handle setting root to empty obj if minimize false #4337</li>
<li>fix: downgrade to mongodb 2.1.18 #4335 #4334 #4328 #4323</li>
<li>perf(types): remove defineProperty usage in documentarray #4333</li>
<li>fix(query): correctly pass model in .toConstructor() #4318</li>
<li>fix(services): avoid double-validating mixed types with update validators #4305</li>
<li>docs(middleware): add docs describing error handling middleware #4229</li>
<li>fix(types): throw correct error when invalidating doc array #3602</li>
</ul>

<h1 id="4-5-4-2016-07-11">4.5.4 / 2016-07-11</h1>

<ul>
<li>fix(types): fix removing embedded documents #4309 <a href="https://github.com/RoCat">RoCat</a></li>
<li>docs: various docs improvements #4302 #4294 <a href="https://github.com/simonxca">simonxca</a></li>
<li>fix: upgrade mongodb -&gt; 2.1.21 #4295 #4202 <a href="https://github.com/RoCat">RoCat</a></li>
<li>fix(populate): convert single result to array for virtual populate because of lean #4288</li>
<li>fix(populate): handle empty results for populate virtuals properly #4285 #4284</li>
<li>fix(query): dont cast $inc to number if type is long #4283</li>
<li>fix(types): allow setting single nested doc to null #4281</li>
<li>fix(populate): handle deeply nested virtual populate #4278</li>
<li>fix(document): allow setting empty obj if strict mode is false #4274</li>
<li>fix(aggregate): allow passing obj to .unwind() #4239</li>
<li>docs(document): add return statements to transform examples #1963</li>
</ul>

<h1 id="4-5-3-2016-06-30">4.5.3 / 2016-06-30</h1>

<ul>
<li>fix(query): pass correct options to QueryCursor #4277 #4266</li>
<li>fix(querycursor): handle lean option correctly #4276 <a href="https://github.com/gchudnov">gchudnov</a></li>
<li>fix(document): fix error handling when no error occurred #4275</li>
<li>fix(error): use strict mode for version error #4272</li>
<li>docs(populate): fix crashing compilation for populate.jade #4267</li>
<li>fix(populate): support <code class="prettyprint">justOne</code> option for populate virtuals #4263</li>
<li>fix(populate): ensure model param gets used for populate virtuals #4261 #4243</li>
<li>fix(querycursor): add ability to properly close the cursor #4258</li>
<li>docs(model): correct link to Document #4250</li>
<li>docs(populate): correct path for refPath populate #4240</li>
<li>fix(document): support validator.isEmail as validator #4064</li>
</ul>

<h1 id="4-5-2-2016-06-24">4.5.2 / 2016-06-24</h1>

<ul>
<li>fix(connection): add checks for collection presence for <code class="prettyprint">onOpen</code> and <code class="prettyprint">onClose</code> #4259 <a href="https://github.com/nodkz">nodkz</a></li>
<li>fix(cast): allow strings for $type operator #4256</li>
<li>fix(querycursor): support lean() #4255 <a href="https://github.com/pyramation">pyramation</a></li>
<li>fix(aggregate): allow setting noCursorTimeout option #4241</li>
<li>fix(document): handle undefined for Array.pull #4222 <a href="https://github.com/Sebmaster">Sebmaster</a></li>
<li>fix(connection): ensure promise.catch() catches initial connection error #4135</li>
<li>fix(document): show additional context for VersionError #2633</li>
</ul>

<h1 id="4-5-1-2016-06-18">4.5.1 / 2016-06-18</h1>

<ul>
<li>fix(model): ensure wrapped insertMany() returns a promise #4237</li>
<li>fix(populate): dont overwrite populateVirtuals when populating multiple paths #4234</li>
<li>docs(model): clarify relationship between create() and save() #4233</li>
<li>fix(types): handle option param in subdoc remove() #4231 <a href="https://github.com/tdebarochez">tdebarochez</a></li>
<li>fix(document): dedupe modified paths #4226 #4223 <a href="https://github.com/adambuczynski">adambuczynski</a></li>
<li>fix(model): don&rsquo;t modify user-provided options object #4221</li>
<li>fix(document): handle setting nested path to empty object #4218 #4182</li>
<li>fix(document): clean subpaths when removing single nested #4216</li>
<li>fix(document): don&rsquo;t force transform on subdocs with inspect #4213</li>
<li>fix(error): allow setting .messages object #4207</li>
</ul>

<h1 id="4-5-0-2016-06-13">4.5.0 / 2016-06-13</h1>

<ul>
<li>feat(query): added Query.prototype.catch() #4215 #4173 <a href="https://github.com/adambuczynski">adambuczynski</a></li>
<li>feat(query): add Query.prototype.cursor() as a .stream() alternative #4117 #3637 #1907</li>
<li>feat(document): add markUnmodified() function #4092 <a href="https://github.com/vincentcr">vincentcr</a></li>
<li>feat(aggregate): convert aggregate object to a thenable #3995 #3946 <a href="https://github.com/megagon">megagon</a></li>
<li>perf(types): remove defineProperties call for array (<strong>Note:</strong> Because of this, a mongoose array will no longer <code class="prettyprint">assert.deepEqual()</code> a plain old JS array) #3886</li>
<li>feat(model): add hooks for insertMany() #3846</li>
<li>feat(schema): add support for custom query methods #3740 #2372</li>
<li>feat(drivers): emit error on &lsquo;serverClosed&rsquo; because that means that reconnect failed #3615</li>
<li>feat(model): emit error event when callback throws exception #3499</li>
<li>feat(model): inherit options from discriminator base schema #3414 #1818</li>
<li>feat(populate): expose mongoose-populate-virtuals inspired populate API #2562</li>
<li>feat(document): trigger remove hooks on subdocs when removing parent #2348</li>
<li>feat(schema): add support for express-style error handling middleware #2284</li>
<li>fix(model): disallow setting discriminator key #2041</li>
<li>feat(schema): add support for nested arrays #1361</li>
</ul>

<h1 id="4-4-20-2016-06-05">4.4.20 / 2016-06-05</h1>

<ul>
<li>docs: clarify command buffering when using driver directly #4195</li>
<li>fix(promise): correct broken mpromise .catch() #4189</li>
<li>fix(document): clean modified subpaths when set path to empty obj #4182</li>
<li>fix(query): support minDistance with query casting and <code class="prettyprint">.near()</code> #4179</li>
<li>fix(model): remove unnecessary .save() promise #4177</li>
<li>fix(schema): cast all valid ObjectId strings to object ids #3365</li>
<li>docs: remove unclear &ldquo;unsafe&rdquo; term in query docs #3282</li>
</ul>

<h1 id="4-4-19-2016-05-21">4.4.19 / 2016-05-21</h1>

<ul>
<li>fix(model): handle insertMany if timestamps not set #4171</li>
</ul>

<h1 id="4-4-18-2016-05-21">4.4.18 / 2016-05-21</h1>

<ul>
<li>docs: add missing period #4170 <a href="https://github.com/gitname">gitname</a></li>
<li>docs: change build badge to svg #4158 <a href="https://github.com/a0viedo">a0viedo</a></li>
<li>fix(model): update timestamps when setting <code class="prettyprint">createdAt</code> #4155</li>
<li>fix(utils): make sure to require in document properly #4152</li>
<li>fix(model): throw overwrite error when discriminator name conflicts #4148</li>
</ul>

<h1 id="4-4-17-2016-05-13">4.4.17 / 2016-05-13</h1>

<ul>
<li>docs: remove repetition in QueryStream docs #4147 <a href="https://github.com/hugoabonizio">hugoabonizio</a></li>
<li>fix(document): dont double-validate doc array elements #4145</li>
<li>fix(document): call required function with correct scope #4142 <a href="https://github.com/JedWatson">JedWatson</a></li>
</ul>

<h1 id="4-4-16-2016-05-09">4.4.16 / 2016-05-09</h1>

<ul>
<li>refactor(document): use function reference #4133 <a href="https://github.com/dciccale">dciccale</a></li>
<li>docs(querystream): clarify <code class="prettyprint">destroy()</code> and close event #4126 <a href="https://github.com/AnthonyCC">AnthonyCC</a></li>
<li>test: make before hook fail fast if it can&rsquo;t connect #4121</li>
<li>docs: add description of CastError constructor params #4120</li>
<li>fix(schematype): ensure single embedded defaults have $parent #4115</li>
<li>fix(document): mark nested paths for validation #4111</li>
<li>fix(schema): make sure element is always a subdoc in doc array validation #3816</li>
</ul>

<h1 id="4-4-15-2016-05-06">4.4.15 / 2016-05-06</h1>

<ul>
<li>fix(schema): support overwriting array default #4109</li>
<li>fix(populate): assign values when resolving each populate #4104</li>
<li>fix(aggregate): dont send async option to server #4101</li>
<li>fix(model): ensure isNew set to false after insertMany #4099</li>
<li>fix(connection): emit on error if listeners and no callback #4098</li>
<li>fix(document): treat required fn that returns false as required: false #4094</li>
</ul>

<h1 id="4-4-14-2016-04-27">4.4.14 / 2016-04-27</h1>

<ul>
<li>fix: upgrade mongodb -&gt; 2.1.18 #4102</li>
<li>feat(connection): allow setting mongos as a uri query param #4093 #4035 <a href="https://github.com/burtonjc">burtonjc</a></li>
<li>fix(populate): make sure to use correct assignment order for each model #4073</li>
<li>fix(schema): add complete set of geospatial operators for single embedded subdocs #4014</li>
</ul>

<h1 id="3-8-40-2016-04-24">3.8.40 / 2016-04-24</h1>

<ul>
<li>upgraded; mquery -&gt; 1.10.0 #3989</li>
</ul>

<h1 id="4-4-13-2016-04-21">4.4.13 / 2016-04-21</h1>

<ul>
<li>docs: add docs favicons #4082 <a href="https://github.com/robertjustjones">robertjustjones</a></li>
<li>docs(model): correct Model.remove() return value #4075 <a href="https://github.com/Jokero">Jokero</a></li>
<li>fix(query): add $geoWithin query casting for single embedded docs #4044</li>
<li>fix(schema): handle setting trim option to falsy #4042</li>
<li>fix(query): handle setDefaultsOnInsert with empty update #3835</li>
</ul>

<h1 id="4-4-12-2016-04-08">4.4.12 / 2016-04-08</h1>

<ul>
<li>docs(query): document context option for update and findOneAndUpdate #4055</li>
<li>docs(query): correct link to $geoWithin docs #4050</li>
<li>fix(project): upgrade to mongodb driver 2.1.16 #4048 <a href="https://github.com/schmalliso">schmalliso</a></li>
<li>docs(validation): fix validation docs #4028</li>
<li>fix(types): improve .id() check for document arrays #4011</li>
<li>fix(query): remove premature return when using $rename #3171</li>
<li>docs(connection): clarify relationship between models and connections #2157</li>
</ul>

<h1 id="4-4-11-2016-04-03">4.4.11 / 2016-04-03</h1>

<ul>
<li>fix: upgrade to mongodb driver 2.1.14 #4036 #4030 #3945</li>
<li>fix(connection): allow connecting with { mongos: true } to handle query params #4032 <a href="https://github.com/burtonjc">burtonjc</a></li>
<li>docs(connection): add autoIndex example #4026 <a href="https://github.com/tilleps">tilleps</a></li>
<li>fix(query): handle passRawResult option when zero results #4023</li>
<li>fix(populate): clone options before modifying #4022</li>
<li>docs: add missing whitespace #4019 <a href="https://github.com/chenxsan">chenxsan</a></li>
<li>chore: upgrade to ESLint 2.4.0 #4015 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fix(types): single nested subdocs get ids by default #4008</li>
<li>chore(project): add dependency status badge #4007 <a href="http://github.com/Maheshkumar-Kakade">Maheshkumar-Kakade</a></li>
<li>fix: make sure timestamps don&rsquo;t trigger unnecessary updates #4005 #3991 <a href="https://github.com/tommarien">tommarien</a></li>
<li>fix(document): inspect inherits schema options #4001</li>
<li>fix(populate): don&rsquo;t mark populated path as modified if setting to object w/ same id #3992</li>
<li>fix(document): support kind argument to invalidate #3965</li>
</ul>

<h1 id="4-4-10-2016-03-24">4.4.10 / 2016-03-24</h1>

<ul>
<li>fix(document): copy isNew when copying a document #3982</li>
<li>fix(document): don&rsquo;t override defaults with undefined keys #3981</li>
<li>fix(populate): merge multiple deep populate options for the same path #3974</li>
</ul>

<h1 id="4-4-9-2016-03-22">4.4.9 / 2016-03-22</h1>

<ul>
<li>fix: upgrade mongodb -&gt; 2.1.10 re https://jira.mongodb.org/browse/NODE-679 #4010</li>
<li>docs: add syntax highlighting for acquit examples #3975</li>
</ul>

<h1 id="4-4-8-2016-03-18">4.4.8 / 2016-03-18</h1>

<ul>
<li>docs(aggregate): clarify promises #3990 <a href="https://github.com/megagon">megagon</a></li>
<li>fix: upgrade mquery -&gt; 1.10 #3988 <a href="https://github.com/matskiv">matskiv</a></li>
<li>feat(connection): &#39;all&rsquo; event for repl sets #3986 <a href="https://github.com/xizhibei">xizhibei</a></li>
<li>docs(types): clarify Array.pull #3985 <a href="https://github.com/seriousManual">seriousManual</a></li>
<li>feat(query): support array syntax for .sort() via mquery 1.9 #3980</li>
<li>fix(populate): support &gt; 3 level nested populate #3973</li>
<li>fix: MongooseThenable exposes connection correctly #3972</li>
<li>docs(connection): add note about reconnectTries and reconnectInterval #3969</li>
<li>feat(document): invalidate returns the new validationError #3964</li>
<li>fix(query): .eq() as shorthand for .equals #3953 <a href="https://github.com/Fonger">Fonger</a></li>
<li>docs(connection): clarify connection string vs passed options #3941</li>
<li>docs(query): select option for findOneAndUpdate #3933</li>
<li>fix(error): ValidationError.properties no longer enumerable #3925</li>
<li>docs(validation): clarify how required validators work with nested schemas #3915</li>
<li>fix: upgrade mongodb driver -&gt; 2.1.8 to make partial index errors more sane #3864</li>
</ul>

<h1 id="4-4-7-2016-03-11">4.4.7 / 2016-03-11</h1>

<ul>
<li>fix(query): stop infinite recursion caused by merging a mongoose buffer #3961</li>
<li>fix(populate): handle deep populate array -&gt; array #3954</li>
<li>fix(schema): allow setting timestamps with .set() #3952 #3951 #3907 <a href="https://github.com/Fonger">Fonger</a></li>
<li>fix: MongooseThenable doesn&rsquo;t overwrite constructors #3940</li>
<li>fix(schema): don&rsquo;t cast boolean to date #3935</li>
<li>fix(drivers): support sslValidate in connection string #3929</li>
<li>fix(types): correct markModified() for single nested subdocs #3910</li>
<li>fix(drivers): catch and report any errors that occur in driver methods #3906</li>
<li>fix(populate): get subpopulate model correctly when array under nested #3904</li>
<li>fix(document): allow fields named &#39;pre&rsquo; and &#39;post&rsquo; #3902</li>
<li>docs(query): clarify runValidators and setDefaultsOnInsert options #3892</li>
<li>docs(validation): show how to use custom required messages in schema #2616</li>
</ul>

<h1 id="4-4-6-2016-03-02">4.4.6 / 2016-03-02</h1>

<ul>
<li>fix: upgrade mongodb driver to 2.1.7 #3938</li>
<li>docs: fix plugins link #3917 #3909 <a href="https://github.com/fbertone">fbertone</a></li>
<li>fix(query): sort+select with count works #3914</li>
<li>fix(query): improve mergeUpdate&rsquo;s ability to handle nested docs #3890</li>
</ul>

<h1 id="4-4-5-2016-02-24">4.4.5 / 2016-02-24</h1>

<ul>
<li>fix(query): ability to select a length field (upgrade to mquery 1.7.0) #3903</li>
<li>fix: include nested CastError as reason for array CastError #3897 <a href="https://github.com/kotarou3">kotarou3</a></li>
<li>fix(schema): check for doc existence before taking fields #3889</li>
<li>feat(schema): useNestedStrict option to take nested strict mode for update #3883</li>
<li>docs(validation): clarify relationship between required and checkRequired #3822</li>
<li>docs(populate): dynamic reference docs #3809</li>
<li>docs: expand dropdown when clicking on file name #3807</li>
<li>docs: plugins.mongoosejs.io is up #3127</li>
<li>fix(schema): ability to add a virtual with same name as removed path #2398</li>
</ul>

<h1 id="4-4-4-2016-02-17">4.4.4 / 2016-02-17</h1>

<ul>
<li>fix(schema): handle field selection when casting single nested subdocs #3880</li>
<li>fix(populate): populating using base model with multiple child models in result #3878</li>
<li>fix: ability to properly use return value of <code class="prettyprint">mongoose.connect()</code> #3874</li>
<li>fix(populate): dont hydrate populated subdoc if lean option set #3873</li>
<li>fix(connection): dont re-auth if already connected with useDb #3871</li>
<li>docs: cover how to set underlying driver&rsquo;s promise lib #3869</li>
<li>fix(document): handle conflicting names in validation errors with subdocs #3867</li>
<li>fix(populate): set undefined instead of null consistently when populate couldn&rsquo;t find results #3859</li>
<li>docs: link to <code class="prettyprint">execPopulate()</code> in <code class="prettyprint">doc.populate()</code> docs #3836</li>
<li>docs(plugin): link to the <code class="prettyprint">mongoose.plugin()</code> function #3732</li>
</ul>

<h1 id="4-4-3-2016-02-09">4.4.3 / 2016-02-09</h1>

<ul>
<li>fix: upgrade to mongodb 2.1.6 to remove kerberos log output #3861 #3860 <a href="https://github.com/cartuchogl">cartuchogl</a></li>
<li>fix: require(&#39;mongoose&rsquo;) is no longer a pseudo-promise #3856</li>
<li>fix(query): update casting for single nested docs #3820</li>
<li>fix(populate): deep populating multiple paths with same options #3808</li>
<li>docs(middleware): clarify save/validate hook order #1149</li>
</ul>

<h1 id="4-4-2-2016-02-05">4.4.2 / 2016-02-05</h1>

<ul>
<li>fix(aggregate): handle calling .cursor() with no options #3855</li>
<li>fix: upgrade mongodb driver to 2.1.5 for GridFS memory leak fix #3854</li>
<li>docs: fix schematype.html conflict #3853 #3850 #3843</li>
<li>fix(model): bluebird unhandled rejection with ensureIndexes() on init #3837</li>
<li>docs: autoIndex option for createConnection #3805</li>
</ul>

<h1 id="4-4-1-2016-02-03">4.4.1 / 2016-02-03</h1>

<ul>
<li>fix: linting broke some cases where we use <code class="prettyprint">== null</code> as shorthand #3852</li>
<li>docs: fix up schematype.html conflict #3848 #3843 <a href="https://github.com/mynameiscoffey">mynameiscoffey</a></li>
<li>fix: backwards breaking change with <code class="prettyprint">.connect()</code> return value #3847</li>
<li>docs: downgrade dox and highlight.js to fix docs build #3845</li>
<li>docs: clean up typo #3842 <a href="https://github.com/Flash-">Flash-</a></li>
<li>fix(document): storeShard handles undefined values #3841</li>
<li>chore: more linting #3838 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>fix(schema): handle <code class="prettyprint">text: true</code> as a way to declare a text index #3824</li>
</ul>

<h1 id="4-4-0-2016-02-02">4.4.0 / 2016-02-02</h1>

<ul>
<li>docs: fix expireAfterSeconds index option name #3831 <a href="https://github.com/Flash-">Flash-</a></li>
<li>chore: run lint after test #3829 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>chore: use power-assert instead of assert #3828 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>chore: stricter lint #3827 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>feat(types): casting moment to date #3813 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>chore: comma-last lint for test folder #3810 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fix: upgrade async mpath, mpromise, muri, and sliced #3801 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>fix(query): geo queries now return proper ES2015 promises #3800 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>perf(types): use <code class="prettyprint">Object.defineProperties()</code> for array #3799 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>fix(model): mapReduce, ensureIndexes, remove, and save properly return ES2015 promises #3795 #3628 #3595 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>docs: fixed dates in History.md #3791 <a href="https://github.com/Jokero">Jokero</a></li>
<li>feat: connect, open, openSet, and disconnect return ES2015 promises #3790 #3622 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>feat: custom type for int32 via mongoose-int32 npm package #3652 #3102</li>
<li>feat: basic custom schema type API #995</li>
<li>feat(model): <code class="prettyprint">insertMany()</code> for more performant bulk inserts #723</li>
</ul>

<h1 id="4-3-7-2016-01-23">4.3.7 / 2016-01-23</h1>

<ul>
<li>docs: grammar fix in timestamps docs #3786 <a href="https://github.com/zclancy">zclancy</a></li>
<li>fix(document): setting nested populated docs #3783 <a href="https://github.com/slamuu">slamuu</a></li>
<li>fix(document): don&rsquo;t call post save hooks twice for pushed docs #3780</li>
<li>fix(model): handle <code class="prettyprint">_id=0</code> correctly #3776</li>
<li>docs(middleware): async post hooks #3770</li>
<li>docs: remove confusing sentence #3765 <a href="https://github.com/marcusmellis89">marcusmellis89</a></li>
</ul>

<h1 id="3-8-39-2016-01-15">3.8.39 / 2016-01-15</h1>

<ul>
<li>fixed; casting a number to a buffer #3764</li>
<li>fixed; enumerating virtual property with nested objects #3743 <a href="https://github.com/kusold">kusold</a></li>
</ul>

<h1 id="4-3-6-2016-01-15">4.3.6 / 2016-01-15</h1>

<ul>
<li>fix(types): casting a number to a buffer #3764</li>
<li>fix: add &ldquo;listener&rdquo; to reserved keywords #3759</li>
<li>chore: upgrade uglify #3757 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fix: broken execPopulate() in 4.3.5 #3755 #3753</li>
<li>fix: ability to remove() a single embedded doc #3754</li>
<li>style: comma-last in test folder #3751 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>docs: clarify versionKey option #3747</li>
<li>fix: improve colorization for arrays #3744 <a href="https://github.com/TrejGun">TrejGun</a></li>
<li>fix: webpack build #3713</li>
</ul>

<h1 id="4-3-5-2016-01-09">4.3.5 / 2016-01-09</h1>

<ul>
<li>fix(query): throw when 4th parameter to update not a function #3741 <a href="https://github.com/kasselTrankos">kasselTrankos</a></li>
<li>fix(document): separate error type for setting an object to a primitive #3735</li>
<li>fix(populate): Model.populate returns ES6 promise #3734</li>
<li>fix(drivers): re-register event handlers after manual reconnect #3729</li>
<li>docs: broken links #3727</li>
<li>fix(validation): update validators run array validation #3724</li>
<li>docs: clarify the need to use markModified with in-place date ops #3722</li>
<li>fix(document): mark correct path as populated when manually populating array #3721</li>
<li>fix(aggregate): support for array pipeline argument to append #3718 <a href="https://github.com/dbkup">dbkup</a></li>
<li>docs: clarify <code class="prettyprint">.connect()</code> callback #3705</li>
<li>fix(schema): properly validate nested single nested docs #3702</li>
<li>fix(types): handle setting documentarray of wrong type #3701</li>
<li>docs: broken links #3700</li>
<li>fix(drivers): debug output properly displays &#39;0&rsquo; #3689</li>
</ul>

<h1 id="3-8-38-2016-01-07">3.8.38 / 2016-01-07</h1>

<ul>
<li>fixed; aggregate.append an array #3730 <a href="https://github.com/dbkup">dbkup</a></li>
</ul>

<h1 id="4-3-4-2015-12-23">4.3.4 / 2015-12-23</h1>

<ul>
<li>fix: upgrade mongodb driver to 2.1.2 for repl set error #3712 <a href="https://github.com/sansmischevia">sansmischevia</a></li>
<li>docs: validation docs typo #3709 <a href="https://github.com/ivanmaeder">ivanmaeder</a></li>
<li>style: remove unused variables #3708 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fix(schema): duck-typing for schemas #3703 <a href="https://github.com/mgcrea">mgcrea</a></li>
<li>docs: connection sample code issue #3697</li>
<li>fix(schema): duck-typing for schemas #3693 <a href="https://github.com/mgcrea">mgcrea</a></li>
<li>docs: clarify id schema option #3638</li>
</ul>

<h1 id="4-3-3-2015-12-18">4.3.3 / 2015-12-18</h1>

<ul>
<li>fix(connection): properly support &#39;replSet&rsquo; as well as &#39;replset&rsquo; #3688 <a href="https://github.com/taxilian">taxilian</a></li>
<li>fix(document): single nested doc pre hooks called before nested doc array #3687 <a href="https://github.com/aliatsis">aliatsis</a></li>
</ul>

<h1 id="4-3-2-2015-12-17">4.3.2 / 2015-12-17</h1>

<ul>
<li>fix(document): .set() into single nested schemas #3686</li>
<li>fix(connection): support &#39;replSet&rsquo; as well as &#39;replset&rsquo; option #3685</li>
<li>fix(document): bluebird unhandled rejection when validating doc arrays #3681</li>
<li>fix(document): hooks for doc arrays in single nested schemas #3680</li>
<li>fix(document): post hooks for single nested schemas #3679</li>
<li>fix: remove unused npm module #3674 <a href="https://github.com/sybarite">sybarite</a></li>
<li>fix(model): don&rsquo;t swallow exceptions in nested doc save callback #3671</li>
<li>docs: update keepAlive info #3667 <a href="https://github.com/ChrisZieba">ChrisZieba</a></li>
<li>fix(document): strict &#39;throw&rsquo; throws a specific mongoose error #3662</li>
<li>fix: flakey test #3332</li>
<li>fix(query): more robust check for RegExp #2969</li>
</ul>

<h1 id="4-3-1-2015-12-11">4.3.1 / 2015-12-11</h1>

<ul>
<li>feat(aggregate): <code class="prettyprint">.sample()</code> helper #3665</li>
<li>fix(query): bitwise query operators with buffers #3663</li>
<li>docs(migration): clarify <code class="prettyprint">new</code> option and findByIdAndUpdate #3661</li>
</ul>

<h1 id="4-3-0-2015-12-09">4.3.0 / 2015-12-09</h1>

<ul>
<li>feat(query): support for mongodb 3.2 bitwise query operators #3660</li>
<li>style: use comma-last style consistently #3657 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>feat: upgrade mongodb driver to 2.1.0 for full MongoDB 3.2 support #3656</li>
<li>feat(aggregate): <code class="prettyprint">.lookup()</code> helper #3532</li>
</ul>

<h1 id="4-2-10-2015-12-08">4.2.10 / 2015-12-08</h1>

<ul>
<li>fixed; upgraded marked #3653 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>docs; cross-db populate #3648</li>
<li>docs; update mocha URL #3646 <a href="https://github.com/ojhaujjwal">ojhaujjwal</a></li>
<li>fixed; call close callback asynchronously #3645</li>
<li>docs; virtuals.html issue #3644 <a href="https://github.com/Psarna94">Psarna94</a></li>
<li>fixed; single embedded doc casting on init #3642</li>
<li>docs; validation docs improvements #3640</li>
</ul>

<h1 id="4-2-9-2015-12-02">4.2.9 / 2015-12-02</h1>

<ul>
<li>docs; defaults docs #3625</li>
<li>fix; nested numeric keys causing an embedded document crash #3623</li>
<li>fix; apply path getters before virtual getters #3618</li>
<li>fix; casting for arrays in single nested schemas #3616</li>
</ul>

<h1 id="4-2-8-2015-11-25">4.2.8 / 2015-11-25</h1>

<ul>
<li>docs; clean up README links #3612 <a href="https://github.com/ReadmeCritic">ReadmeCritic</a></li>
<li>fix; ESLint improvements #3605 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fix; assigning single nested subdocs #3601</li>
<li>docs; describe custom logging functions in <code class="prettyprint">mongoose.set()</code> docs #3557</li>
</ul>

<h1 id="4-2-7-2015-11-20">4.2.7 / 2015-11-20</h1>

<ul>
<li>fixed; readPreference connection string option #3600</li>
<li>fixed; pulling from manually populated arrays #3598 #3579</li>
<li>docs; FAQ about OverwriteModelError #3597 <a href="https://github.com/stcruy">stcruy</a></li>
<li>fixed; setting single embedded schemas to null #3596</li>
<li>fixed; indexes for single embedded schemas #3594</li>
<li>docs; clarify projection for <code class="prettyprint">findOne()</code> #3593 <a href="https://github.com/gunar">gunar</a></li>
<li>fixed; .ownerDocument() method on single embedded schemas #3589</li>
<li>fixed; properly throw casterror for query on single embedded schema #3580</li>
<li>upgraded; mongodb driver -&gt; 2.0.49 for reconnect issue fix #3481</li>
</ul>

<h1 id="4-2-6-2015-11-16">4.2.6 / 2015-11-16</h1>

<ul>
<li>fixed; ability to manually populate an array #3575</li>
<li>docs; clarify <code class="prettyprint">isAsync</code> parameter to hooks #3573</li>
<li>fixed; use captureStackTrace if possible instead #3571</li>
<li>fixed; crash with buffer and update validators #3565 <a href="https://github.com/johnpeb">johnpeb</a></li>
<li>fixed; update casting with operators overwrite: true #3564</li>
<li>fixed; validation with single embedded docs #3562</li>
<li>fixed; inline docs inherit parents $type key #3560</li>
<li>docs; bad grammar in populate docs #3559 <a href="https://github.com/amaurymedeiros">amaurymedeiros</a></li>
<li>fixed; properly handle populate option for find() #2321</li>
</ul>

<h1 id="3-8-37-2015-11-16">3.8.37 / 2015-11-16</h1>

<ul>
<li>fixed; use retainKeyOrder for cloning update op #3572</li>
</ul>

<h1 id="4-2-5-2015-11-09">4.2.5 / 2015-11-09</h1>

<ul>
<li>fixed; handle setting fields in pre update hooks with exec #3549</li>
<li>upgraded; ESLint #3547 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fixed; bluebird unhandled rejections with cast errors and .exec #3543</li>
<li>fixed; min/max validators handling undefined #3539</li>
<li>fixed; standalone mongos connections #3537</li>
<li>fixed; call <code class="prettyprint">.toObject()</code> when setting a single nested doc #3535</li>
<li>fixed; single nested docs now have methods #3534</li>
<li>fixed; single nested docs with .create() #3533 #3521 <a href="https://github.com/tusbar">tusbar</a></li>
<li>docs; deep populate docs #3528</li>
<li>fixed; deep populate schema ref handling #3507</li>
<li>upgraded; mongodb driver -&gt; 2.0.48 for sort overflow issue #3493</li>
<li>docs; clarify default ids for discriminators #3482</li>
<li>fixed; properly support .update(doc) #3221</li>
</ul>

<h1 id="4-2-4-2015-11-02">4.2.4 / 2015-11-02</h1>

<ul>
<li>fixed; upgraded <code class="prettyprint">ms</code> package for security vulnerability #3524 <a href="https://github.com/fhemberger">fhemberger</a></li>
<li>fixed; ESlint rules #3517 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>docs; typo in aggregation docs #3513 <a href="https://github.com/rafakato">rafakato</a></li>
<li>fixed; add <code class="prettyprint">dontThrowCastError</code> option to .update() for promises #3512</li>
<li>fixed; don&rsquo;t double-cast buffers in node 4.x #3510 #3496</li>
<li>fixed; population with single embedded schemas #3501</li>
<li>fixed; pre(&#39;set&rsquo;) hooks work properly #3479</li>
<li>docs; promises guide #3441</li>
</ul>

<h1 id="4-2-3-2015-10-26">4.2.3 / 2015-10-26</h1>

<ul>
<li>docs; remove unreferenced function in middleware.jade #3506</li>
<li>fixed; handling auth with no username/password #3500 #3498 #3484 <a href="https://github.com/mleanos">mleanos</a></li>
<li>fixed; more ESlint rules #3491 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fixed; swallowing exceptions in save callback #3478</li>
<li>docs; fixed broken links in subdocs guide #3477</li>
<li>fixed; casting booleans to numbers #3475</li>
<li>fixed; report CastError for subdoc arrays in findOneAndUpdate #3468</li>
<li>fixed; geoNear returns ES6 promise #3458</li>
</ul>

<h1 id="4-2-2-2015-10-22">4.2.2 / 2015-10-22</h1>

<ul>
<li>fixed; go back to old pluralization code #3490</li>
</ul>

<h1 id="4-2-1-2015-10-22">4.2.1 / 2015-10-22</h1>

<ul>
<li>fixed; pluralization issues #3492 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
</ul>

<h1 id="4-2-0-2015-10-22">4.2.0 / 2015-10-22</h1>

<ul>
<li>added; support for skipVersioning for document arrays #3467 <a href="https://github.com/chazmo03">chazmo03</a></li>
<li>added; ability to customize schema &#39;type&rsquo; key #3459 #3245</li>
<li>fixed; writeConcern for index builds #3455</li>
<li>added; emit event when individual index build starts #3440 <a href="https://github.com/objectiveSee">objectiveSee</a></li>
<li>added; &#39;context&rsquo; option for update validators #3430</li>
<li>refactor; pluralization now in separate pluralize-mongoose npm module #3415 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>added; customizable error validation messages #3406 <a href="https://github.com/geronime">geronime</a></li>
<li>added; support for passing &#39;minimize&rsquo; option to update #3381</li>
<li>added; ability to customize debug logging format #3261</li>
<li>added; baseModelName property for discriminator models #3202</li>
<li>added; &#39;emitIndexErrors&rsquo; option #3174</li>
<li>added; &#39;async&rsquo; option for aggregation cursor to support buffering #3160</li>
<li>added; ability to skip validation for individual save() calls #2981</li>
<li>added; single embedded schema support #2689 #585</li>
<li>added; depopulate function #2509</li>
</ul>

<h1 id="4-1-12-2015-10-19">4.1.12 / 2015-10-19</h1>

<ul>
<li>docs; use readPreference instead of slaveOk for Query.setOptions docs #3471 <a href="https://github.com/buunguyen">buunguyen</a></li>
<li>fixed; more helpful error when regexp contains null bytes #3456</li>
<li>fixed; x509 auth issue #3454 <a href="https://github.com/NoxHarmonium">NoxHarmonium</a></li>
</ul>

<h1 id="3-8-36-2015-10-18">3.8.36 / 2015-10-18</h1>

<ul>
<li>fixed; Make array props non-enumerable #3461 <a href="https://github.com/boblauer">boblauer</a></li>
</ul>

<h1 id="4-1-11-2015-10-12">4.1.11 / 2015-10-12</h1>

<ul>
<li>fixed; update timestamps for update() if they&rsquo;re enabled #3450 <a href="https://github.com/isayme">isayme</a></li>
<li>fixed; unit test error on node 0.10 #3449 <a href="https://github.com/isayme">isayme</a></li>
<li>docs; timestamp option docs #3448 <a href="https://github.com/isayme">isayme</a></li>
<li>docs; fix unexpected indent #3443 <a href="https://github.com/isayme">isayme</a></li>
<li>fixed; use ES6 promises for Model.prototype.remove() #3442</li>
<li>fixed; don&rsquo;t use unused &#39;safe&rsquo; option for index builds #3439</li>
<li>fixed; elemMatch casting bug #3437 #3435 <a href="https://github.com/DefinitelyCarter">DefinitelyCarter</a></li>
<li>docs; schema.index docs #3434</li>
<li>fixed; exceptions in save() callback getting swallowed on mongodb 2.4 #3371</li>
</ul>

<h1 id="4-1-10-2015-10-05">4.1.10 / 2015-10-05</h1>

<ul>
<li>docs; improve virtuals docs to explain virtuals schema option #3433 <a href="https://github.com/zoyaH">zoyaH</a></li>
<li>docs; MongoDB server version compatibility guide #3427</li>
<li>docs; clarify that findById and findByIdAndUpdate fire hooks #3422</li>
<li>docs; clean up Model.save() docs #3420</li>
<li>fixed; properly handle projection with just id #3407 #3412</li>
<li>fixed; infinite loop when database document is corrupted #3405</li>
<li>docs; clarify remove middleware #3388</li>
</ul>

<h1 id="4-1-9-2015-09-28">4.1.9 / 2015-09-28</h1>

<ul>
<li>docs; minlength and maxlength string validation docs #3368 #3413 <a href="https://github.com/cosmosgenius">cosmosgenius</a></li>
<li>fixed; linting for infix operators #3397 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fixed; proper casting for $all #3394</li>
<li>fixed; unhandled rejection warnings with .create() #3391</li>
<li>docs; clarify update validators on paths that aren&rsquo;t explicitly set #3386</li>
<li>docs; custom validator examples #2778</li>
</ul>

<h1 id="4-1-8-2015-09-21">4.1.8 / 2015-09-21</h1>

<ul>
<li>docs; fixed typo in example #3390 <a href="https://github.com/kmctown">kmctown</a></li>
<li>fixed; error in toObject() #3387 <a href="https://github.com/guumaster">guumaster</a></li>
<li>fixed; handling for casting null dates #3383 <a href="https://github.com/alexmingoia">alexmingoia</a></li>
<li>fixed; passing composite ids to <code class="prettyprint">findByIdAndUpdate</code> #3380</li>
<li>fixed; linting #3376 #3375 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fixed; added NodeJS v4 to Travis #3374 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fixed; casting $elemMatch inside of $not #3373 <a href="https://github.com/gaguirre">gaguirre</a></li>
<li>fixed; handle case where $slice is 0 #3369</li>
<li>fixed; avoid running getters if path is populated #3357</li>
<li>fixed; cast documents to objects when setting to a nested path #3346</li>
</ul>

<h1 id="4-1-7-2015-09-14">4.1.7 / 2015-09-14</h1>

<ul>
<li>docs; typos in SchemaType documentation #3367 <a href="https://github.com/jasson15">jasson15</a></li>
<li>fixed; MONGOOSE_DRIVER_PATH env variable again #3360</li>
<li>docs; added validateSync docs #3353</li>
<li>fixed; set findOne op synchronously in query #3344</li>
<li>fixed; handling for <code class="prettyprint">.pull()</code> on a documentarray without an id #3341</li>
<li>fixed; use natural order for cloning update conditions #3338</li>
<li>fixed; issue with strict mode casting for mixed type updates #3337</li>
</ul>

<h1 id="4-1-6-2015-09-08">4.1.6 / 2015-09-08</h1>

<ul>
<li>fixed; MONGOOSE_DRIVER_PATH env variable #3345 <a href="https://github.com/g13013">g13013</a></li>
<li>docs; global autoIndex option #3335 <a href="https://github.com/albertorestifo">albertorestifo</a></li>
<li>docs; model documentation typos #3330</li>
<li>fixed; report reason for CastError #3320</li>
<li>fixed; .populate() no longer returns true after re-assigning #3308</li>
<li>fixed; discriminators with aggregation geoNear #3304</li>
<li>docs; discriminator docs #2743</li>
</ul>

<h1 id="4-1-5-2015-09-01">4.1.5 / 2015-09-01</h1>

<ul>
<li>fixed; document.remove() removing all docs #3326 #3325</li>
<li>fixed; connect() checks for rs_name in options #3299</li>
<li>docs; examples for schema.set() #3288</li>
<li>fixed; checkKeys issue with bluebird #3286 <a href="https://github.com/gregthegeek">gregthegeek</a></li>
</ul>

<h1 id="4-1-4-2015-08-31">4.1.4 / 2015-08-31</h1>

<ul>
<li>fixed; ability to set strict: false for update #3305</li>
<li>fixed; .create() properly uses ES6 promises #3297</li>
<li>fixed; pre hooks on nested subdocs #3291 #3284 <a href="https://github.com/aliatsis">aliatsis</a></li>
<li>docs; remove unclear text in .remove() docs #3282</li>
<li>fixed; pre hooks called twice for 3rd-level nested doc #3281</li>
<li>fixed; nested transforms #3279</li>
<li>upgraded; mquery -&gt; 1.6.3 #3278 #3272</li>
<li>fixed; don&rsquo;t swallow callback errors by default #3273 #3222</li>
<li>fixed; properly get nested paths from nested schemas #3265</li>
<li>fixed; remove() with id undefined deleting all docs #3260 <a href="https://github.com/thanpolas">thanpolas</a></li>
<li>fixed; handling for non-numeric projections #3256</li>
<li>fixed; findById with id undefined returning first doc #3255</li>
<li>fixed; use retainKeyOrder for update #3215</li>
<li>added; passRawResult option to findOneAndUpdate for backwards compat #3173</li>
</ul>

<h1 id="4-1-3-2015-08-16">4.1.3 / 2015-08-16</h1>

<ul>
<li>fixed; getUpdate() in pre update hooks #3520 <a href="https://github.com/gregthegeek">gregthegeek</a></li>
<li>fixed; handleArray() ensures arg is an array #3238 <a href="https://github.com/jloveridge">jloveridge</a></li>
<li>fixed; refresh required path cache when recreating docs #3199</li>
<li>fixed; $ operator on unwind aggregation helper #3197</li>
<li>fixed; findOneAndUpdate() properly returns raw result as third arg to callback #3173</li>
<li>fixed; querystream with dynamic refs #3108</li>
</ul>

<h1 id="3-8-35-2015-08-14">3.8.35 / 2015-08-14</h1>

<ul>
<li>fixed; handling for minimize on nested objects #2930</li>
<li>fixed; don&rsquo;t crash when schema.path.options undefined #1824</li>
</ul>

<h1 id="4-1-2-2015-08-10">4.1.2 / 2015-08-10</h1>

<ul>
<li>fixed; better handling for Jade templates #3241 <a href="https://github.com/kbadk">kbadk</a></li>
<li>added; ESlint trailing spaces #3234 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>added; ESlint #3191 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fixed; properly emit event on disconnect #3183</li>
<li>fixed; copy options properly using Query.toConstructor() #3176</li>
<li>fixed; setMaxListeners() issue in browser build #3170</li>
<li>fixed; node driver -&gt; 2.0.40 to not store undefined keys as null #3169</li>
<li>fixed; update validators handle positional operator #3167</li>
<li>fixed; handle $all + $elemMatch query casting #3163</li>
<li>fixed; post save hooks don&rsquo;t swallow extra args #3155</li>
<li>docs; spelling mistake in index.jade #3154</li>
<li>fixed; don&rsquo;t crash when toObject() has no fields #3130</li>
<li>fixed; apply toObject() recursively for find and update queries #3086 <a href="https://github.com/naoina">naoina</a></li>
</ul>

<h1 id="4-1-1-2015-08-03">4.1.1 / 2015-08-03</h1>

<ul>
<li>fixed; aggregate exec() crash with no callback #3212 #3198 <a href="https://github.com/jpgarcia">jpgarcia</a></li>
<li>fixed; pre init hooks now properly synchronous #3207 <a href="https://github.com/burtonjc">burtonjc</a></li>
<li>fixed; updateValidators doesn&rsquo;t flatten dates #3206 #3194 <a href="https://github.com/victorkohl">victorkohl</a></li>
<li>fixed; default fields don&rsquo;t make document dirty between saves #3205 <a href="https://github.com/burtonjc">burtonjc</a></li>
<li>fixed; save passes 0 as numAffected rather than undefined when no change #3195 <a href="https://github.com/burtonjc">burtonjc</a></li>
<li>fixed; better handling for positional operator in update #3185</li>
<li>fixed; use Travis containers #3181 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
<li>fixed; leaked variable #3180 <a href="https://github.com/ChristianMurphy">ChristianMurphy</a></li>
</ul>

<h1 id="4-1-0-2015-07-24">4.1.0 / 2015-07-24</h1>

<ul>
<li>added; <code class="prettyprint">schema.queue()</code> now public #3193</li>
<li>added; raw result as third parameter to findOneAndX callback #3173</li>
<li>added; ability to run validateSync() on only certain fields #3153</li>
<li>added; subPopulate #3103 <a href="https://github.com/timbur">timbur</a></li>
<li>added; $isDefault function on documents #3077</li>
<li>added; additional properties for built-in validator messages #3063 <a href="https://github.com/KLicheR">KLicheR</a></li>
<li>added; getQuery() and getUpdate() functions for Query #3013</li>
<li>added; export DocumentProvider #2996</li>
<li>added; ability to remove path from schema #2993 <a href="https://github.com/JohnnyEstilles">JohnnyEstilles</a></li>
<li>added; .explain() helper for aggregate #2714</li>
<li>added; ability to specify which ES6-compatible promises library mongoose uses #2688</li>
<li>added; export Aggregate #1910</li>
</ul>

<h1 id="4-0-8-2015-07-20">4.0.8 / 2015-07-20</h1>

<ul>
<li>fixed; assignment with document arrays #3178 <a href="https://github.com/rosston">rosston</a></li>
<li>docs; remove duplicate paragraph #3164 <a href="https://github.com/rhmeeuwisse">rhmeeuwisse</a></li>
<li>docs; improve findOneAndXYZ parameter descriptions #3159 <a href="https://github.com/rhmeeuwisse">rhmeeuwisse</a></li>
<li>docs; add findOneAndRemove to list of supported middleware #3158</li>
<li>docs; clarify ensureIndex #3156</li>
<li>fixed; refuse to save/remove document without id #3118</li>
<li>fixed; hooks next() no longer accidentally returns promise #3104</li>
<li>fixed; strict mode for findOneAndUpdate #2947</li>
<li>added; .min.js.gz file for browser component #2806</li>
</ul>

<h1 id="3-8-34-2015-07-20">3.8.34 / 2015-07-20</h1>

<ul>
<li>fixed; allow using $rename #3171</li>
<li>fixed; no longer modifies update arguments #3008</li>
</ul>

<h1 id="4-0-7-2015-07-11">4.0.7 / 2015-07-11</h1>

<ul>
<li>fixed; documentarray id method when using object id #3157 <a href="https://github.com/siboulet">siboulet</a></li>
<li>docs; improve findById docs #3147</li>
<li>fixed; update validators handle null properly #3136 <a href="https://github.com/odeke-em">odeke-em</a></li>
<li>docs; jsdoc syntax errors #3128 <a href="https://github.com/rhmeeuwisse">rhmeeuwisse</a></li>
<li>docs; fix typo #3126 <a href="https://github.com/rhmeeuwisse">rhmeeuwisse</a></li>
<li>docs; proper formatting in queries.jade #3121 <a href="https://github.com/rhmeeuwisse">rhmeeuwisse</a></li>
<li>docs; correct example for string maxlength validator #3111 <a href="https://github.com/rhmeeuwisse">rhmeeuwisse</a></li>
<li>fixed; setDefaultsOnInsert with arrays #3107</li>
<li>docs; LearnBoost -&gt; Automattic in package.json #3099</li>
<li>docs; pre update hook example #3094 <a href="https://github.com/danpe">danpe</a></li>
<li>docs; clarify query middleware example #3051</li>
<li>fixed; ValidationErrors in strict mode #3046</li>
<li>fixed; set findOneAndUpdate properties before hooks run #3024</li>
</ul>

<h1 id="3-8-33-2015-07-10">3.8.33 / 2015-07-10</h1>

<ul>
<li>upgraded; node driver -&gt; 1.4.38</li>
<li>fixed; dont crash when <code class="prettyprint">match</code> validator undefined</li>
</ul>

<h1 id="4-0-6-2015-06-21">4.0.6 / 2015-06-21</h1>

<ul>
<li>upgraded; node driver -&gt; 2.0.34 #3087</li>
<li>fixed; apply setters on addToSet, etc #3067 <a href="https://github.com/victorkohl">victorkohl</a></li>
<li>fixed; missing semicolons #3065 <a href="https://github.com/sokolikp">sokolikp</a></li>
<li>fixed; proper handling for async doc hooks #3062 <a href="https://github.com/gregthegeek">gregthegeek</a></li>
<li>fixed; dont set failed populate field to null if other docs are successfully populated #3055 <a href="https://github.com/eloytoro">eloytoro</a></li>
<li>fixed; setDefaultsOnInsert with document arrays #3034 <a href="https://github.com/taxilian">taxilian</a></li>
<li>fixed; setters fired on array items #3032</li>
<li>fixed; stop validateSync() on first error #3025 <a href="https://github.com/victorkohl">victorkohl</a></li>
<li>docs; improve query docs #3016</li>
<li>fixed; always exclude _id when its deselected #3010</li>
<li>fixed; enum validator kind property #3009</li>
<li>fixed; mquery collection names #3005</li>
<li>docs; clarify mongos option #3000</li>
<li>docs; clarify that query builder has a .then() #2995</li>
<li>fixed; race condition in dynamic ref #2992</li>
</ul>

<h1 id="3-8-31-2015-06-20">3.8.31 / 2015-06-20</h1>

<ul>
<li>fixed; properly handle text search with discriminators and $meta #2166</li>
</ul>

<h1 id="4-0-5-2015-06-05">4.0.5 / 2015-06-05</h1>

<ul>
<li>fixed; ObjectIds and buffers when mongodb driver is a sibling dependency #3050 #3048 #3040 #3031 #3020 #2988 #2951</li>
<li>fixed; warn user when &#39;increment&rsquo; is used in schema #3039</li>
<li>fixed; setDefaultsOnInsert with array in schema #3035</li>
<li>fixed; dont use default Object toString to cast to string #3030</li>
<li>added; npm badge #3020 <a href="https://github.com/odeke-em">odeke-em</a></li>
<li>fixed; proper handling for calling .set() with a subdoc #2782</li>
<li>fixed; dont throw cast error when using $rename on non-string path #1845</li>
</ul>

<h1 id="3-8-30-2015-06-05">3.8.30 / 2015-06-05</h1>

<ul>
<li>fixed; enable users to set all options with tailable() #2883</li>
</ul>

<h1 id="4-0-4-2015-05-28">4.0.4 / 2015-05-28</h1>

<ul>
<li>docs; findAndModify new parameter correct default value #3012 <a href="https://github.com/JonForest">JonForest</a></li>
<li>docs; clarify pluralization rules #2999 <a href="https://github.com/anonmily">anonmily</a></li>
<li>fix; discriminators with schema methods #2978</li>
<li>fix; make <code class="prettyprint">isModified</code> a schema reserved keyword #2975</li>
<li>fix; properly fire setters when initializing path with object #2943</li>
<li>fix; can use <code class="prettyprint">setDefaultsOnInsert</code> without specifying <code class="prettyprint">runValidators</code> #2938</li>
<li>fix; always set validation errors <code class="prettyprint">kind</code> property #2885</li>
<li>upgraded; node driver -&gt; 2.0.33 #2865</li>
</ul>

<h1 id="3-8-29-2015-05-27">3.8.29 / 2015-05-27</h1>

<ul>
<li>fixed; Handle JSON.stringify properly for nested docs #2990</li>
</ul>

<h1 id="4-0-3-2015-05-13">4.0.3 / 2015-05-13</h1>

<ul>
<li>upgraded; mquery -&gt; 1.5.1 #2983</li>
<li>docs; clarify context for query middleware #2974</li>
<li>docs; fix missing type -&gt; kind rename in History.md #2961</li>
<li>fixed; broken ReadPreference include on Heroku #2957</li>
<li>docs; correct form for cursor aggregate option #2955</li>
<li>fixed; sync post hooks now properly called after function #2949 #2925</li>
<li>fixed; fix sub-doc validate() function #2929</li>
<li>upgraded; node driver -&gt; 2.0.30 #2926</li>
<li>docs; retainKeyOrder for save() #2924</li>
<li>docs; fix broken class names #2913</li>
<li>fixed; error when using node-clone on a doc #2909</li>
<li>fixed; no more hard references to bson #2908 #2906</li>
<li>fixed; dont overwrite array values #2907 <a href="https://github.com/naoina">naoina</a></li>
<li>fixed; use readPreference=primary for findOneAndUpdate #2899 #2823</li>
<li>docs; clarify that update validators only run on $set and $unset #2889</li>
<li>fixed; set kind consistently for built-in validators #2885</li>
<li>docs; single field populated documents #2884</li>
<li>fixed; nested objects are now enumerable #2880 <a href="https://github.com/toblerpwn">toblerpwn</a></li>
<li>fixed; properly populate field when ref, lean, stream used together #2841</li>
<li>docs; fixed migration guide jade error #2807</li>
</ul>

<h1 id="3-8-28-2015-05-12">3.8.28 / 2015-05-12</h1>

<ul>
<li>fixed; proper handling for toJSON options #2910</li>
<li>fixed; dont attach virtuals to embedded docs in update() #2046</li>
</ul>

<h1 id="4-0-2-2015-04-23">4.0.2 / 2015-04-23</h1>

<ul>
<li>fixed; error thrown when calling .validate() on subdoc not in an array #2902</li>
<li>fixed; rename define() to play nice with webpack #2900 <a href="https://github.com/jspears">jspears</a></li>
<li>fixed; pre validate called twice with discriminators #2892</li>
<li>fixed; .inspect() on mongoose.Types #2875</li>
<li>docs; correct callback params for Model.update #2872</li>
<li>fixed; setDefaultsOnInsert now works when runValidators not specified #2870</li>
<li>fixed; Document now wraps EventEmitter.addListener #2867</li>
<li>fixed; call non-hook functions in schema queue #2856</li>
<li>fixed; statics can be mocked out for tests #2848 <a href="https://github.com/ninelb">ninelb</a></li>
<li>upgraded; mquery 1.4.0 for bluebird bug fix #2846</li>
<li>fixed; required validators run first #2843</li>
<li>docs; improved docs for new option to findAndMody #2838</li>
<li>docs; populate example now uses correct field #2837 <a href="https://github.com/swilliams">swilliams</a></li>
<li>fixed; pre validate changes causing VersionError #2835</li>
<li>fixed; get path from correct place when setting CastError #2832</li>
<li>docs; improve docs for Model.update() function signature #2827 <a href="https://github.com/irnc">irnc</a></li>
<li>fixed; populating discriminators #2825 <a href="https://github.com/chetverikov">chetverikov</a></li>
<li>fixed; discriminators with nested schemas #2821</li>
<li>fixed; CastErrors with embedded docs #2819</li>
<li>fixed; post save hook context #2816</li>
<li>docs; 3.8.x -&gt; 4.x migration guide #2807</li>
<li>fixed; proper _distinct copying for query #2765 <a href="https://github.com/cdelauder">cdelauder</a></li>
</ul>

<h1 id="3-8-27-2015-04-22">3.8.27 / 2015-04-22</h1>

<ul>
<li>fixed; dont duplicate db calls on Q.ninvoke() #2864</li>
<li>fixed; Model.find arguments naming in docs #2828</li>
<li>fixed; Support ipv6 in connection strings #2298</li>
</ul>

<h1 id="3-8-26-2015-04-07">3.8.26 / 2015-04-07</h1>

<ul>
<li>fixed; TypeError when setting date to undefined #2833</li>
<li>fixed; handle CastError properly in distinct() with no callback #2786</li>
<li>fixed; broken links in queries docs #2779</li>
<li>fixed; dont mark buffer as modified when setting type initially #2738</li>
<li>fixed; dont crash when using slice with populate #1934</li>
</ul>

<h1 id="4-0-1-2015-03-28">4.0.1 / 2015-03-28</h1>

<ul>
<li>fixed; properly handle empty cast doc in update() with promises #2796</li>
<li>fixed; unstable warning #2794</li>
<li>fixed; findAndModify docs now show new option is false by default #2793</li>
</ul>

<h1 id="4-0-0-2015-03-25">4.0.0 / 2015-03-25</h1>

<ul>
<li>fixed; on-the-fly schema docs typo #2783 <a href="https://github.com/artiifix">artiifix</a></li>
<li>fixed; cast error validation handling #2775 #2766 #2678</li>
<li>fixed; discriminators with populate() #2773 #2719 <a href="https://github.com/chetverikov">chetverikov</a></li>
<li>fixed; increment now a reserved path #2709</li>
<li>fixed; avoid sending duplicate object ids in populate() #2683</li>
<li>upgraded; mongodb to 2.0.24 to properly emit reconnect event multiple times #2656</li>
</ul>

<h1 id="4-0-0-rc4-2015-03-14">4.0.0-rc4 / 2015-03-14</h1>

<ul>
<li>fixed; toObject virtuals schema option handled properly #2751</li>
<li>fixed; update validators work on document arrays #2733</li>
<li>fixed; check for cast errors on $set #2729</li>
<li>fixed; instance field set for all schema types #2727 <a href="https://github.com/csdco">csdco</a></li>
<li>fixed; dont run other validators if required fails #2725</li>
<li>fixed; custom getters execute on ref paths #2610</li>
<li>fixed; save defaults if they were set when doc was loaded from db #2558</li>
<li>fixed; pre validate now runs before pre save #2462</li>
<li>fixed; no longer throws errors with &ndash;use_strict #2281</li>
</ul>

<h1 id="3-8-25-2015-03-13">3.8.25 / 2015-03-13</h1>

<ul>
<li>fixed; debug output reverses order of aggregation keys #2759</li>
<li>fixed; $eq is a valid query selector in 3.0 #2752</li>
<li>fixed; upgraded node driver to 1.4.32 for handling non-numeric poolSize #2682</li>
<li>fixed; update() with overwrite sets _id for nested docs #2658</li>
<li>fixed; casting for operators in $elemMatch #2199</li>
</ul>

<h1 id="4-0-0-rc3-2015-02-28">4.0.0-rc3 / 2015-02-28</h1>

<ul>
<li>fixed; update() pre hooks run before validators #2706</li>
<li>fixed; setters not called on arrays of refs #2698 <a href="https://github.com/brandom">brandom</a></li>
<li>fixed; use node driver 2.0.18 for nodejs 0.12 support #2685</li>
<li>fixed; comments reference file that no longer exists #2681</li>
<li>fixed; populated() returns _id of manually populated doc #2678</li>
<li>added; ability to exclude version key in toObject() #2675</li>
<li>fixed; dont allow setting nested path to a string #2592</li>
<li>fixed; can cast objects with _id field to ObjectIds #2581</li>
<li>fixed; on-the-fly schema getters #2360</li>
<li>added; strict option for findOneAndUpdate() #1967</li>
</ul>

<h1 id="3-8-24-2015-02-25">3.8.24 / 2015-02-25</h1>

<ul>
<li>fixed; properly apply child schema transforms #2691</li>
<li>fixed; make copy of findOneAndUpdate options before modifying #2687</li>
<li>fixed; apply defaults when parent path is selected #2670 #2629</li>
<li>fixed; properly get ref property for nested paths #2665</li>
<li>fixed; node driver makes copy of authenticate options before modifying them #2619</li>
<li>fixed; dont block process exit when auth fails #2599</li>
<li>fixed; remove redundant clone in update() #2537</li>
</ul>

<h1 id="4-0-0-rc2-2015-02-10">4.0.0-rc2 / 2015-02-10</h1>

<ul>
<li>added; io.js to travis build</li>
<li>removed; browser build dependencies not installed by default</li>
<li>added; dynamic refpaths #2640 <a href="https://github.com/chetverikov">chetverikov</a></li>
<li>fixed; dont call child schema transforms on parent #2639 <a href="https://github.com/chetverikov">chetverikov</a></li>
<li>fixed; get rid of remove option if new is set in findAndModify #2598</li>
<li>fixed; aggregate all document array validation errors #2589</li>
<li>fixed; custom setters called when setting value to undefined #1892</li>
</ul>

<h1 id="3-8-23-2015-02-06">3.8.23 / 2015-02-06</h1>

<ul>
<li>fixed; unset opts.remove when upsert is true #2519</li>
<li>fixed; array saved as object when path is object in array #2442</li>
<li>fixed; inline transforms #2440</li>
<li>fixed; check for callback in count() #2204</li>
<li>fixed; documentation for selecting fields #1534</li>
</ul>

<h1 id="4-0-0-rc1-2015-02-01">4.0.0-rc1 / 2015-02-01</h1>

<ul>
<li>fixed; use driver 2.0.14</li>
<li>changed; use transform: true by default #2245</li>
</ul>

<h1 id="4-0-0-rc0-2015-01-31">4.0.0-rc0 / 2015-01-31</h1>

<ul>
<li>fixed; wrong order for distinct() params #2628</li>
<li>fixed; handling no query argument to remove() #2627</li>
<li>fixed; createModel and discriminators #2623 <a href="https://github.com/ashaffer">ashaffer</a></li>
<li>added; pre(&#39;count&rsquo;) middleware #2621</li>
<li>fixed; double validation calls on document arrays #2618</li>
<li>added; validate() catches cast errors #2611</li>
<li>fixed; respect replicaSet parameter in connection string #2609</li>
<li>added; can explicitly exclude paths from versioning #2576 <a href="https://github.com/csabapalfi">csabapalfi</a></li>
<li>upgraded; driver to 2.0.15 #2552</li>
<li>fixed; save() handles errors more gracefully in ES6 #2371</li>
<li>fixed; undefined is now a valid argument to findOneAndUpdate #2272</li>
<li>changed; <code class="prettyprint">new</code> option to findAndModify ops is false by default #2262</li>
</ul>

<h1 id="3-8-22-2015-01-24">3.8.22 / 2015-01-24</h1>

<ul>
<li>upgraded; node-mongodb-native to 1.4.28 #2587 <a href="https://github.com/Climax777">Climax777</a></li>
<li>added; additional documentation for validators #2449</li>
<li>fixed; stack overflow when creating massive arrays #2423</li>
<li>fixed; undefined is a valid id for queries #2411</li>
<li>fixed; properly create nested schema index when same schema used twice #2322</li>
<li>added; link to plugin generator in docs #2085 <a href="https://github.com/huei90">huei90</a></li>
<li>fixed; optional arguments documentation for findOne() #1971 <a href="https://github.com/nachinius">nachinius</a></li>
</ul>

<h1 id="3-9-7-2014-12-19">3.9.7 / 2014-12-19</h1>

<ul>
<li>added; proper cursors for aggregate #2539 <a href="https://github.com/changyy">changyy</a></li>
<li>added; min/max built-in validators for dates #2531 <a href="https://github.com/bshamblen">bshamblen</a></li>
<li>fixed; save and validate are now reserved keywords #2380</li>
<li>added; basic documentation for browser component #2256</li>
<li>added; find and findOne hooks (query middleware) #2138</li>
<li>fixed; throw a DivergentArrayError when saving positional operator queries #2031</li>
<li>added; ability to use options as a document property #1416</li>
<li>fixed; document no longer inherits from event emitter and so domain and _events are no longer reserved #1351</li>
<li>removed; setProfiling #1349</li>
</ul>

<h1 id="3-8-21-2014-12-18">3.8.21 / 2014-12-18</h1>

<ul>
<li>fixed; syntax in index.jade #2517 <a href="https://github.com/elderbas">elderbas</a></li>
<li>fixed; writable statics #2510 #2528</li>
<li>fixed; overwrite and explicit $set casting #2515</li>
</ul>

<h1 id="3-9-6-2014-12-05">3.9.6 / 2014-12-05</h1>

<ul>
<li>added; correctly run validators on each element of array when entire array is modified #661 #1227</li>
<li>added; castErrors in validation #1013 <a href="https://github.com/jondavidjohn">jondavidjohn</a></li>
<li>added; specify text indexes in schema fields #1401 <a href="https://github.com/sr527">sr527</a></li>
<li>added; ability to set field with validators to undefined #1594 <a href="https://github.com/alabid">alabid</a></li>
<li>added; .create() returns an array when passed an array #1746 <a href="https://github.com/alabid">alabid</a></li>
<li>added; test suite and docs for use with co and yield #2177 #2474</li>
<li>fixed; subdocument toObject() transforms #2447 <a href="https://github.com/chmanie">chmanie</a></li>
<li>fixed; Model.create() with save errors #2484</li>
<li>added; pass options to .save() and .remove() #2494 <a href="https://github.com/jondavidjohn">jondavidjohn</a></li>
</ul>

<h1 id="3-8-20-2014-12-01">3.8.20 / 2014-12-01</h1>

<ul>
<li>fixed; recursive readPref #2490 <a href="https://github.com/kjvalencik">kjvalencik</a></li>
<li>fixed; make sure to copy parameters to update() before modifying #2406 <a href="https://github.com/alabid">alabid</a></li>
<li>fixed; unclear documentation about query callbacks #2319</li>
<li>fixed; setting a schema-less field to an empty object #2314 <a href="https://github.com/alabid">alabid</a></li>
<li>fixed; registering statics and methods for discriminators #2167 <a href="https://github.com/alabid">alabid</a></li>
</ul>

<h1 id="3-9-5-2014-11-10">3.9.5 / 2014-11-10</h1>

<ul>
<li>added; ability to disable autoIndex on a per-connection basis #1875 <a href="https://github.com/sr527">sr527</a></li>
<li>fixed; <code class="prettyprint">geoNear()</code> no longer enforces legacy coordinate pairs - supports GeoJSON #1987 <a href="https://github.com/alabid">alabid</a></li>
<li>fixed; browser component works when minified with mangled variable names #2302</li>
<li>fixed; <code class="prettyprint">doc.errors</code> now cleared before <code class="prettyprint">validate()</code> called #2302</li>
<li>added; <code class="prettyprint">execPopulate()</code> function to make <code class="prettyprint">doc.populate()</code> compatible with promises #2317</li>
<li>fixed; <code class="prettyprint">count()</code> no longer throws an error when used with <code class="prettyprint">sort()</code> #2374</li>
<li>fixed; <code class="prettyprint">save()</code> no longer recursively calls <code class="prettyprint">save()</code> on populated fields #2418</li>
</ul>

<h1 id="3-8-19-2014-11-09">3.8.19 / 2014-11-09</h1>

<ul>
<li>fixed; make sure to not override subdoc _ids on find #2276 <a href="https://github.com/alabid">alabid</a></li>
<li>fixed; exception when comparing two documents when one lacks _id #2333 <a href="https://github.com/slawo">slawo</a></li>
<li>fixed; getters for properties with non-strict schemas #2439 <a href="https://github.com/alabid">alabid</a></li>
<li>fixed; inconsistent URI format in docs #2414 <a href="https://github.com/sr527">sr527</a></li>
</ul>

<h1 id="3-9-4-2014-10-25">3.9.4 / 2014-10-25</h1>

<ul>
<li>fixed; statics no longer can be overwritten #2343 <a href="https://github.com/chetverikov">nkcmr</a></li>
<li>added; ability to set single populated paths to documents #1530</li>
<li>added; setDefaultsOnInsert and runValidator options for findOneAndUpdate() #860</li>
</ul>

<h1 id="3-8-18-2014-10-22">3.8.18 / 2014-10-22</h1>

<ul>
<li>fixed; Dont use all toObject options in save #2340 <a href="https://github.com/chetverikov">chetverikov</a></li>
</ul>

<h1 id="3-9-3-2014-10-01">3.9.3 / 2014-10-01</h1>

<ul>
<li>added; support for virtuals that return objects #2294</li>
<li>added; ability to manually hydrate POJOs into mongoose objects #2292</li>
<li>added; setDefaultsOnInsert and runValidator options for update() #860</li>
</ul>

<h1 id="3-8-17-2014-09-29">3.8.17 / 2014-09-29</h1>

<ul>
<li>fixed; use schema options retainKeyOrder in save() #2274</li>
<li>fixed; fix skip in populate when limit is set #2252</li>
<li>fixed; fix stack overflow when passing MongooseArray to findAndModify #2214</li>
<li>fixed; optimize .length usage in populate #2289</li>
</ul>

<h1 id="3-9-2-2014-09-08">3.9.2 / 2014-09-08</h1>

<ul>
<li>added; test coverage for browser component #2255</li>
<li>added; in-order execution of validators #2243</li>
<li>added; custom fields for validators #2132</li>
<li>removed; exception thrown when find() used with count() #1950</li>
</ul>

<h1 id="3-8-16-2014-09-08">3.8.16 / 2014-09-08</h1>

<ul>
<li>fixed; properly remove modified array paths if array has been overwritten #1638</li>
<li>fixed; key check errors #1884</li>
<li>fixed; make sure populate on an array always returns a Mongoose array #2214</li>
<li>fixed; SSL connections with node 0.11 #2234</li>
<li>fixed; return sensible strings for promise errors #2239</li>
</ul>

<h1 id="3-9-1-2014-08-17">3.9.1 / 2014-08-17</h1>

<ul>
<li>added; alpha version of browser-side schema validation #2254</li>
<li>added; support passing a function to schemas <code class="prettyprint">required</code> field #2247</li>
<li>added; support for setting updatedAt and createdAt timestamps #2227</li>
<li>added; document.validate() returns a promise #2131</li>
</ul>

<h1 id="3-8-15-2014-08-17">3.8.15 / 2014-08-17</h1>

<ul>
<li>fixed; Replica set connection string example in docs #2246</li>
<li>fixed; bubble up parseError event #2229</li>
<li>fixed; removed buggy populate cache #2176</li>
<li>fixed; dont $inc versionKey if its being $set #1933</li>
<li>fixed; cast $or and $and in $pull #1932</li>
<li>fixed; properly cast to schema in stream() #1862</li>
<li>fixed; memory leak in nested objects #1565 #2211 <a href="https://github.com/devongovett">devongovett</a></li>
</ul>

<h1 id="3-8-14-2014-07-26">3.8.14 / 2014-07-26</h1>

<ul>
<li>fixed; stringifying MongooseArray shows nested arrays #2002</li>
<li>fixed; use populated doc schema in toObject and toJSON by default #2035</li>
<li>fixed; dont crash on arrays containing null #2140</li>
<li>fixed; model.update w/ upsert has same return values on .exec and promise #2143</li>
<li>fixed; better handling for populate limit with multiple documents #2151</li>
<li>fixed; dont prevent users from adding weights to text index #2183</li>
<li>fixed; helper for aggregation cursor #2187</li>
<li>updated; node-mongodb-native to 1.4.7</li>
</ul>

<h1 id="3-8-13-2014-07-15">3.8.13 / 2014-07-15</h1>

<ul>
<li>fixed; memory leak with isNew events #2159</li>
<li>fixed; docs for overwrite option for update() #2144</li>
<li>fixed; storeShard() handles dates properly #2127</li>
<li>fixed; sub-doc changes not getting persisted to db after save #2082</li>
<li>fixed; populate with _id: 0 actually removes _id instead of setting to undefined #2123</li>
<li>fixed; save versionKey on findOneAndUpdate w/ upsert #2122</li>
<li>fixed; fix typo in 2.8 docs #2120 <a href="https://github.com/shakirullahi">shakirullahi</a></li>
<li>fixed; support maxTimeMs #2102 <a href="https://github.com/yuukinajima">yuukinajima</a></li>
<li>fixed; support $currentDate #2019</li>
<li>fixed; $addToSet handles objects without _ids properly #1973</li>
<li>fixed; dont crash on invalid nearSphere query #1874</li>
</ul>

<h1 id="3-8-12-2014-05-30">3.8.12 / 2014-05-30</h1>

<ul>
<li>fixed; single-server reconnect event fires #1672</li>
<li>fixed; sub-docs not saved when pushed into populated array #1794</li>
<li>fixed; .set() sometimes converts embedded docs to pojos #1954 <a href="https://github.com/archangel-irk">archangel-irk</a></li>
<li>fixed; sub-doc changes not getting persisted to db after save #2082</li>
<li>fixed; custom getter might cause mongoose to mistakenly think a path is dirty #2100 <a href="https://github.com/pgherveou">pgherveou</a></li>
<li>fixed; chainable helper for allowDiskUse option in aggregation #2114</li>
</ul>

<h1 id="3-9-0-unstable-2014-05-22">3.9.0 (unstable) / 2014-05-22</h1>

<ul>
<li>changed; added <code class="prettyprint">domain</code> to reserved keywords #1338 #2052 <a href="https://github.com/antoinepairet">antoinepairet</a></li>
<li>added; asynchronous post hooks #1977 #2081 <a href="https://github.com/chopachom">chopachom</a> <a href="https://github.com/JasonGhent">JasonGhent</a></li>
<li>added; using model for population, cross-db populate <a href="https://github.com/mihai-chiorean">mihai-chiorean</a></li>
<li>added; can define a type for schema validators</li>
<li>added; <code class="prettyprint">doc.remove()</code> returns a promise #1619 <a href="https://github.com/refack">refack</a></li>
<li>added; internal promises for hooks, pre-save hooks run in parallel #1732 <a href="https://github.com/refack">refack</a></li>
<li>fixed; geoSearch hanging when no results returned #1846 <a href="https://github.com/ghartnett">ghartnett</a></li>
<li>fixed; do not set .type property on ValidationError, use .kind instead #1323</li>
</ul>

<h1 id="3-8-11-2014-05-22">3.8.11 / 2014-05-22</h1>

<ul>
<li>updated; node-mongodb-native to 1.4.5</li>
<li>reverted; #2052, fixes #2097</li>
</ul>

<h1 id="3-8-10-2014-05-20">3.8.10 / 2014-05-20</h1>

<ul>
<li>updated; node-mongodb-native to 1.4.4</li>
<li>fixed; _.isEqual false negatives bug in js-bson #2070</li>
<li>fixed; missing check for schema.options #2014</li>
<li>fixed; missing support for $position #2024</li>
<li>fixed; options object corruption #2049</li>
<li>fixed; improvements to virtuals docs #2055</li>
<li>fixed; added <code class="prettyprint">domain</code> to reserved keywords #2052 #1338</li>
</ul>

<h1 id="3-8-9-2014-05-08">3.8.9 / 2014-05-08</h1>

<ul>
<li>updated; mquery to 0.7.0</li>
<li>updated; node-mongodb-native to 1.4.3</li>
<li>fixed; $near failing against MongoDB 2.6</li>
<li>fixed; relying on .options() to determine if collection exists</li>
<li>fixed; $out aggregate helper</li>
<li>fixed; all test failures against MongoDB 2.6.1, with caveat #2065</li>
</ul>

<h1 id="3-8-8-2014-02-22">3.8.8 / 2014-02-22</h1>

<ul>
<li>fixed; saving Buffers #1914</li>
<li>updated; expose connection states for user-land #1926 <a href="https://github.com/yorkie">yorkie</a></li>
<li>updated; mquery to 0.5.3</li>
<li>updated; added get / set to reserved path list #1903 <a href="https://github.com/tstrimple">tstrimple</a></li>
<li>docs; README code highlighting, syntax fixes #1930 <a href="https://github.com/IonicaBizau">IonicaBizau</a></li>
<li>docs; fixes link in the doc at #1925 <a href="https://github.com/kapeels">kapeels</a></li>
<li>docs; add a missed word &#39;hook&rsquo; for the description of the post-hook api #1924 <a href="https://github.com/ipoval">ipoval</a></li>
</ul>

<h1 id="3-8-7-2014-02-09">3.8.7 / 2014-02-09</h1>

<ul>
<li>fixed; sending safe/read options in Query#exec #1895</li>
<li>fixed; findOneAnd..() with sort #1887</li>
</ul>

<h1 id="3-8-6-2014-01-30">3.8.6 / 2014-01-30</h1>

<ul>
<li>fixed; setting readPreferences #1895</li>
</ul>

<h1 id="3-8-5-2014-01-23">3.8.5 / 2014-01-23</h1>

<ul>
<li>fixed; ssl setting when using URI #1882</li>
<li>fixed; findByIdAndUpdate now respects the overwrite option #1809 <a href="https://github.com/owenallenaz">owenallenaz</a></li>
</ul>

<h1 id="3-8-4-2014-01-07">3.8.4 / 2014-01-07</h1>

<ul>
<li>updated; mongodb driver to 1.3.23</li>
<li>updated; mquery to 0.4.1</li>
<li>updated; mpromise to 0.4.3</li>
<li>fixed; discriminators now work when selecting fields #1820 <a href="https://github.com/daemon1981">daemon1981</a></li>
<li>fixed; geoSearch with no results timeout #1846 <a href="https://github.com/ghartnett">ghartnett</a></li>
<li>fixed; infitite recursion in ValidationError #1834 <a href="https://github.com/chetverikov">chetverikov</a></li>
</ul>

<h1 id="3-8-3-2013-12-17">3.8.3 / 2013-12-17</h1>

<ul>
<li>fixed; setting empty array with model.update #1838</li>
<li>docs; fix url</li>
</ul>

<h1 id="3-8-2-2013-12-14">3.8.2 / 2013-12-14</h1>

<ul>
<li>fixed; enum validation of multiple values #1778 <a href="https://github.com/heroicyang">heroicyang</a></li>
<li>fixed; global var leak #1803</li>
<li>fixed; post remove now fires on subdocs #1810</li>
<li>fixed; no longer set default empty array for geospatial-indexed fields #1668 <a href="https://github.com/shirish87">shirish87</a></li>
<li>fixed; model.stream() not hydrating discriminators correctly #1792 <a href="https://github.com/j">j</a></li>
<li>docs: Stablility -&gt; Stability <a href="https://github.com/nikmartin">nikmartin</a></li>
<li>tests; improve shard error handling</li>
</ul>

<h1 id="3-8-1-2013-11-19">3.8.1 / 2013-11-19</h1>

<ul>
<li>fixed; mishandling of Dates with minimize/getters #1764</li>
<li>fixed; Normalize bugs.email, so <code class="prettyprint">npm</code> will shut up #1769 <a href="https://github.com/refack">refack</a></li>
<li>docs; Improve the grammar where &ldquo;lets us&rdquo; was used #1777 <a href="https://github.com/alexyoung">alexyoung</a></li>
<li>docs; Fix some grammatical issues in the documentation #1777 <a href="https://github.com/alexyoung">alexyoung</a></li>
<li>docs; fix Query api exposure</li>
<li>docs; fix return description</li>
<li>docs; Added Notes on findAndUpdate() #1750 <a href="https://github.com/sstadelman">sstadelman</a></li>
<li>docs; Update version number in README #1762 <a href="https://github.com/Fodi69">Fodi69</a></li>
</ul>

<h1 id="3-8-0-2013-10-31">3.8.0 / 2013-10-31</h1>

<ul>
<li>updated; warn when using an unstable version</li>
<li>updated; error message returned in doc.save() #1595</li>
<li>updated; mongodb driver to 1.3.19 (fix error swallowing behavior)</li>
<li>updated; mquery to 0.3.2</li>
<li>updated; mocha to 1.12.0</li>
<li>updated; mpromise 0.3.0</li>
<li>updated; sliced 0.0.5</li>
<li>removed; mongoose.Error.DocumentError (never used)</li>
<li>removed; namedscope (undocumented and broken) #679 #642 #455 #379</li>
<li>changed; no longer offically supporting node 0.6.x</li>
<li>changed; query.within getter is now a method -&gt; query.within()</li>
<li>changed; query.intersects getter is now a method -&gt; query.intersects()</li>
<li>added; custom error msgs for built-in validators #747</li>
<li>added; discriminator support #1647 #1003 <a href="https://github.com/j">j</a></li>
<li>added; support disabled collection name pluralization #1350 #1707 <a href="https://github.com/refack">refack</a></li>
<li>added; support for GeoJSON to Query#near <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; stand-alone base query support - query.toConstructor() <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to geoSearch #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support for geoNear #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; connection.useDb() #1124 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to model.mapReduce()</li>
<li>added; promise support to model.ensureIndexes()</li>
<li>added; promise support to model.populate()</li>
<li>added; benchmarks <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; publicly exposed connection states #1585</li>
<li>added; $geoWithin support #1529 $1455 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; query method chain validation</li>
<li>added; model.update <code class="prettyprint">overwrite</code> option</li>
<li>added; model.geoNear() support #1563 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; model.geoSearch() support #1560 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; MongooseBuffer#subtype()</li>
<li>added; model.create() now returns a promise #1340</li>
<li>added; support for <code class="prettyprint">awaitdata</code> query option</li>
<li>added; pass the doc to doc.remove() callback #1419 <a href="https://github.com/JoeWagner">JoeWagner</a></li>
<li>added; aggregation query builder #1404 <a href="https://github.com/njoyard">njoyard</a></li>
<li>fixed; document.toObject when using <code class="prettyprint">minimize</code> and <code class="prettyprint">getters</code> options #1607 <a href="https://github.com/JedWatson">JedWatson</a></li>
<li>fixed; Mixed types can now be required #1722 <a href="https://github.com/Reggino">Reggino</a></li>
<li>fixed; do not pluralize model names not ending with letters #1703 <a href="https://github.com/refack">refack</a></li>
<li>fixed; repopulating modified populated paths #1697</li>
<li>fixed; doc.equals() when _id option is set to false #1687</li>
<li>fixed; strict mode warnings #1686</li>
<li>fixed; $near GeoJSON casting #1683</li>
<li>fixed; nearSphere GeoJSON query builder</li>
<li>fixed; population field selection w/ strings #1669</li>
<li>fixed; setters not firing on null values #1445 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; handle another versioning edge case #1520</li>
<li>fixed; excluding subdocument fields #1280 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; allow array properties to be set to null with findOneAndUpdate <a href="https://github.com/aheuermann">aheuermann</a></li>
<li>fixed; subdocuments now use own toJSON opts #1376 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model#geoNear fulfills promise when results empty #1658 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; utils.merge no longer overrides props and methods #1655 <a href="https://github.com/j">j</a></li>
<li>fixed; subdocuments now use their own transform #1412 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model.remove() removes only what is necessary #1649</li>
<li>fixed; update() now only runs with cb or explicit true #1644</li>
<li>fixed; casting ref docs on creation #1606 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model.update &ldquo;overwrite&rdquo; option works as documented</li>
<li>fixed; query#remove() works as documented</li>
<li>fixed; &ldquo;limit&rdquo; correctly applies to individual items on population #1490 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; issue with positional operator on ref docs #1572 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; benchmarks to actually output valid json</li>
<li>deprecated; promise#addBack (use promise#onResolve)</li>
<li>deprecated; promise#complete (use promise#fulfill)</li>
<li>deprecated; promise#addCallback (use promise#onFulFill)</li>
<li>deprecated; promise#addErrback (use promise#onReject)</li>
<li>deprecated; query.nearSphere() (use query.near)</li>
<li>deprecated; query.center() (use query.circle)</li>
<li>deprecated; query.centerSphere() (use query.circle)</li>
<li>deprecated; query#slaveOk (use query#read)</li>
<li>docs; custom validator messages</li>
<li>docs; 10gen -&gt; MongoDB</li>
<li>docs; add Date method caveats #1598</li>
<li>docs; more validation details</li>
<li>docs; state which branch is stable/unstable</li>
<li>docs; mention that middleware does not run on Models</li>
<li>docs; promise.fulfill()</li>
<li>docs; fix readme spelling #1483 <a href="https://github.com/yorchopolis">yorchopolis</a></li>
<li>docs; fixed up the README and examples <a href="https://github.com/ebensing">ebensing</a></li>
<li>website; add &ldquo;show code&rdquo; for properties</li>
<li>website; move &ldquo;show code&rdquo; links down</li>
<li>website; update guide</li>
<li>website; add unstable docs</li>
<li>website; many improvements</li>
<li>website; fix copyright #1439</li>
<li>website; server.js -&gt; static.js #1546 <a href="https://github.com/nikmartin">nikmartin</a></li>
<li>tests; refactor 1703</li>
<li>tests; add test generator</li>
<li>tests; validate formatMessage() throws</li>
<li>tests; add script for continuously running tests</li>
<li>tests; fixed versioning tests</li>
<li>tests; race conditions in tests</li>
<li>tests; added for nested and/or queries</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; replace deprecated method names</li>
<li>tests; convert id to string</li>
<li>tests; fix sharding tests for MongoDB 2.4.5</li>
<li>tests; now 4-5 seconds faster</li>
<li>tests; fix race condition</li>
<li>make; suppress warning msg in test</li>
<li>benchmarks; updated for pull requests</li>
<li>examples; improved and expanded <a href="https://github.com/ebensing">ebensing</a></li>
</ul>

<h1 id="3-7-4-unstable-2013-10-01">3.7.4 (unstable) / 2013-10-01</h1>

<ul>
<li>updated; mquery to 0.3.2</li>
<li>removed; mongoose.Error.DocumentError (never used)</li>
<li>added; custom error msgs for built-in validators #747</li>
<li>added; discriminator support #1647 #1003 <a href="https://github.com/j">j</a></li>
<li>added; support disabled collection name pluralization #1350 #1707 <a href="https://github.com/refack">refack</a></li>
<li>fixed; do not pluralize model names not ending with letters #1703 <a href="https://github.com/refack">refack</a></li>
<li>fixed; repopulating modified populated paths #1697</li>
<li>fixed; doc.equals() when _id option is set to false #1687</li>
<li>fixed; strict mode warnings #1686</li>
<li>fixed; $near GeoJSON casting #1683</li>
<li>fixed; nearSphere GeoJSON query builder</li>
<li>fixed; population field selection w/ strings #1669</li>
<li>docs; custom validator messages</li>
<li>docs; 10gen -&gt; MongoDB</li>
<li>docs; add Date method caveats #1598</li>
<li>docs; more validation details</li>
<li>website; add &ldquo;show code&rdquo; for properties</li>
<li>website; move &ldquo;show code&rdquo; links down</li>
<li>tests; refactor 1703</li>
<li>tests; add test generator</li>
<li>tests; validate formatMessage() throws</li>
</ul>

<h1 id="3-7-3-unstable-2013-08-22">3.7.3 (unstable) / 2013-08-22</h1>

<ul>
<li>updated; warn when using an unstable version</li>
<li>updated; mquery to 0.3.1</li>
<li>updated; mocha to 1.12.0</li>
<li>updated; mongodb driver to 1.3.19 (fix error swallowing behavior)</li>
<li>changed; no longer offically supporting node 0.6.x</li>
<li>added; support for GeoJSON to Query#near <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; stand-alone base query support - query.toConstructor() <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to geoSearch #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support for geoNear #1614 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; setters not firing on null values #1445 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; handle another versioning edge case #1520</li>
<li>fixed; excluding subdocument fields #1280 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; allow array properties to be set to null with findOneAndUpdate <a href="https://github.com/aheuermann">aheuermann</a></li>
<li>fixed; subdocuments now use own toJSON opts #1376 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model#geoNear fulfills promise when results empty #1658 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; utils.merge no longer overrides props and methods #1655 <a href="https://github.com/j">j</a></li>
<li>fixed; subdocuments now use their own transform #1412 <a href="https://github.com/ebensing">ebensing</a></li>
<li>make; suppress warning msg in test</li>
<li>docs; state which branch is stable/unstable</li>
<li>docs; mention that middleware does not run on Models</li>
<li>tests; add script for continuously running tests</li>
<li>tests; fixed versioning tests</li>
<li>benchmarks; updated for pull requests</li>
</ul>

<h1 id="3-7-2-unstable-2013-08-15">3.7.2 (unstable) / 2013-08-15</h1>

<ul>
<li>fixed; model.remove() removes only what is necessary #1649</li>
<li>fixed; update() now only runs with cb or explicit true #1644</li>
<li>tests; race conditions in tests</li>
<li>website; update guide</li>
</ul>

<h1 id="3-7-1-unstable-2013-08-13">3.7.1 (unstable) / 2013-08-13</h1>

<ul>
<li>updated; driver to 1.3.18 (fixes memory leak)</li>
<li>added; connection.useDb() #1124 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; promise support to model.mapReduce()</li>
<li>added; promise support to model.ensureIndexes()</li>
<li>added; promise support to model.populate()</li>
<li>fixed; casting ref docs on creation #1606 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; model.update &ldquo;overwrite&rdquo; option works as documented</li>
<li>fixed; query#remove() works as documented</li>
<li>fixed; &ldquo;limit&rdquo; correctly applies to individual items on population #1490 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; issue with positional operator on ref docs #1572 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; benchmarks to actually output valid json</li>
<li>tests; added for nested and/or queries</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; close some test connections</li>
<li>tests; validate db contents</li>
<li>tests; remove .only</li>
<li>tests; replace deprecated method names</li>
<li>tests; convert id to string</li>
<li>docs; promise.fulfill()</li>
</ul>

<h1 id="3-7-0-unstable-2013-08-05">3.7.0 (unstable) / 2013-08-05</h1>

<ul>
<li>changed; query.within getter is now a method -&gt; query.within()</li>
<li>changed; query.intersects getter is now a method -&gt; query.intersects()</li>
<li>deprecated; promise#addBack (use promise#onResolve)</li>
<li>deprecated; promise#complete (use promise#fulfill)</li>
<li>deprecated; promise#addCallback (use promise#onFulFill)</li>
<li>deprecated; promise#addErrback (use promise#onReject)</li>
<li>deprecated; query.nearSphere() (use query.near)</li>
<li>deprecated; query.center() (use query.circle)</li>
<li>deprecated; query.centerSphere() (use query.circle)</li>
<li>deprecated; query#slaveOk (use query#read)</li>
<li>removed; namedscope (undocumented and broken) #679 #642 #455 #379</li>
<li>added; benchmarks <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; publicly exposed connection states #1585</li>
<li>added; $geoWithin support #1529 $1455 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; query method chain validation</li>
<li>added; model.update <code class="prettyprint">overwrite</code> option</li>
<li>added; model.geoNear() support #1563 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; model.geoSearch() support #1560 <a href="https://github.com/ebensing">ebensing</a></li>
<li>added; MongooseBuffer#subtype()</li>
<li>added; model.create() now returns a promise #1340</li>
<li>added; support for <code class="prettyprint">awaitdata</code> query option</li>
<li>added; pass the doc to doc.remove() callback #1419 <a href="https://github.com/JoeWagner">JoeWagner</a></li>
<li>added; aggregation query builder #1404 <a href="https://github.com/njoyard">njoyard</a></li>
<li>updated; integrate mquery #1562 <a href="https://github.com/ebensing">ebensing</a></li>
<li>updated; error msg in doc.save() #1595</li>
<li>updated; bump driver to 1.3.15</li>
<li>updated; mpromise 0.3.0</li>
<li>updated; sliced 0.0.5</li>
<li>tests; fix sharding tests for MongoDB 2.4.5</li>
<li>tests; now 4-5 seconds faster</li>
<li>tests; fix race condition</li>
<li>docs; fix readme spelling #1483 <a href="https://github.com/yorchopolis">yorchopolis</a></li>
<li>docs; fixed up the README and examples <a href="https://github.com/ebensing">ebensing</a></li>
<li>website; add unstable docs</li>
<li>website; many improvements</li>
<li>website; fix copyright #1439</li>
<li>website; server.js -&gt; static.js #1546 <a href="https://github.com/nikmartin">nikmartin</a></li>
<li>examples; improved and expanded <a href="https://github.com/ebensing">ebensing</a></li>
</ul>

<h1 id="3-6-20-stable-2013-09-23">3.6.20 (stable) / 2013-09-23</h1>

<ul>
<li>fixed; repopulating modified populated paths #1697</li>
<li>fixed; doc.equals w/ _id false #1687</li>
<li>fixed; strict mode warning #1686</li>
<li>docs; near/nearSphere</li>
</ul>

<h1 id="3-6-19-stable-2013-09-04">3.6.19 (stable) / 2013-09-04</h1>

<ul>
<li>fixed; population field selection w/ strings #1669</li>
<li>docs; Date method caveats #1598</li>
</ul>

<h1 id="3-6-18-stable-2013-08-22">3.6.18 (stable) / 2013-08-22</h1>

<ul>
<li>updated; warn when using an unstable version of mongoose</li>
<li>updated; mocha to 1.12.0</li>
<li>updated; mongodb driver to 1.3.19 (fix error swallowing behavior)</li>
<li>fixed; setters not firing on null values #1445 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; properly exclude subdocument fields #1280 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; cast error in findAndModify #1643 <a href="https://github.com/aheuermann">aheuermann</a></li>
<li>website; update guide</li>
<li>website; added documentation for safe:false and versioning interaction</li>
<li>docs; mention that middleware dont run on Models</li>
<li>docs; fix indexes link</li>
<li>make; suppress warning msg in test</li>
<li>tests; moar</li>
</ul>

<h1 id="3-6-17-2013-08-13">3.6.17 / 2013-08-13</h1>

<ul>
<li>updated; driver to 1.3.18 (fixes memory leak)</li>
<li>fixed; casting ref docs on creation #1606</li>
<li>docs; query options</li>
</ul>

<h1 id="3-6-16-2013-08-08">3.6.16 / 2013-08-08</h1>

<ul>
<li>added; publicly expose connection states #1585</li>
<li>fixed; limit applies to individual items on population #1490 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; positional operator casting in updates #1572 <a href="https://github.com/ebensing">ebensing</a></li>
<li>updated; MongoDB driver to 1.3.17</li>
<li>updated; sliced to 0.0.5</li>
<li>website; tweak homepage</li>
<li>tests; fixed + added</li>
<li>docs; fix some examples</li>
<li>docs; multi-mongos support details</li>
<li>docs; auto open browser after starting static server</li>
</ul>

<h1 id="3-6-15-2013-07-16">3.6.15 / 2013-07-16</h1>

<ul>
<li>added; mongos failover support #1037</li>
<li>updated; make schematype return vals return self #1580</li>
<li>docs; add note to model.update #571</li>
<li>docs; document third param to document.save callback #1536</li>
<li>tests; tweek mongos test timeout</li>
</ul>

<h1 id="3-6-14-2013-07-05">3.6.14 / 2013-07-05</h1>

<ul>
<li>updated; driver to 1.3.11</li>
<li>fixed; issue with findOneAndUpdate not returning null on upserts #1533 <a href="https://github.com/ebensing">ebensing</a></li>
<li>fixed; missing return statement in SchemaArray#$geoIntersects() #1498 <a href="https://github.com/bsrykt">bsrykt</a></li>
<li>fixed; wrong isSelected() behavior #1521 <a href="https://github.com/kyano">kyano</a></li>
<li>docs; note about toObject behavior during save()</li>
<li>docs; add callbacks details #1547 <a href="https://github.com/nikmartin">nikmartin</a></li>
</ul>

<h1 id="3-6-13-2013-06-27">3.6.13 / 2013-06-27</h1>

<ul>
<li>fixed; calling model.distinct without conditions #1541</li>
<li>fixed; regression in Query#count() #1542</li>
<li>now working on 3.6.13</li>
</ul>

<h1 id="3-6-12-2013-06-25">3.6.12 / 2013-06-25</h1>

<ul>
<li>updated; driver to 1.3.10</li>
<li>updated; clearer capped collection error message #1509 <a href="https://github.com/bitmage">bitmage</a></li>
<li>fixed; MongooseBuffer subtype loss during casting #1517 <a href="https://github.com/zedgu">zedgu</a></li>
<li>fixed; docArray#id when doc.id is disabled #1492</li>
<li>fixed; docArray#id now supports matches on populated arrays #1492 <a href="https://github.com/pgherveou">pgherveou</a></li>
<li>website; fix example</li>
<li>website; improve _id disabling example</li>
<li>website; fix typo #1494 <a href="https://github.com/dejj">dejj</a></li>
<li>docs; added a &#39;Requesting new features&rsquo; section #1504 <a href="https://github.com/shovon">shovon</a></li>
<li>docs; improve subtypes description</li>
<li>docs; clarify _id disabling</li>
<li>docs: display by alphabetical order the methods list #1508 <a href="https://github.com/nicolasleger">nicolasleger</a></li>
<li>tests; refactor isSelected checks</li>
<li>tests; remove pointless test</li>
<li>tests; fixed timeouts</li>
</ul>

<h1 id="3-6-11-2013-05-15">3.6.11 / 2013-05-15</h1>

<ul>
<li>updated; driver to 1.3.5</li>
<li>fixed; compat w/ Object.create(null) #1484 #1485</li>
<li>fixed; cloning objects w/ missing constructors</li>
<li>fixed; prevent multiple min number validators #1481 <a href="https://github.com/nrako">nrako</a></li>
<li>docs; add doc.increment() example</li>
<li>docs; add $size example</li>
<li>docs; add &ldquo;distinct&rdquo; example</li>
</ul>

<h1 id="3-6-10-2013-05-09">3.6.10 / 2013-05-09</h1>

<ul>
<li>update driver to 1.3.3</li>
<li>fixed; increment() works without other changes #1475</li>
<li>website; fix links to posterous</li>
<li>docs; fix link #1472</li>
</ul>

<h1 id="3-6-9-2013-05-02">3.6.9 / 2013-05-02</h1>

<ul>
<li>fixed; depopulation of mixed documents #1471</li>
<li>fixed; use of $options in array #1462</li>
<li>tests; fix race condition</li>
<li>docs; fix default example</li>
</ul>

<h1 id="3-6-8-2013-04-25">3.6.8 / 2013-04-25</h1>

<ul>
<li>updated; driver to 1.3.0</li>
<li>fixed; connection.model should retain options #1458 <a href="https://github.com/vedmalex">vedmalex</a></li>
<li>tests; 4-5 seconds faster</li>
</ul>

<h1 id="3-6-7-2013-04-19">3.6.7 / 2013-04-19</h1>

<ul>
<li>fixed; population regression in 3.6.6 #1444</li>
</ul>

<h1 id="3-6-6-2013-04-18">3.6.6 / 2013-04-18</h1>

<ul>
<li>fixed; saving populated new documents #1442</li>
<li>fixed; population regession in 3.6.5 #1441</li>
<li>website; fix copyright #1439</li>
</ul>

<h1 id="3-6-5-2013-04-15">3.6.5 / 2013-04-15</h1>

<ul>
<li>fixed; strict:throw edge case using .set(path, val)</li>
<li>fixed; schema.pathType() on some numbericAlpha paths</li>
<li>fixed; numbericAlpha path versioning</li>
<li>fixed; setting nested mixed paths #1418</li>
<li>fixed; setting nested objects with null prop #1326</li>
<li>fixed; regression in v3.6 population performance #1426 <a href="https://github.com/vedmalex">vedmalex</a></li>
<li>fixed; read pref typos #1422 <a href="https://github.com/kyano">kyano</a></li>
<li>docs; fix method example</li>
<li>website; update faq</li>
<li>website; add more deep links</li>
<li>website; update poolSize docs</li>
<li>website; add 3.6 release notes</li>
<li>website; note about keepAlive</li>
</ul>

<h1 id="3-6-4-2013-04-03">3.6.4 / 2013-04-03</h1>

<ul>
<li>fixed; +field conflict with $slice #1370</li>
<li>fixed; nested deselection conflict #1333</li>
<li>fixed; RangeError in ValidationError.toString() #1296</li>
<li>fixed; do not save user defined transforms #1415</li>
<li>tests; fix race condition</li>
</ul>

<h1 id="3-6-3-2013-04-02">3.6.3 / 2013-04-02</h1>

<ul>
<li>fixed; setting subdocuments deeply nested fields #1394</li>
<li>fixed; regression: populated streams #1411</li>
<li>docs; mention hooks/validation with findAndModify</li>
<li>docs; mention auth</li>
<li>docs; add more links</li>
<li>examples; add document methods example</li>
<li>website; display &ldquo;see&rdquo; links for properties</li>
<li>website; clean up homepage</li>
</ul>

<h1 id="3-6-2-2013-03-29">3.6.2 / 2013-03-29</h1>

<ul>
<li>fixed; corrupted sub-doc array #1408</li>
<li>fixed; document#update returns a Query #1397</li>
<li>docs; readpref strategy</li>
</ul>

<h1 id="3-6-1-2013-03-27">3.6.1 / 2013-03-27</h1>

<ul>
<li>added; populate support to findAndModify varients #1395</li>
<li>added; text index type to schematypes</li>
<li>expose allowed index types as Schema.indexTypes</li>
<li>fixed; use of <code class="prettyprint">setMaxListeners</code> as path</li>
<li>fixed; regression in node 0.6 on docs with &gt; 10 arrays</li>
<li>fixed; do not alter schema arguments #1364</li>
<li>fixed; subdoc#ownerDocument() #1385</li>
<li>website; change search id</li>
<li>website; add search from google <a href="https://github.com/jackdbernier">jackdbernier</a></li>
<li>website; fix link</li>
<li>website; add 3.5.x docs release</li>
<li>website; fix link</li>
<li>docs; fix geometry</li>
<li>docs; hide internal constructor</li>
<li>docs; aggregation does not cast arguments #1399</li>
<li>docs; querystream options</li>
<li>examples; added for population</li>
</ul>

<h1 id="3-6-0-2013-03-18">3.6.0 / 2013-03-18</h1>

<ul>
<li>changed; cast &#39;true&rsquo;/&#39;false&rsquo; to boolean #1282 <a href="https://github.com/mgrach">mgrach</a></li>
<li>changed; Buffer arrays can now contain nulls</li>
<li>added; QueryStream transform option</li>
<li>added; support for authSource driver option</li>
<li>added; {mongoose,db}.modelNames()</li>
<li>added; $push w/ $slice,$sort support (MongoDB 2.4)</li>
<li>added; hashed index type (MongoDB 2.4)</li>
<li>added; support for mongodb 2.4 geojson (MongoDB 2.4)</li>
<li>added; value at time of validation error</li>
<li>added; support for object literal schemas</li>
<li>added; bufferCommands schema option</li>
<li>added; allow auth option in connections #1360 <a href="https://github.com/geoah">geoah</a></li>
<li>added; performance improvements to populate() <a href="https://github.com/LearnBoost/mongoose/commit/263ece9">263ece9</a></li>
<li>added; allow adding uncasted docs to populated arrays and properties #570</li>
<li>added; doc#populated(path) stores original populated _ids</li>
<li>added; lean population #1260</li>
<li>added; query.populate() now accepts an options object</li>
<li>added; document#populate(opts, callback)</li>
<li>added; Model.populate(docs, opts, callback)</li>
<li>added; support for rich nested path population</li>
<li>added; doc.array.remove(value) subdoc with _id value support #1278</li>
<li>added; optionally allow non-strict sets and updates</li>
<li>added; promises/A+ comformancy with <a href="https://github.com/aheckmann/mpromise">mpromise</a></li>
<li>added; promise#then</li>
<li>added; promise#end</li>
<li>fixed; use of <code class="prettyprint">model</code> as doc property</li>
<li>fixed; lean population #1382</li>
<li>fixed; empty object mixed defaults #1380</li>
<li>fixed; populate w/ deselected _id using string syntax</li>
<li>fixed; attempted save of divergent populated arrays #1334 related</li>
<li>fixed; better error msg when attempting toObject as property name</li>
<li>fixed; non population buffer casting from doc</li>
<li>fixed; setting populated paths #570</li>
<li>fixed; casting when added docs to populated arrays #570</li>
<li>fixed; prohibit updating arrays selected with $elemMatch #1334</li>
<li>fixed; pull / set subdoc combination #1303</li>
<li>fixed; multiple bg index creation #1365</li>
<li>fixed; manual reconnection to single mongod</li>
<li>fixed; Constructor / version exposure #1124</li>
<li>fixed; CastError race condition</li>
<li>fixed; no longer swallowing misuse of subdoc#invalidate()</li>
<li>fixed; utils.clone retains RegExp opts</li>
<li>fixed; population of non-schema property</li>
<li>fixed; allow updating versionKey #1265</li>
<li>fixed; add EventEmitter props to reserved paths #1338</li>
<li>fixed; can now deselect populated doc _ids #1331</li>
<li>fixed; properly pass subtype to Binary in MongooseBuffer</li>
<li>fixed; casting _id from document with non-ObjectId _id</li>
<li>fixed; specifying schema type edge case { path: [{type: &ldquo;String&rdquo; }] }</li>
<li>fixed; typo in schemdate #1329 <a href="https://github.com/jplock">jplock</a></li>
<li>updated; driver to 1.2.14</li>
<li>updated; muri to 0.3.1</li>
<li>updated; mpromise to 0.2.1</li>
<li>updated; mocha 1.8.1</li>
<li>updated; mpath to 0.1.1</li>
<li>deprecated; pluralization will die in 4.x</li>
<li>refactor; rename private methods to something unusable as doc properties</li>
<li>refactor MongooseArray#remove</li>
<li>refactor; move expires index to SchemaDate #1328</li>
<li>refactor; internal document properties #1171 #1184</li>
<li>tests; added</li>
<li>docs; indexes</li>
<li>docs; validation</li>
<li>docs; populate</li>
<li>docs; populate</li>
<li>docs; add note about stream compatibility with node 0.8</li>
<li>docs; fix for private names</li>
<li>docs; Buffer -&gt; mongodb.Binary #1363</li>
<li>docs; auth options</li>
<li>docs; improved</li>
<li>website; update FAQ</li>
<li>website; add more api links</li>
<li>website; add 3.5.x docs to prior releases</li>
<li>website; Change mongoose-types to an active repo <a href="https://github.com/jackdbernier">jackdbernier</a></li>
<li>website; compat with node 0.10</li>
<li>website; add news section</li>
<li>website; use T for generic type</li>
<li>benchmark; make adjustable</li>
</ul>

<h1 id="3-6-0rc1-2013-03-12">3.6.0rc1 / 2013-03-12</h1>

<ul>
<li>refactor; rename private methods to something unusable as doc properties</li>
<li>added; {mongoose,db}.modelNames()</li>
<li>added; $push w/ $slice,$sort support (MongoDB 2.4)</li>
<li>added; hashed index type (MongoDB 2.4)</li>
<li>added; support for mongodb 2.4 geojson (MongoDB 2.4)</li>
<li>added; value at time of validation error</li>
<li>added; support for object literal schemas</li>
<li>added; bufferCommands schema option</li>
<li>added; allow auth option in connections #1360 <a href="https://github.com/geoah">geoah</a></li>
<li>fixed; lean population #1382</li>
<li>fixed; empty object mixed defaults #1380</li>
<li>fixed; populate w/ deselected _id using string syntax</li>
<li>fixed; attempted save of divergent populated arrays #1334 related</li>
<li>fixed; better error msg when attempting toObject as property name</li>
<li>fixed; non population buffer casting from doc</li>
<li>fixed; setting populated paths #570</li>
<li>fixed; casting when added docs to populated arrays #570</li>
<li>fixed; prohibit updating arrays selected with $elemMatch #1334</li>
<li>fixed; pull / set subdoc combination #1303</li>
<li>fixed; multiple bg index creation #1365</li>
<li>fixed; manual reconnection to single mongod</li>
<li>fixed; Constructor / version exposure #1124</li>
<li>fixed; CastError race condition</li>
<li>fixed; no longer swallowing misuse of subdoc#invalidate()</li>
<li>fixed; utils.clone retains RegExp opts</li>
<li>fixed; population of non-schema property</li>
<li>fixed; allow updating versionKey #1265</li>
<li>fixed; add EventEmitter props to reserved paths #1338</li>
<li>fixed; can now deselect populated doc _ids #1331</li>
<li>updated; muri to 0.3.1</li>
<li>updated; driver to 1.2.12</li>
<li>updated; mpromise to 0.2.1</li>
<li>deprecated; pluralization will die in 4.x</li>
<li>docs; Buffer -&gt; mongodb.Binary #1363</li>
<li>docs; auth options</li>
<li>docs; improved</li>
<li>website; add news section</li>
<li>benchmark; make adjustable</li>
</ul>

<h1 id="3-6-0rc0-2013-02-03">3.6.0rc0 / 2013-02-03</h1>

<ul>
<li>changed; cast &#39;true&rsquo;/&#39;false&rsquo; to boolean #1282 <a href="https://github.com/mgrach">mgrach</a></li>
<li>changed; Buffer arrays can now contain nulls</li>
<li>fixed; properly pass subtype to Binary in MongooseBuffer</li>
<li>fixed; casting _id from document with non-ObjectId _id</li>
<li>fixed; specifying schema type edge case { path: [{type: &ldquo;String&rdquo; }] }</li>
<li>fixed; typo in schemdate #1329 <a href="https://github.com/jplock">jplock</a></li>
<li>refactor; move expires index to SchemaDate #1328</li>
<li>refactor; internal document properties #1171 #1184</li>
<li>added; performance improvements to populate() <a href="https://github.com/LearnBoost/mongoose/commit/263ece9">263ece9</a></li>
<li>added; allow adding uncasted docs to populated arrays and properties #570</li>
<li>added; doc#populated(path) stores original populated _ids</li>
<li>added; lean population #1260</li>
<li>added; query.populate() now accepts an options object</li>
<li>added; document#populate(opts, callback)</li>
<li>added; Model.populate(docs, opts, callback)</li>
<li>added; support for rich nested path population</li>
<li>added; doc.array.remove(value) subdoc with _id value support #1278</li>
<li>added; optionally allow non-strict sets and updates</li>
<li>added; promises/A+ comformancy with <a href="https://github.com/aheckmann/mpromise">mpromise</a></li>
<li>added; promise#then</li>
<li>added; promise#end</li>
<li>updated; mocha 1.8.1</li>
<li>updated; muri to 0.3.0</li>
<li>updated; mpath to 0.1.1</li>
<li>updated; docs</li>
</ul>

<h1 id="3-5-16-2013-08-13">3.5.16 / 2013-08-13</h1>

<ul>
<li>updated; driver to 1.3.18</li>
</ul>

<h1 id="3-5-15-2013-07-26">3.5.15 / 2013-07-26</h1>

<ul>
<li>updated; sliced to 0.0.5</li>
<li>updated; driver to 1.3.12</li>
<li>fixed; regression in Query#count() due to driver change</li>
<li>tests; fixed timeouts</li>
<li>tests; handle differing test uris</li>
</ul>

<h1 id="3-5-14-2013-05-15">3.5.14 / 2013-05-15</h1>

<ul>
<li>updated; driver to 1.3.5</li>
<li>fixed; compat w/ Object.create(null) #1484 #1485</li>
<li>fixed; cloning objects missing constructors</li>
<li>fixed; prevent multiple min number validators #1481 <a href="https://github.com/nrako">nrako</a></li>
</ul>

<h1 id="3-5-13-2013-05-09">3.5.13 / 2013-05-09</h1>

<ul>
<li>update driver to 1.3.3</li>
<li>fixed; use of $options in array #1462</li>
</ul>

<h1 id="3-5-12-2013-04-25">3.5.12 / 2013-04-25</h1>

<ul>
<li>updated; driver to 1.3.0</li>
<li>fixed; connection.model should retain options #1458 <a href="https://github.com/vedmalex">vedmalex</a></li>
<li>fixed; read pref typos #1422 <a href="https://github.com/kyano">kyano</a></li>
</ul>

<h1 id="3-5-11-2013-04-03">3.5.11 / 2013-04-03</h1>

<ul>
<li>fixed; +field conflict with $slice #1370</li>
<li>fixed; RangeError in ValidationError.toString() #1296</li>
<li>fixed; nested deselection conflict #1333</li>
<li>remove time from Makefile</li>
</ul>

<h1 id="3-5-10-2013-04-02">3.5.10 / 2013-04-02</h1>

<ul>
<li>fixed; setting subdocuments deeply nested fields #1394</li>
<li>fixed; do not alter schema arguments #1364</li>
</ul>

<h1 id="3-5-9-2013-03-15">3.5.9 / 2013-03-15</h1>

<ul>
<li>updated; driver to 1.2.14</li>
<li>added; support for authSource driver option (mongodb 2.4)</li>
<li>added; QueryStream transform option (node 0.10 helper)</li>
<li>fixed; backport for saving required populated buffers</li>
<li>fixed; pull / set subdoc combination #1303</li>
<li>fixed; multiple bg index creation #1365</li>
<li>test; added for saveable required populated buffers</li>
<li>test; added for #1365</li>
<li>test; add authSource test</li>
</ul>

<h1 id="3-5-8-2013-03-12">3.5.8 / 2013-03-12</h1>

<ul>
<li>added; auth option in connection <a href="https://github.com/geoah">geoah</a></li>
<li>fixed; CastError race condition</li>
<li>docs; add note about stream compatibility with node 0.8</li>
</ul>

<h1 id="3-5-7-2013-02-22">3.5.7 / 2013-02-22</h1>

<ul>
<li>updated; driver to 1.2.13</li>
<li>updated; muri to 0.3.1 #1347</li>
<li>fixed; utils.clone retains RegExp opts #1355</li>
<li>fixed; deepEquals RegExp support</li>
<li>tests; fix a connection test</li>
<li>website; clean up docs <a href="https://github.com/afshinm">afshinm</a></li>
<li>website; update homepage</li>
<li>website; migragtion: emphasize impact of strict docs #1264</li>
</ul>

<h1 id="3-5-6-2013-02-14">3.5.6 / 2013-02-14</h1>

<ul>
<li>updated; driver to 1.2.12</li>
<li>fixed; properly pass Binary subtype</li>
<li>fixed; add EventEmitter props to reserved paths #1338</li>
<li>fixed; use correct node engine version</li>
<li>fixed; display empty docs as {} in log output #953 follow up</li>
<li>improved; &ldquo;bad $within $box argument&rdquo; error message</li>
<li>populate; add unscientific benchmark</li>
<li>website; add stack overflow to help section</li>
<li>website; use better code font #1336 <a href="https://github.com/risseraka">risseraka</a></li>
<li>website; clarify where help is available</li>
<li>website; fix source code links #1272 <a href="https://github.com/floatingLomas">floatingLomas</a></li>
<li>docs; be specific about _id schema option #1103</li>
<li>docs; add ensureIndex error handling example</li>
<li>docs; README</li>
<li>docs; CONTRIBUTING.md</li>
</ul>

<h1 id="3-5-5-2013-01-29">3.5.5 / 2013-01-29</h1>

<ul>
<li>updated; driver to 1.2.11</li>
<li>removed; old node &lt; 0.6x shims</li>
<li>fixed; documents with Buffer _ids equality</li>
<li>fixed; MongooseBuffer properly casts numbers</li>
<li>fixed; reopening closed connection on alt host/port #1287</li>
<li>docs; fixed typo in Readme #1298 <a href="https://github.com/rened">rened</a></li>
<li>docs; fixed typo in migration docs <a href="https://github.com/Prinzhorn">Prinzhorn</a></li>
<li>docs; fixed incorrect annotation in SchemaNumber#min <a href="https://github.com/bilalq">bilalq</a></li>
<li>docs; updated</li>
</ul>

<h1 id="3-5-4-2013-01-07">3.5.4 / 2013-01-07</h1>

<ul>
<li>changed; &ldquo;_pres&rdquo; &amp; &ldquo;_posts&rdquo; are now reserved pathnames #1261</li>
<li>updated; driver to 1.2.8</li>
<li>fixed; exception when reopening a replica set. #1263 <a href="https://github.com/ethankan">ethankan</a></li>
<li>website; updated</li>
</ul>

<h1 id="3-5-3-2012-12-26">3.5.3 / 2012-12-26</h1>

<ul>
<li>added; support for geo object notation #1257</li>
<li>fixed; $within query casting with arrays</li>
<li>fixed; unix domain socket support #1254</li>
<li>updated; driver to 1.2.7</li>
<li>updated; muri to 0.0.5</li>
</ul>

<h1 id="3-5-2-2012-12-17">3.5.2 / 2012-12-17</h1>

<ul>
<li>fixed; using auth with replica sets #1253</li>
</ul>

<h1 id="3-5-1-2012-12-12">3.5.1 / 2012-12-12</h1>

<ul>
<li>fixed; regression when using subdoc with <code class="prettyprint">path</code> as pathname #1245 <a href="https://github.com/daeq">daeq</a></li>
<li>fixed; safer db option checks</li>
<li>updated; driver to 1.2.5</li>
<li>website; add more examples</li>
<li>website; clean up old docs</li>
<li>website; fix prev release urls</li>
<li>docs; clarify streaming with HTTP responses</li>
</ul>

<h1 id="3-5-0-2012-12-10">3.5.0 / 2012-12-10</h1>

<ul>
<li>added; paths to CastErrors #1239</li>
<li>added; support for mongodb connection string spec #1187</li>
<li>added; post validate event</li>
<li>added; Schema#get (to retrieve schema options)</li>
<li>added; VersionError #1071</li>
<li>added; npmignore <a href="https://github.com/hidekiy">hidekiy</a></li>
<li>update; driver to 1.2.3</li>
<li>fixed; stackoverflow in setter #1234</li>
<li>fixed; utils.isObject()</li>
<li>fixed; do not clobber user specified driver writeConcern #1227</li>
<li>fixed; always pass current document to post hooks</li>
<li>fixed; throw error when user attempts to overwrite a model</li>
<li>fixed; connection.model only caches on connection #1209</li>
<li>fixed; respect conn.model() creation when matching global model exists #1209</li>
<li>fixed; passing model name + collection name now always honors collection name</li>
<li>fixed; setting virtual field to an empty object #1154</li>
<li>fixed; subclassed MongooseErrors exposure, now available in mongoose.Error.xxxx</li>
<li>fixed; model.remove() ignoring callback when executed twice <a href="https://github.com/daeq">daeq</a> #1210</li>
<li>docs; add collection option to schema api docs #1222</li>
<li>docs; NOTE about db safe options</li>
<li>docs; add post hooks docs</li>
<li>docs; connection string options</li>
<li>docs; middleware is not executed with Model.remove #1241</li>
<li>docs; {g,s}etter introspection #777</li>
<li>docs; update validation docs</li>
<li>docs; add link to plugins page</li>
<li>docs; clarify error returned by unique indexes #1225</li>
<li>docs; more detail about disabling autoIndex behavior</li>
<li>docs; add homepage section to package (npm docs mongoose)</li>
<li>docs; more detail around collection name pluralization #1193</li>
<li>website; add .important css</li>
<li>website; update models page</li>
<li>website; update getting started</li>
<li>website; update quick start</li>
</ul>

<h1 id="3-4-0-2012-11-10">3.4.0 / 2012-11-10</h1>

<ul>
<li>added; support for generic toJSON/toObject transforms #1160 #1020 #1197</li>
<li>added; doc.set() merge support #1148 <a href="https://github.com/NuORDER">NuORDER</a></li>
<li>added; query#add support #1188 <a href="https://github.com/aleclofabbro">aleclofabbro</a></li>
<li>changed; adding invalid nested paths to non-objects throws 4216f14</li>
<li>changed; fixed; stop invalid function cloning (internal fix)</li>
<li>fixed; add query $and casting support #1180 <a href="https://github.com/anotheri">anotheri</a></li>
<li>fixed; overwriting of query arguments #1176</li>
<li>docs; fix expires examples</li>
<li>docs; transforms</li>
<li>docs; schema <code class="prettyprint">collection</code> option docs <a href="https://github.com/hermanjunge">hermanjunge</a></li>
<li>website; updated</li>
<li>tests; added</li>
</ul>

<h1 id="3-3-1-2012-10-11">3.3.1 / 2012-10-11</h1>

<ul>
<li>fixed; allow goose.connect(uris, dbname, opts) #1144</li>
<li>docs; persist API private checked state across page loads</li>
</ul>

<h1 id="3-3-0-2012-10-10">3.3.0 / 2012-10-10</h1>

<ul>
<li>fixed; passing options as 2nd arg to connect() #1144</li>
<li>fixed; race condition after no-op save #1139</li>
<li>fixed; schema field selection application in findAndModify #1150</li>
<li>fixed; directly setting arrays #1126</li>
<li>updated; driver to 1.1.11</li>
<li>updated; collection pluralization rules <a href="https://github.com/mrickard">mrickard</a></li>
<li>tests; added</li>
<li>docs; updated</li>
</ul>

<h1 id="3-2-2-2012-10-08">3.2.2 / 2012-10-08</h1>

<ul>
<li>updated; driver to 1.1.10 #1143</li>
<li>updated; use sliced 0.0.3</li>
<li>fixed; do not recast embedded docs unnecessarily</li>
<li>fixed; expires schema option helper #1132</li>
<li>fixed; built in string setters #1131</li>
<li>fixed; debug output for Dates/ObjectId properties #1129</li>
<li>docs; fixed Javascript syntax error in example <a href="https://github.com/olalonde">olalonde</a></li>
<li>docs; fix toJSON example #1137</li>
<li>docs; add ensureIndex production notes</li>
<li>docs; fix spelling</li>
<li>docs; add blogposts about v3</li>
<li>website; updated</li>
<li>removed; undocumented inGroupsOf util</li>
<li>tests; added</li>
</ul>

<h1 id="3-2-1-2012-09-28">3.2.1 / 2012-09-28</h1>

<ul>
<li>fixed; remove query batchSize option default of 1000 https://github.com/learnboost/mongoose/commit/3edaa8651</li>
<li>docs; updated</li>
<li>website; updated</li>
</ul>

<h1 id="3-2-0-2012-09-27">3.2.0 / 2012-09-27</h1>

<ul>
<li>added; direct array index assignment with casting support <code class="prettyprint">doc.array.set(index, value)</code></li>
<li>fixed; QueryStream#resume within same tick as pause() #1116</li>
<li>fixed; default value validatation #1109</li>
<li>fixed; array splice() not casting #1123</li>
<li>fixed; default array construction edge case #1108</li>
<li>fixed; query casting for inequalities in arrays #1101 <a href="https://github.com/dpatti">dpatti</a></li>
<li>tests; added</li>
<li>website; more documentation</li>
<li>website; fixed layout issue #1111 <a href="https://github.com/SlashmanX">SlashmanX</a></li>
<li>website; refactored <a href="https://github.com/guille">guille</a></li>
</ul>

<h1 id="3-1-2-2012-09-10">3.1.2 / 2012-09-10</h1>

<ul>
<li>added; ReadPreferrence schema option #1097</li>
<li>updated; driver to 1.1.7</li>
<li>updated; default query batchSize to 1000</li>
<li>fixed; we now cast the mapReduce query option #1095</li>
<li>fixed; $elemMatch+$in with field selection #1091</li>
<li>fixed; properly cast $elemMatch+$in conditions #1100</li>
<li>fixed; default field application of subdocs #1027</li>
<li>fixed; querystream prematurely dying #1092</li>
<li>fixed; querystream never resumes when paused at getMore boundries #1092</li>
<li>fixed; querystream occasionally emits data events after destroy #1092</li>
<li>fixed; remove unnecessary ObjectId creation in querystream</li>
<li>fixed; allow ne(boolean) again #1093</li>
<li>docs; add populate/field selection syntax notes</li>
<li>docs; add toObject/toJSON options detail</li>
<li>docs; <code class="prettyprint">read</code> schema option</li>
</ul>

<h1 id="3-1-1-2012-08-31">3.1.1 / 2012-08-31</h1>

<ul>
<li>updated; driver to 1.1.6</li>
</ul>

<h1 id="3-1-0-2012-08-29">3.1.0 / 2012-08-29</h1>

<ul>
<li>changed; fixed; directly setting nested objects now overwrites entire object (previously incorrectly merged them)</li>
<li>added; read pref support (mongodb 2.2) 205a709c</li>
<li>added; aggregate support (mongodb 2.2) f3a5bd3d</li>
<li>added; virtual {g,s}etter introspection (#1070)</li>
<li>updated; docs <a href="https://github.com/brettz9">brettz9</a></li>
<li>updated; driver to 1.1.5</li>
<li>fixed; retain virtual setter return values (#1069)</li>
</ul>

<h1 id="3-0-3-2012-08-23">3.0.3 / 2012-08-23</h1>

<ul>
<li>fixed; use of nested paths beginning w/ numbers #1062</li>
<li>fixed; query population edge case #1053 #1055 <a href="https://github.com/jfremy">jfremy</a></li>
<li>fixed; simultaneous top and sub level array modifications #1073</li>
<li>added; id and _id schema option aliases + tests</li>
<li>improve debug formatting to allow copy/paste logged queries into mongo shell <a href="https://github.com/eknkc">eknkc</a></li>
<li>docs</li>
</ul>

<h1 id="3-0-2-2012-08-17">3.0.2 / 2012-08-17</h1>

<ul>
<li>added; missing support for v3 sort/select syntax to findAndModify helpers (#1058)</li>
<li>fixed; replset fullsetup event emission</li>
<li>fixed; reconnected event for replsets</li>
<li>fixed; server reconnection setting discovery</li>
<li>fixed; compat with non-schema path props using positional notation (#1048)</li>
<li>fixed; setter/casting order (#665)</li>
<li>docs; updated</li>
</ul>

<h1 id="3-0-1-2012-08-11">3.0.1 / 2012-08-11</h1>

<ul>
<li>fixed; throw Error on bad validators (1044)</li>
<li>fixed; typo in EmbeddedDocument#parentArray [lackac]</li>
<li>fixed; repair mongoose.SchemaTypes alias</li>
<li>updated; docs</li>
</ul>

<h1 id="3-0-0-2012-08-07">3.0.0 / 2012-08-07</h1>

<ul>
<li>removed; old subdocument#commit method</li>
<li>fixed; setting arrays of matching docs [6924cbc2]</li>
<li>fixed; doc!remove event now emits in save order as save for consistency</li>
<li>fixed; pre-save hooks no longer fire on subdocuments when validation fails</li>
<li>added; subdoc#parent() and subdoc#parentArray() to access subdocument parent objects</li>
<li>added; query#lean() helper</li>
</ul>

<h1 id="3-0-0rc0-2012-08-01">3.0.0rc0 / 2012-08-01</h1>

<ul>
<li>fixed; allow subdoc literal declarations containing &ldquo;type&rdquo; pathname (#993)</li>
<li>fixed; unsetting a default array (#758)</li>
<li>fixed; boolean $in queries (#998)</li>
<li>fixed; allow use of <code class="prettyprint">options</code> as a pathname (#529)</li>
<li>fixed; <code class="prettyprint">model</code> is again a permitted schema path name</li>
<li>fixed; field selection option on subdocs (#1022)</li>
<li>fixed; handle another edge case with subdoc saving (#975)</li>
<li>added; emit save err on model if listening</li>
<li>added; MongoDB TTL collection support (#1006)</li>
<li>added; $center options support</li>
<li>added; $nearSphere and $polygon support</li>
<li>updated; driver version to 1.1.2</li>
</ul>

<h1 id="3-0-0alpha2-2012-07-18">3.0.0alpha2 / 2012-07-18</h1>

<ul>
<li>changed; index errors are now emitted on their model and passed to an optional callback (#984)</li>
<li>fixed; specifying index along with sparse/unique option no longer overwrites (#1004)</li>
<li>fixed; never swallow connection errors (#618)</li>
<li>fixed; creating object from model with emded object no longer overwrites defaults <a href="#859">achurkin</a></li>
<li>fixed; stop needless validation of unchanged/unselected fields (#891)</li>
<li>fixed; document#equals behavior of objectids (#974)</li>
<li>fixed; honor the minimize schema option (#978)</li>
<li>fixed; provide helpful error msgs when reserved schema path is used (#928)</li>
<li>fixed; callback to conn#disconnect is optional (#875)</li>
<li>fixed; handle missing protocols in connection urls (#987)</li>
<li>fixed; validate args to query#where (#969)</li>
<li>fixed; saving modified/removed subdocs (#975)</li>
<li>fixed; update with $pull from Mixed array (#735)</li>
<li>fixed; error with null shard key value</li>
<li>fixed; allow unsetting enums (#967)</li>
<li>added; support for manual index creation (#984)</li>
<li>added; support for disabled auto-indexing (#984)</li>
<li>added; support for preserving MongooseArray#sort changes (#752)</li>
<li>added; emit state change events on connection</li>
<li>added; support for specifying BSON subtype in MongooseBuffer#toObject [jcrugzz]</li>
<li>added; support for disabled versioning (#977)</li>
<li>added; implicit &ldquo;new&rdquo; support for models and Schemas</li>
</ul>

<h1 id="3-0-0alpha1-2012-06-15">3.0.0alpha1 / 2012-06-15</h1>

<ul>
<li>removed; doc#commit (use doc#markModified)</li>
<li>removed; doc.modified getter (#950)</li>
<li>removed; mongoose{connectSet,createSetConnection}. use connect,createConnection instead</li>
<li>removed; query alias methods 1149804c</li>
<li>removed; MongooseNumber</li>
<li>changed; now creating indexes in background by default</li>
<li>changed; strict mode now enabled by default (#952)</li>
<li>changed; doc#modifiedPaths is now a method (#950)</li>
<li>changed; getters no longer cast (#820); casting happens during set</li>
<li>fixed; no need to pass updateArg to findOneAndUpdate (#931)</li>
<li>fixed: utils.merge bug when merging nested non-objects. [treygriffith]</li>
<li>fixed; strict:throw should produce errors in findAndModify (#963)</li>
<li>fixed; findAndUpdate no longer overwrites document (#962)</li>
<li>fixed; setting default DocumentArrays (#953)</li>
<li>fixed; selection of _id with schema deselection (#954)</li>
<li>fixed; ensure promise#error emits instanceof Error</li>
<li>fixed; CursorStream: No stack overflow on any size result (#929)</li>
<li>fixed; doc#remove now passes safe options</li>
<li>fixed; invalid use of $set during $pop</li>
<li>fixed; array#{$pop,$shift} mirror MongoDB behavior</li>
<li>fixed; no longer test non-required vals in string match (#934)</li>
<li>fixed; edge case with doc#inspect</li>
<li>fixed; setter order (#665)</li>
<li>fixed; setting invalid paths in strict mode (#916)</li>
<li>fixed; handle docs without id in DocumentArray#id method (#897)</li>
<li>fixed; do not save virtuals during model.update (#894)</li>
<li>fixed; sub doc toObject virtuals application (#889)</li>
<li>fixed; MongooseArray#pull of ObjectId (#881)</li>
<li>fixed; handle passing db name with any repl set string</li>
<li>fixed; default application of selected fields (#870)</li>
<li>fixed; subdoc paths reported in validation errors (#725)</li>
<li>fixed; incorrect reported num of affected docs in update ops (#862)</li>
<li>fixed; connection assignment in Model#model (#853)</li>
<li>fixed; stringifying arrays of docs (#852)</li>
<li>fixed; modifying subdoc and parent array works (#842)</li>
<li>fixed; passing undefined to next hook (#785)</li>
<li>fixed; Query#{update,remove}() works without callbacks (#788)</li>
<li>fixed; set/updating nested objects by parent pathname (#843)</li>
<li>fixed; allow null in number arrays (#840)</li>
<li>fixed; isNew on sub doc after insertion error (#837)</li>
<li>fixed; if an insert fails, set isNew back to false [boutell]</li>
<li>fixed; isSelected when only _id is selected (#730)</li>
<li>fixed; setting an unset default value (#742)</li>
<li>fixed; query#sort error messaging (#671)</li>
<li>fixed; support for passing $options with $regex</li>
<li>added; array of object literal notation in schema creates DocumentArrays</li>
<li>added; gt,gte,lt,lte query support for arrays (#902)</li>
<li>added; capped collection support (#938)</li>
<li>added; document versioning support</li>
<li>added; inclusion of deselected schema path (#786)</li>
<li>added; non-atomic array#pop</li>
<li>added; EmbeddedDocument constructor is now exposed in DocArray#create 7cf8beec</li>
<li>added; mapReduce support (#678)</li>
<li>added; support for a configurable minimize option #to{Object,JSON}(option) (#848)</li>
<li>added; support for strict: <code class="prettyprint">throws</code> [regality]</li>
<li>added; support for named schema types (#795)</li>
<li>added; to{Object,JSON} schema options (#805)</li>
<li>added; findByIdAnd{Update,Remove}()</li>
<li>added; findOneAnd{Update,Remove}()</li>
<li>added; query.setOptions()</li>
<li>added; instance.update() (#794)</li>
<li>added; support specifying model in populate() [DanielBaulig]</li>
<li>added; <code class="prettyprint">lean</code> query option [gitfy]</li>
<li>added; multi-atomic support to MongooseArray#nonAtomicPush</li>
<li>added; support for $set + other $atomic ops on single array</li>
<li>added; tests</li>
<li>updated; driver to 1.0.2</li>
<li>updated; query.sort() syntax to mirror query.select()</li>
<li>updated; clearer cast error msg for array numbers</li>
<li>updated; docs</li>
<li>updated; doc.clone 3x faster (#950)</li>
<li>updated; only create _id if necessary (#950)</li>
</ul>

<h1 id="2-7-3-2012-08-01">2.7.3 / 2012-08-01</h1>

<ul>
<li>fixed; boolean $in queries (#998)</li>
<li>fixed field selection option on subdocs (#1022)</li>
</ul>

<h1 id="2-7-2-2012-07-18">2.7.2 / 2012-07-18</h1>

<ul>
<li>fixed; callback to conn#disconnect is optional (#875)</li>
<li>fixed; handle missing protocols in connection urls (#987)</li>
<li>fixed; saving modified/removed subdocs (#975)</li>
<li>updated; tests</li>
</ul>

<h1 id="2-7-1-2012-06-26">2.7.1 / 2012-06-26</h1>

<ul>
<li>fixed; sharding: when a document holds a null as a value of the shard key</li>
<li>fixed; update() using $pull on an array of Mixed (gh-735)</li>
<li>deprecated; MongooseNumber#{inc, increment, decrement} methods</li>
<li>tests; now using mocha</li>
</ul>

<h1 id="2-7-0-2012-06-14">2.7.0 / 2012-06-14</h1>

<ul>
<li>added; deprecation warnings to methods being removed in 3.x</li>
</ul>

<h1 id="2-6-8-2012-06-14">2.6.8 / 2012-06-14</h1>

<ul>
<li>fixed; edge case when using &#39;options&rsquo; as a path name (#961)</li>
</ul>

<h1 id="2-6-7-2012-06-08">2.6.7 / 2012-06-08</h1>

<ul>
<li>fixed; ensure promise#error always emits instanceof Error</li>
<li>fixed; selection of _id w/ another excluded path (#954)</li>
<li>fixed; setting default DocumentArrays (#953)</li>
</ul>

<h1 id="2-6-6-2012-06-06">2.6.6 / 2012-06-06</h1>

<ul>
<li>fixed; stack overflow in query stream with large result sets (#929)</li>
<li>added; $gt, $gte, $lt, $lte support to arrays (#902)</li>
<li>fixed; pass option <code class="prettyprint">safe</code> along to doc#remove() calls</li>
</ul>

<h1 id="2-6-5-2012-05-24">2.6.5 / 2012-05-24</h1>

<ul>
<li>fixed; do not save virtuals in Model.update (#894)</li>
<li>added; missing $ prefixed query aliases (going away in 3.x) (#884) [timoxley]</li>
<li>fixed; setting invalid paths in strict mode (#916)</li>
<li>fixed; resetting isNew after insert failure (#837) [boutell]</li>
</ul>

<h1 id="2-6-4-2012-05-15">2.6.4 / 2012-05-15</h1>

<ul>
<li>updated; backport string regex $options to 2.x</li>
<li>updated; use driver 1.0.2 (performance improvements) (#914)</li>
<li>fixed; calling MongooseDocumentArray#id when the doc has no _id (#897)</li>
</ul>

<h1 id="2-6-3-2012-05-03">2.6.3 / 2012-05-03</h1>

<ul>
<li>fixed; repl-set connectivity issues during failover on MongoDB 2.0.1</li>
<li>updated; driver to 1.0.0</li>
<li>fixed; virtuals application of subdocs when using toObject({ virtuals: true }) (#889)</li>
<li>fixed; MongooseArray#pull of ObjectId correctly updates the array itself (#881)</li>
</ul>

<h1 id="2-6-2-2012-04-30">2.6.2 / 2012-04-30</h1>

<ul>
<li>fixed; default field application of selected fields (#870)</li>
</ul>

<h1 id="2-6-1-2012-04-30">2.6.1 / 2012-04-30</h1>

<ul>
<li>fixed; connection assignment in mongoose#model (#853, #877)</li>
<li>fixed; incorrect reported num of affected docs in update ops (#862)</li>
</ul>

<h1 id="2-6-0-2012-04-19">2.6.0 / 2012-04-19</h1>

<ul>
<li>updated; hooks.js to 0.2.1</li>
<li>fixed; issue with passing undefined to a hook callback. thanks to [chrisleishman] for reporting.</li>
<li>fixed; updating/setting nested objects in strict schemas (#843) as reported by [kof]</li>
<li>fixed; Query#{update,remove}() work without callbacks again (#788)</li>
<li>fixed; modifying subdoc along with parent array $atomic op (#842)</li>
</ul>

<h1 id="2-5-14-2012-04-13">2.5.14 / 2012-04-13</h1>

<ul>
<li>fixed; setting an unset default value (#742)</li>
<li>fixed; doc.isSelected(otherpath) when only _id is selected (#730)</li>
<li>updated; docs</li>
</ul>

<h1 id="2-5-13-2012-03-22">2.5.13 / 2012-03-22</h1>

<ul>
<li>fixed; failing validation of unselected required paths (#730,#713)</li>
<li>fixed; emitting connection error when only one listener (#759)</li>
<li>fixed; MongooseArray#splice was not returning values (#784) [chrisleishman]</li>
</ul>

<h1 id="2-5-12-2012-03-21">2.5.12 / 2012-03-21</h1>

<ul>
<li>fixed; honor the <code class="prettyprint">safe</code> option in all ensureIndex calls</li>
<li>updated; node-mongodb-native driver to 0.9.9-7</li>
</ul>

<h1 id="2-5-11-2012-03-15">2.5.11 / 2012-03-15</h1>

<ul>
<li>added; introspection for getters/setters (#745)</li>
<li>updated; node-mongodb-driver to 0.9.9-5</li>
<li>added; tailable method to Query (#769) [holic]</li>
<li>fixed; Number min/max validation of null (#764) [btamas]</li>
<li>added; more flexible user/password connection options (#738) [KarneAsada]</li>
</ul>

<h1 id="2-5-10-2012-03-06">2.5.10 / 2012-03-06</h1>

<ul>
<li>updated; node-mongodb-native driver to 0.9.9-4</li>
<li>added; Query#comment()</li>
<li>fixed; allow unsetting arrays</li>
<li>fixed; hooking the set method of subdocuments (#746)</li>
<li>fixed; edge case in hooks</li>
<li>fixed; allow $id and $ref in queries (fixes compatibility with mongoose-dbref) (#749) [richtera]</li>
<li>added; default path selection to SchemaTypes</li>
</ul>

<h1 id="2-5-9-2012-02-22">2.5.9 / 2012-02-22</h1>

<ul>
<li>fixed; properly cast nested atomic update operators for sub-documents</li>
</ul>

<h1 id="2-5-8-2012-02-21">2.5.8 / 2012-02-21</h1>

<ul>
<li>added; post &#39;remove&rsquo; middleware includes model that was removed (#729) [timoxley]</li>
</ul>

<h1 id="2-5-7-2012-02-09">2.5.7 / 2012-02-09</h1>

<ul>
<li>fixed; RegExp validators on node &gt;= v0.6.x</li>
</ul>

<h1 id="2-5-6-2012-02-09">2.5.6 / 2012-02-09</h1>

<ul>
<li>fixed; emit errors returned from db.collection() on the connection (were being swallowed)</li>
<li>added; can add multiple validators in your schema at once (#718) [diogogmt]</li>
<li>fixed; strict embedded documents (#717)</li>
<li>updated; docs [niemyjski]</li>
<li>added; pass number of affected docs back in model.update/save</li>
</ul>

<h1 id="2-5-5-2012-02-03">2.5.5 / 2012-02-03</h1>

<ul>
<li>fixed; RangeError: maximum call stack exceed error when removing docs with Number _id (#714)</li>
</ul>

<h1 id="2-5-4-2012-02-03">2.5.4 / 2012-02-03</h1>

<ul>
<li>fixed; RangeError: maximum call stack exceed error (#714)</li>
</ul>

<h1 id="2-5-3-2012-02-02">2.5.3 / 2012-02-02</h1>

<ul>
<li>added; doc#isSelected(path)</li>
<li>added; query#equals()</li>
<li>added; beta sharding support</li>
<li>added; more descript error msgs (#700) [obeleh]</li>
<li>added; document.modifiedPaths (#709) [ljharb]</li>
<li>fixed; only functions can be added as getters/setters (#707,704) [ljharb]</li>
</ul>

<h1 id="2-5-2-2012-01-30">2.5.2 / 2012-01-30</h1>

<ul>
<li>fixed; rollback -native driver to 0.9.7-3-5 (was causing timeouts and other replica set weirdness)</li>
<li>deprecated; MongooseNumber (will be moved to a separate repo for 3.x)</li>
<li>added; init event is emitted on schemas</li>
</ul>

<h1 id="2-5-1-2012-01-27">2.5.1 / 2012-01-27</h1>

<ul>
<li>fixed; honor strict schemas in Model.update (#699)</li>
</ul>

<h1 id="2-5-0-2012-01-26">2.5.0 / 2012-01-26</h1>

<ul>
<li>added; doc.toJSON calls toJSON on embedded docs when exists [jerem]</li>
<li>added; populate support for refs of type Buffer (#686) [jerem]</li>
<li>added; $all support for ObjectIds and Dates (#690)</li>
<li>fixed; virtual setter calling on instantiation when strict: true (#682) [hunterloftis]</li>
<li>fixed; doc construction triggering getters (#685)</li>
<li>fixed; MongooseBuffer check in deepEquals (#688)</li>
<li>fixed; range error when using Number _ids with <code class="prettyprint">instance.save()</code> (#691)</li>
<li>fixed; isNew on embedded docs edge case (#680)</li>
<li>updated; driver to 0.9.8-3</li>
<li>updated; expose <code class="prettyprint">model()</code> method within static methods</li>
</ul>

<h1 id="2-4-10-2012-01-10">2.4.10 / 2012-01-10</h1>

<ul>
<li>added; optional getter application in .toObject()/.toJSON() (#412)</li>
<li>fixed; nested $operators in $all queries (#670)</li>
<li>added; $nor support (#674)</li>
<li>fixed; bug when adding nested schema (#662) [paulwe]</li>
</ul>

<h1 id="2-4-9-2012-01-04">2.4.9 / 2012-01-04</h1>

<ul>
<li>updated; driver to 0.9.7-3-5 to fix Linux performance degradation on some boxes</li>
</ul>

<h1 id="2-4-8-2011-12-22">2.4.8 / 2011-12-22</h1>

<ul>
<li>updated; bump -native to 0.9.7.2-5</li>
<li>fixed; compatibility with date.js (#646) [chrisleishman]</li>
<li>changed; undocumented schema &ldquo;lax&rdquo; option to &ldquo;strict&rdquo;</li>
<li>fixed; default value population for strict schemas</li>
<li>updated; the nextTick helper for small performance gain. 1bee2a2</li>
</ul>

<h1 id="2-4-7-2011-12-16">2.4.7 / 2011-12-16</h1>

<ul>
<li>fixed; bug in 2.4.6 with path setting</li>
<li>updated; bump -native to 0.9.7.2-1</li>
<li>added; strict schema option [nw]</li>
</ul>

<h1 id="2-4-6-2011-12-16">2.4.6 / 2011-12-16</h1>

<ul>
<li>fixed; conflicting mods on update bug [sirlantis]</li>
<li>improved; doc.id getter performance</li>
</ul>

<h1 id="2-4-5-2011-12-14">2.4.5 / 2011-12-14</h1>

<ul>
<li>fixed; bad MongooseArray behavior in 2.4.2 - 2.4.4</li>
</ul>

<h1 id="2-4-4-2011-12-14">2.4.4 / 2011-12-14</h1>

<ul>
<li>fixed; MongooseArray#doAtomics throwing after sliced</li>
</ul>

<h1 id="2-4-3-2011-12-14">2.4.3 / 2011-12-14</h1>

<ul>
<li>updated; system.profile schema for MongoDB 2x</li>
</ul>

<h1 id="2-4-2-2011-12-12">2.4.2 / 2011-12-12</h1>

<ul>
<li>fixed; partially populating multiple children of subdocs (#639) [kenpratt]</li>
<li>fixed; allow Update of numbers to null (#640) [jerem]</li>
</ul>

<h1 id="2-4-1-2011-12-02">2.4.1 / 2011-12-02</h1>

<ul>
<li>added; options support for populate() queries</li>
<li>updated; -native driver to 0.9.7-1.4</li>
</ul>

<h1 id="2-4-0-2011-11-29">2.4.0 / 2011-11-29</h1>

<ul>
<li>added; QueryStreams (#614)</li>
<li>added; debug print mode for development</li>
<li>added; $within support to Array queries (#586) [ggoodale]</li>
<li>added; $centerSphere query support</li>
<li>fixed; $within support</li>
<li>added; $unset is now used when setting a path to undefined (#519)</li>
<li>added; query#batchSize support</li>
<li>updated; docs</li>
<li>updated; -native driver to 0.9.7-1.3 (provides Windows support)</li>
</ul>

<h1 id="2-3-13-2011-11-15">2.3.13 / 2011-11-15</h1>

<ul>
<li>fixed; required validation for Refs (#612) [ded]</li>
<li>added; $nearSphere support for Arrays (#610)</li>
</ul>

<h1 id="2-3-12-2011-11-09">2.3.12 / 2011-11-09</h1>

<ul>
<li>fixed; regression, objects passed to Model.update should not be changed (#605)</li>
<li>fixed; regression, empty Model.update should not be executed</li>
</ul>

<h1 id="2-3-11-2011-11-08">2.3.11 / 2011-11-08</h1>

<ul>
<li>fixed; using $elemMatch on arrays of Mixed types (#591)</li>
<li>fixed; allow using $regex when querying Arrays (#599)</li>
<li>fixed; calling Model.update with no atomic keys (#602)</li>
</ul>

<h1 id="2-3-10-2011-11-05">2.3.10 / 2011-11-05</h1>

<ul>
<li>fixed; model.update casting for nested paths works (#542)</li>
</ul>

<h1 id="2-3-9-2011-11-04">2.3.9 / 2011-11-04</h1>

<ul>
<li>fixed; deepEquals check for MongooseArray returned false</li>
<li>fixed; reset modified flags of embedded docs after save [gitfy]</li>
<li>fixed; setting embedded doc with identical values no longer marks modified [gitfy]</li>
<li>updated; -native driver to 0.9.6.23 [mlazarov]</li>
<li>fixed; Model.update casting (#542, #545, #479)</li>
<li>fixed; populated refs no longer fail required validators (#577)</li>
<li>fixed; populating refs of objects with custom ids works</li>
<li>fixed; $pop &amp; $unset work with Model.update (#574)</li>
<li>added; more helpful debugging message for Schema#add (#578)</li>
<li>fixed; accessing .id when no _id exists now returns null (#590)</li>
</ul>

<h1 id="2-3-8-2011-10-26">2.3.8 / 2011-10-26</h1>

<ul>
<li>added; callback to query#findOne is now optional (#581)</li>
</ul>

<h1 id="2-3-7-2011-10-24">2.3.7 / 2011-10-24</h1>

<ul>
<li>fixed; wrapped save/remove callbacks in nextTick to mitigate -native swallowing thrown errors</li>
</ul>

<h1 id="2-3-6-2011-10-21">2.3.6 / 2011-10-21</h1>

<ul>
<li>fixed; exclusion of embedded doc _id from query results (#541)</li>
</ul>

<h1 id="2-3-5-2011-10-19">2.3.5 / 2011-10-19</h1>

<ul>
<li>fixed; calling queries without passing a callback works (#569)</li>
<li>fixed; populate() works with String and Number _ids too (#568)</li>
</ul>

<h1 id="2-3-4-2011-10-18">2.3.4 / 2011-10-18</h1>

<ul>
<li>added; Model.create now accepts an array as a first arg</li>
<li>fixed; calling toObject on a DocumentArray with nulls no longer throws</li>
<li>fixed; calling inspect on a DocumentArray with nulls no longer throws</li>
<li>added; MongooseArray#unshift support</li>
<li>fixed; save hooks now fire on embedded documents <a href="#456">gitfy</a></li>
<li>updated; -native driver to 0.9.6-22</li>
<li>fixed; correctly pass $addToSet op instead of $push</li>
<li>fixed; $addToSet properly detects dates</li>
<li>fixed; $addToSet with multiple items works</li>
<li>updated; better node 0.6 Buffer support</li>
</ul>

<h1 id="2-3-3-2011-10-12">2.3.3 / 2011-10-12</h1>

<ul>
<li>fixed; population conditions in multi-query settings <a href="#563">vedmalex</a></li>
<li>fixed; now compatible with Node v0.5.x</li>
</ul>

<h1 id="2-3-2-2011-10-11">2.3.2 / 2011-10-11</h1>

<ul>
<li>fixed; population of null subdoc properties no longer hangs (#561)</li>
</ul>

<h1 id="2-3-1-2011-10-10">2.3.1 / 2011-10-10</h1>

<ul>
<li>added; support for Query filters to populate() [eneko]</li>
<li>fixed; querying with number no longer crashes mongodb (#555) [jlbyrey]</li>
<li>updated; version of -native driver to 0.9.6-21</li>
<li>fixed; prevent query callbacks that throw errors from corrupting -native connection state</li>
</ul>

<h1 id="2-3-0-2011-10-04">2.3.0 / 2011-10-04</h1>

<ul>
<li>fixed; nulls as default values for Boolean now works as expected</li>
<li>updated; version of -native driver to 0.9.6-20</li>
</ul>

<h1 id="2-2-4-2011-10-03">2.2.4 / 2011-10-03</h1>

<ul>
<li>fixed; populate() works when returned array contains undefined/nulls</li>
</ul>

<h1 id="2-2-3-2011-09-29">2.2.3 / 2011-09-29</h1>

<ul>
<li>updated; version of -native driver to 0.9.6-19</li>
</ul>

<h1 id="2-2-2-2011-09-28">2.2.2 / 2011-09-28</h1>

<ul>
<li>added; $regex support to String [davidandrewcope]</li>
<li>added; support for other contexts like repl etc (#535)</li>
<li>fixed; clear modified state properly after saving</li>
<li>added; $addToSet support to Array</li>
</ul>

<h1 id="2-2-1-2011-09-22">2.2.1 / 2011-09-22</h1>

<ul>
<li>more descript error when casting undefined to string</li>
<li>updated; version of -native driver to 0.9.6-18</li>
</ul>

<h1 id="2-2-0-2011-09-22">2.2.0 / 2011-09-22</h1>

<ul>
<li>fixed; maxListeners warning on schemas with many arrays (#530)</li>
<li>changed; return / apply defaults based on fields selected in query (#423)</li>
<li>fixed; correctly detect Mixed types within schema arrays (#532)</li>
</ul>

<h1 id="2-1-4-2011-09-20">2.1.4 / 2011-09-20</h1>

<ul>
<li>fixed; new private methods that stomped on users code</li>
<li>changed; finished removing old &ldquo;compat&rdquo; support which did nothing</li>
</ul>

<h1 id="2-1-3-2011-09-16">2.1.3 / 2011-09-16</h1>

<ul>
<li>updated; version of -native driver to 0.9.6-15</li>
<li>added; emit <code class="prettyprint">error</code> on connection when open fails [edwardhotchkiss]</li>
<li>added; index support to Buffers (thanks justmoon for helping track this down)</li>
<li>fixed; passing collection name via schema in conn.model() now works (thanks vedmalex for reporting)</li>
</ul>

<h1 id="2-1-2-2011-09-07">2.1.2 / 2011-09-07</h1>

<ul>
<li>fixed; Query#find with no args no longer throws</li>
</ul>

<h1 id="2-1-1-2011-09-07">2.1.1 / 2011-09-07</h1>

<ul>
<li>added; support Model.count(fn)</li>
<li>fixed; compatibility with node &gt;=0.4.0 &lt; 0.4.3</li>
<li>added; pass model.options.safe through with .save() so w:2, wtimeout:5000 options work [andrewjstone]</li>
<li>added; support for $type queries</li>
<li>added; support for Query#or</li>
<li>added; more tests</li>
<li>optimized populate queries</li>
</ul>

<h1 id="2-1-0-2011-09-01">2.1.0 / 2011-09-01</h1>

<ul>
<li>changed; document#validate is a public method</li>
<li>fixed; setting number to same value no longer marks modified (#476) [gitfy]</li>
<li>fixed; Buffers shouldn&rsquo;t have default vals</li>
<li>added; allow specifying collection name in schema (#470) [ixti]</li>
<li>fixed; reset modified paths and atomics after saved (#459)</li>
<li>fixed; set isNew on embedded docs to false after save</li>
<li>fixed; use self to ensure proper scope of options in doOpenSet (#483) [andrewjstone]</li>
</ul>

<h1 id="2-0-4-2011-08-29">2.0.4 / 2011-08-29</h1>

<ul>
<li>Fixed; Only send the depopulated ObjectId instead of the entire doc on save (DBRefs)</li>
<li>Fixed; Properly cast nested array values in Model.update (the data was stored in Mongo incorrectly but recast on document fetch was &ldquo;fixing&rdquo; it)</li>
</ul>

<h1 id="2-0-3-2011-08-28">2.0.3 / 2011-08-28</h1>

<ul>
<li>Fixed; manipulating a populated array no longer causes infinite loop in BSON serializer during save (#477)</li>
<li>Fixed; populating an empty array no longer hangs foreeeeeeeever (#481)</li>
</ul>

<h1 id="2-0-2-2011-08-25">2.0.2 / 2011-08-25</h1>

<ul>
<li>Fixed; Maintain query option key order (fixes &#39;bad hint&rsquo; error from compound query hints)</li>
</ul>

<h1 id="2-0-1-2011-08-25">2.0.1 / 2011-08-25</h1>

<ul>
<li>Fixed; do not over-write the doc when no valide props exist in Model.update (#473)</li>
</ul>

<h1 id="2-0-0-2011-08-24">2.0.0 / 2011-08-24</h1>

<ul>
<li>Added; support for Buffers [justmoon]</li>
<li>Changed; improved error handling [maelstrom]</li>
<li>Removed: unused utils.erase</li>
<li>Fixed; support for passing other context object into Schemas (#234) [Sija]</li>
<li>Fixed; getters are no longer circular refs to themselves (#366)</li>
<li>Removed; unused compat.js</li>
<li>Fixed; getter/setter scopes are set properly</li>
<li>Changed; made several private properties more obvious by prefixing _</li>
<li>Added; DBRef support [guille]</li>
<li>Changed; removed support for multiple collection names per model</li>
<li>Fixed; no longer applying setters when document returned from db</li>
<li>Changed; default auto_reconnect to true</li>
<li>Changed; Query#bind no longer clones the query</li>
<li>Fixed; Model.update now accepts $pull, $inc and friends (#404)</li>
<li>Added; virtual type option support [nw]</li>
</ul>

<h1 id="1-8-4-2011-08-21">1.8.4 / 2011-08-21</h1>

<ul>
<li>Fixed; validation bug when instantiated with non-schema properties (#464) [jmreidy]</li>
</ul>

<h1 id="1-8-3-2011-08-19">1.8.3 / 2011-08-19</h1>

<ul>
<li>Fixed; regression in connection#open [jshaw86]</li>
</ul>

<h1 id="1-8-2-2011-08-17">1.8.2 / 2011-08-17</h1>

<ul>
<li>fixed; reset connection.readyState after failure [tomseago]</li>
<li>fixed; can now query positionally for non-embedded docs (arrays of numbers/strings etc)</li>
<li>fixed; embedded document query casting</li>
<li>added; support for passing options to node-mongo-native db, server, and replsetserver [tomseago]</li>
</ul>

<h1 id="1-8-1-2011-08-10">1.8.1 / 2011-08-10</h1>

<ul>
<li>fixed; ObjectIds were always marked modified</li>
<li>fixed; can now query using document instances</li>
<li>fixed; can now query/update using documents with subdocs</li>
</ul>

<h1 id="1-8-0-2011-08-04">1.8.0 / 2011-08-04</h1>

<ul>
<li>fixed; can now use $all with String and Number</li>
<li>fixed; can query subdoc array with $ne: null</li>
<li>fixed; instance.subdocs#id now works with custom _ids</li>
<li>fixed; do not apply setters when doc returned from db (change in bad behavior)</li>
</ul>

<h1 id="1-7-4-2011-07-25">1.7.4 / 2011-07-25</h1>

<ul>
<li>fixed; sparse now a valid seperate schema option</li>
<li>fixed; now catching cast errors in queries</li>
<li>fixed; calling new Schema with object created in vm.runInNewContext now works (#384) [Sija]</li>
<li>fixed; String enum was disallowing null</li>
<li>fixed; Find by nested document _id now works (#389)</li>
</ul>

<h1 id="1-7-3-2011-07-16">1.7.3 / 2011-07-16</h1>

<ul>
<li>fixed; MongooseArray#indexOf now works with ObjectIds</li>
<li>fixed; validation scope now set properly (#418)</li>
<li>fixed; added missing colors dependency (#398)</li>
</ul>

<h1 id="1-7-2-2011-07-13">1.7.2 / 2011-07-13</h1>

<ul>
<li>changed; node-mongodb-native driver to v0.9.6.7</li>
</ul>

<h1 id="1-7-1-2011-07-12">1.7.1 / 2011-07-12</h1>

<ul>
<li>changed; roll back node-mongodb-native driver to v0.9.6.4</li>
</ul>

<h1 id="1-7-0-2011-07-12">1.7.0 / 2011-07-12</h1>

<ul>
<li>fixed; collection name misspelling [mathrawka]</li>
<li>fixed; 2nd param is required for ReplSetServers [kevinmarvin]</li>
<li>fixed; MongooseArray behaves properly with Object.keys</li>
<li>changed; node-mongodb-native driver to v0.9.6.6</li>
<li>fixed/changed; Mongodb segfault when passed invalid ObjectId (#407)

<ul>
<li>This means invalid data passed to the ObjectId constructor will now error</li>
</ul></li>
</ul>

<h1 id="1-6-0-2011-07-07">1.6.0 / 2011-07-07</h1>

<ul>
<li>changed; .save() errors are now emitted on the instances db instead of the instance 9782463fc</li>
<li>fixed; errors occurring when creating indexes now properly emit on db</li>
<li>added; $maxDistance support to MongooseArrays</li>
<li>fixed; RegExps now work with $all</li>
<li>changed; node-mongodb-native driver to v0.9.6.4</li>
<li>fixed; model names are now accessible via .modelName</li>
<li>added; Query#slaveOk support</li>
</ul>

<h1 id="1-5-0-2011-06-27">1.5.0 / 2011-06-27</h1>

<ul>
<li>changed; saving without a callback no longer ignores the error (@bnoguchi)</li>
<li>changed; hook-js version bump to 0.1.9</li>
<li>changed; node-mongodb-native version bumped to 0.9.6.1 - When .remove() doesn&rsquo;t
         return an error, null is no longer passed.</li>
<li>fixed; two memory leaks (@justmoon)</li>
<li>added; sparse index support</li>
<li>added; more ObjectId conditionals (gt, lt, gte, lte) (@phillyqueso)</li>
<li>added; options are now passed in model#remote (@JerryLuke)</li>
</ul>

<h1 id="1-4-0-2011-06-10">1.4.0 / 2011-06-10</h1>

<ul>
<li>bumped hooks-js dependency (fixes issue passing null as first arg to next())</li>
<li>fixed; document#inspect now works properly with nested docs</li>
<li>fixed; &#39;set&rsquo; now works as a schema attribute (GH-365)</li>
<li>fixed; _id is now set properly within pre-init hooks (GH-289)</li>
<li>added; Query#distinct / Model#distinct support (GH-155)</li>
<li>fixed; embedded docs now can use instance methods (GH-249)</li>
<li>fixed; can now overwrite strings conflicting with schema type</li>
</ul>

<h1 id="1-3-7-2011-06-03">1.3.7 / 2011-06-03</h1>

<ul>
<li>added MongooseArray#splice support</li>
<li>fixed; &#39;path&rsquo; is now a valid Schema pathname</li>
<li>improved hooks (utilizing https://github.com/bnoguchi/hooks-js)</li>
<li>fixed; MongooseArray#$shift now works (never did)</li>
<li>fixed; Document.modified no longer throws</li>
<li>fixed; modifying subdoc property sets modified paths for subdoc and parent doc</li>
<li>fixed; marking subdoc path as modified properly persists the value to the db</li>
<li>fixed; RexExps can again be saved ( #357 )</li>
</ul>

<h1 id="1-3-6-2011-05-18">1.3.6 / 2011-05-18</h1>

<ul>
<li>fixed; corrected casting for queries against array types</li>
<li>added; Document#set now accepts Document instances</li>
</ul>

<h1 id="1-3-5-2011-05-17">1.3.5 / 2011-05-17</h1>

<ul>
<li>fixed; $ne queries work properly with single vals</li>
<li>added; #inspect() methods to improve console.log output</li>
</ul>

<h1 id="1-3-4-2011-05-17">1.3.4 / 2011-05-17</h1>

<ul>
<li>fixed; find by Date works as expected (#336)</li>
<li>added; geospatial 2d index support</li>
<li>added; support for $near (#309)</li>
<li>updated; node-mongodb-native driver</li>
<li>fixed; updating numbers work (#342)</li>
<li>added; better error msg when try to remove an embedded doc without an _id (#307)</li>
<li>added; support for &#39;on-the-fly&rsquo; schemas (#227)</li>
<li>changed; virtual id getters can now be skipped</li>
<li>fixed; .index() called on subdoc schema now works as expected</li>
<li>fixed; db.setProfile() now buffers until the db is open (#340)</li>
</ul>

<h1 id="1-3-3-2011-04-27">1.3.3 / 2011-04-27</h1>

<ul>
<li>fixed; corrected query casting on nested mixed types</li>
</ul>

<h1 id="1-3-2-2011-04-27">1.3.2 / 2011-04-27</h1>

<ul>
<li>fixed; query hints now retain key order</li>
</ul>

<h1 id="1-3-1-2011-04-27">1.3.1 / 2011-04-27</h1>

<ul>
<li>fixed; setting a property on an embedded array no longer overwrites entire array (GH-310)</li>
<li>fixed; setting nested properties works when sibling prop is named &ldquo;type&rdquo;</li>
<li>fixed; isModified is now much finer grained when .set() is used (GH-323)</li>
<li>fixed; mongoose.model() and connection.model() now return the Model (GH-308, GH-305)</li>
<li>fixed; can now use $gt, $lt, $gte, $lte with String schema types (GH-317)</li>
<li>fixed; .lowercase() -&gt; .toLowerCase() in pluralize()</li>
<li>fixed; updating an embedded document by index works (GH-334)</li>
<li>changed; .save() now passes the instance to the callback (GH-294, GH-264)</li>
<li>added; can now query system.profile and system.indexes collections</li>
<li>added; db.model(&#39;system.profile&rsquo;) is now included as a default Schema</li>
<li>added; db.setProfiling(level, ms, callback)</li>
<li>added; Query#hint() support</li>
<li>added; more tests</li>
<li>updated node-mongodb-native to 0.9.3</li>
</ul>

<h1 id="1-3-0-2011-04-19">1.3.0 / 2011-04-19</h1>

<ul>
<li>changed; save() callbacks now fire only once on failed validation</li>
<li>changed; Errors returned from save() callbacks now instances of ValidationError</li>
<li>fixed; MongooseArray#indexOf now works properly</li>
</ul>

<h1 id="1-2-0-2011-04-11">1.2.0 / 2011-04-11</h1>

<ul>
<li>changed; MongooseNumber now casts empty string to null</li>
</ul>

<h1 id="1-1-25-2011-04-08">1.1.25 / 2011-04-08</h1>

<ul>
<li>fixed; post init now fires at proper time</li>
</ul>

<h1 id="1-1-24-2011-04-03">1.1.24 / 2011-04-03</h1>

<ul>
<li>fixed; pushing an array onto an Array works on existing docs</li>
</ul>

<h1 id="1-1-23-2011-04-01">1.1.23 / 2011-04-01</h1>

<ul>
<li>Added Model#model</li>
</ul>

<h1 id="1-1-22-2011-03-31">1.1.22 / 2011-03-31</h1>

<ul>
<li>Fixed; $in queries on mixed types now work</li>
</ul>

<h1 id="1-1-21-2011-03-31">1.1.21 / 2011-03-31</h1>

<ul>
<li>Fixed; setting object root to null/undefined works</li>
</ul>

<h1 id="1-1-20-2011-03-31">1.1.20 / 2011-03-31</h1>

<ul>
<li>Fixed; setting multiple props on null field works</li>
</ul>

<h1 id="1-1-19-2011-03-31">1.1.19 / 2011-03-31</h1>

<ul>
<li>Fixed; no longer using $set on paths to an unexisting fields</li>
</ul>

<h1 id="1-1-18-2011-03-30">1.1.18 / 2011-03-30</h1>

<ul>
<li>Fixed; non-mixed type object setters work after initd from null</li>
</ul>

<h1 id="1-1-17-2011-03-30">1.1.17 / 2011-03-30</h1>

<ul>
<li>Fixed; nested object property access works when root initd with null value</li>
</ul>

<h1 id="1-1-16-2011-03-28">1.1.16 / 2011-03-28</h1>

<ul>
<li>Fixed; empty arrays are now saved</li>
</ul>

<h1 id="1-1-15-2011-03-28">1.1.15 / 2011-03-28</h1>

<ul>
<li>Fixed; <code class="prettyprint">null</code> and <code class="prettyprint">undefined</code> are set atomically.</li>
</ul>

<h1 id="1-1-14-2011-03-28">1.1.14 / 2011-03-28</h1>

<ul>
<li>Changed; more forgiving date casting, accepting &ldquo; as null.</li>
</ul>

<h1 id="1-1-13-2011-03-26">1.1.13 / 2011-03-26</h1>

<ul>
<li>Fixed setting values as <code class="prettyprint">undefined</code>.</li>
</ul>

<h1 id="1-1-12-2011-03-26">1.1.12 / 2011-03-26</h1>

<ul>
<li>Fixed; nested objects now convert to JSON properly</li>
<li>Fixed; setting nested objects directly now works</li>
<li>Update node-mongodb-native</li>
</ul>

<h1 id="1-1-11-2011-03-25">1.1.11 / 2011-03-25</h1>

<ul>
<li>Fixed for use of <code class="prettyprint">type</code> as a key.</li>
</ul>

<h1 id="1-1-10-2011-03-23">1.1.10 / 2011-03-23</h1>

<ul>
<li>Changed; Make sure to only ensure indexes while connected</li>
</ul>

<h1 id="1-1-9-2011-03-2">1.1.9 / 2011-03-2</h1>

<ul>
<li>Fixed; Mixed can now default to empty arrays</li>
<li>Fixed; keys by the name &#39;type&rsquo; are now valid</li>
<li>Fixed; null values retrieved from the database are hydrated as null values.</li>
<li>Fixed repeated atomic operations when saving a same document twice.</li>
</ul>

<h1 id="1-1-8-2011-03-23">1.1.8 / 2011-03-23</h1>

<ul>
<li>Fixed &#39;id&rsquo; overriding. [bnoguchi]</li>
</ul>

<h1 id="1-1-7-2011-03-22">1.1.7 / 2011-03-22</h1>

<ul>
<li>Fixed RegExp query casting when querying against an Array of Strings [bnoguchi]</li>
<li>Fixed getters/setters for nested virtualsl. [bnoguchi]</li>
</ul>

<h1 id="1-1-6-2011-03-22">1.1.6 / 2011-03-22</h1>

<ul>
<li>Only doValidate when path exists in Schema [aheckmann]</li>
<li>Allow function defaults for Array types [aheckmann]</li>
<li>Fix validation hang [aheckmann]</li>
<li>Fix setting of isRequired of SchemaType [aheckmann]</li>
<li>Fix SchemaType#required(false) filter [aheckmann]</li>
<li>More backwards compatibility [aheckmann]</li>
<li>More tests [aheckmann]</li>
</ul>

<h1 id="1-1-5-2011-03-14">1.1.5 / 2011-03-14</h1>

<ul>
<li>Added support for <code class="prettyprint">uri, db, fn</code> and <code class="prettyprint">uri, fn</code> signatures for replica sets.</li>
<li>Improved/extended replica set tests.</li>
</ul>

<h1 id="1-1-4-2011-03-09">1.1.4 / 2011-03-09</h1>

<ul>
<li>Fixed; running an empty Query doesn&rsquo;t throw. [aheckmann]</li>
<li>Changed; Promise#addBack returns promise. [aheckmann]</li>
<li>Added streaming cursor support. [aheckmann]</li>
<li>Changed; Query#update defaults to use$SetOnSave now. [brian]</li>
<li>Added more docs.</li>
</ul>

<h1 id="1-1-3-2011-03-04">1.1.3 / 2011-03-04</h1>

<ul>
<li>Added Promise#resolve [aheckmann]</li>
<li>Fixed backward compatibility with nulls [aheckmann]</li>
<li>Changed; Query#{run,exec} return promises [aheckmann]</li>
</ul>

<h1 id="1-1-2-2011-03-03">1.1.2 / 2011-03-03</h1>

<ul>
<li>Restored Query#exec and added notion of default operation [brian]</li>
<li>Fixed ValidatorError messages [brian]</li>
</ul>

<h1 id="1-1-1-2011-03-01">1.1.1 / 2011-03-01</h1>

<ul>
<li>Added SchemaType String <code class="prettyprint">lowercase</code>, <code class="prettyprint">uppercase</code>, <code class="prettyprint">trim</code>.</li>
<li>Public exports (<code class="prettyprint">Model</code>, <code class="prettyprint">Document</code>) and tests.</li>
<li>Added ObjectId casting support for <code class="prettyprint">Document</code>s.</li>
</ul>

<h1 id="1-1-0-2011-02-25">1.1.0 / 2011-02-25</h1>

<ul>
<li>Added support for replica sets.</li>
</ul>

<h1 id="1-0-16-2011-02-18">1.0.16 / 2011-02-18</h1>

<ul>
<li>Added $nin as another whitelisted $conditional for SchemaArray [brian]</li>
<li>Changed #with to #where [brian]</li>
<li>Added ability to use $in conditional with Array types [brian]</li>
</ul>

<h1 id="1-0-15-2011-02-18">1.0.15 / 2011-02-18</h1>

<ul>
<li>Added <code class="prettyprint">id</code> virtual getter for documents to easily access the hexString of
the <code class="prettyprint">_id</code>.</li>
</ul>

<h1 id="1-0-14-2011-02-17">1.0.14 / 2011-02-17</h1>

<ul>
<li>Fix for arrays within subdocuments [brian]</li>
</ul>

<h1 id="1-0-13-2011-02-16">1.0.13 / 2011-02-16</h1>

<ul>
<li>Fixed embedded documents saving.</li>
</ul>

<h1 id="1-0-12-2011-02-14">1.0.12 / 2011-02-14</h1>

<ul>
<li>Minor refactorings [brian]</li>
</ul>

<h1 id="1-0-11-2011-02-14">1.0.11 / 2011-02-14</h1>

<ul>
<li>Query refactor and $ne, $slice, $or, $size, $elemMatch, $nin, $exists support [brian]</li>
<li>Named scopes sugar [brian]</li>
</ul>

<h1 id="1-0-10-2011-02-11">1.0.10 / 2011-02-11</h1>

<ul>
<li>Updated node-mongodb-native driver [thanks John Allen]</li>
</ul>

<h1 id="1-0-9-2011-02-09">1.0.9 / 2011-02-09</h1>

<ul>
<li>Fixed single member arrays as defaults [brian]</li>
</ul>

<h1 id="1-0-8-2011-02-09">1.0.8 / 2011-02-09</h1>

<ul>
<li>Fixed for collection-level buffering of commands [gitfy]</li>
<li>Fixed <code class="prettyprint">Document#toJSON</code> [dalejefferson]</li>
<li>Fixed <code class="prettyprint">Connection</code> authentication [robrighter]</li>
<li>Fixed clash of accessors in getters/setters [eirikurn]</li>
<li>Improved <code class="prettyprint">Model#save</code> promise handling</li>
</ul>

<h1 id="1-0-7-2011-02-05">1.0.7 / 2011-02-05</h1>

<ul>
<li>Fixed memory leak warnings for test suite on 0.3</li>
<li>Fixed querying documents that have an array that contain at least one
specified member. [brian]</li>
<li>Fixed default value for Array types (fixes GH-210). [brian]</li>
<li>Fixed example code.</li>
</ul>

<h1 id="1-0-6-2011-02-03">1.0.6 / 2011-02-03</h1>

<ul>
<li>Fixed <code class="prettyprint">post</code> middleware</li>
<li>Fixed; it&rsquo;s now possible to instantiate a model even when one of the paths maps
to an undefined value [brian]</li>
</ul>

<h1 id="1-0-5-2011-02-02">1.0.5 / 2011-02-02</h1>

<ul>
<li>Fixed; combo $push and $pushAll auto-converts into a $pushAll [brian]</li>
<li>Fixed; combo $pull and $pullAll auto-converts to a single $pullAll [brian]</li>
<li>Fixed; $pullAll now removes said members from array before save (so it acts just
like pushAll) [brian]</li>
<li>Fixed; multiple $pulls and $pushes become a single $pullAll and $pushAll.
Moreover, $pull now modifies the array before save to reflect the immediate
change [brian]</li>
<li>Added tests for nested shortcut getters [brian]</li>
<li>Added tests that show that Schemas with nested Arrays don&rsquo;t apply defaults
[brian]</li>
</ul>

<h1 id="1-0-4-2011-02-02">1.0.4 / 2011-02-02</h1>

<ul>
<li>Added MongooseNumber#toString</li>
<li>Added MongooseNumber unit tests</li>
</ul>

<h1 id="1-0-3-2011-02-02">1.0.3 / 2011-02-02</h1>

<ul>
<li>Make sure safe mode works with Model#save</li>
<li>Changed Schema options: safe mode is now the default</li>
<li>Updated node-mongodb-native to HEAD</li>
</ul>

<h1 id="1-0-2-2011-02-02">1.0.2 / 2011-02-02</h1>

<ul>
<li>Added a Model.create shortcut for creating documents. [brian]</li>
<li>Fixed; we can now instantiate models with hashes that map to at least one
null value. [brian]</li>
<li>Fixed Schema with more than 2 nested levels. [brian]</li>
</ul>

<h1 id="1-0-1-2011-02-02">1.0.1 / 2011-02-02</h1>

<ul>
<li>Improved <code class="prettyprint">MongooseNumber</code>, works almost like the native except for <code class="prettyprint">typeof</code>
not being <code class="prettyprint">&#39;number&#39;</code>.</li>
</ul>
