function example(){Character.create({name:"Link",health:100},function(o,e){return o?done(o):(console.log("found",e),e.attack(),void done())})}function done(o){o&&console.error(o),mongoose.connection.db.dropDatabase(function(){mongoose.disconnect()})}var mongoose=require("mongoose"),Schema=mongoose.Schema;console.log("Running mongoose version %s",mongoose.version);var CharacterSchema=Schema({name:{type:String,required:!0},health:{type:Number,min:0,max:100}});CharacterSchema.methods.attack=function(){console.log("%s is attacking",this.name)};var Character=mongoose.model("Character",CharacterSchema),dbname="mongoose-example-doc-methods-"+(1e4*Math.random()|0),uri="mongodb://localhost/"+dbname;console.log("connecting to %s",uri),mongoose.connect(uri,function(o){if(o)throw o;example()});