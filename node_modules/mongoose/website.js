function getVersion(){for(var e=fs.readFileSync("./History.md","utf8").replace(/\r/g,"\n").split("\n"),r=0;r<e.length;++r){var a=(e[r]||"").trim();if(a){var i=/^\s*([^\s]+)\s/.exec(a);if(i&&i[1])return i[1]}}throw new Error("no match found")}function getUnstable(e){e=e.replace("-pre");var r=e.split(".");return r=r.map(function(e){return parseInt(e,10)}),r[1]++,r[2]="x",r.join(".")}function jadeify(e,r,a){r=r||{},r["package"]=package,r.hl=hl,r.linktype=linktype,r.href=href,r.klass=klass,jade.renderFile(e,r,function(r,i){return r?void console.error(r.stack):(a=a||e.replace(".jade",".html"),void fs.writeFile(a,i,function(e){e?console.error("could not write",e.stack):console.log("%s : rendered ",new Date,a)}))})}var fs=require("fs"),jade=require("jade"),package=require("./package"),hl=require("./docs/helpers/highlight"),linktype=require("./docs/helpers/linktype"),href=require("./docs/helpers/href"),klass=require("./docs/helpers/klass");require("./docs/helpers/filters")(jade),package.version=getVersion(),package.unstable=getUnstable(package.version);var filemap=require("./docs/source"),files=Object.keys(filemap);files.forEach(function(e){var r=__dirname+"/"+e;jadeify(r,filemap[e]),"--watch"===process.argv[2]&&fs.watchFile(r,{interval:1e3},function(a,i){a.mtime>i.mtime&&jadeify(r,filemap[e])})});var acquit=require("./docs/source/acquit"),acquitFiles=Object.keys(acquit);acquitFiles.forEach(function(e){var r=__dirname+"/docs/acquit.jade";jadeify(r,acquit[e],__dirname+"/docs/"+e)});