<h1 id="meet-muri">Meet Muri!</h1>

<p>Muri is your friendly neighborhood <a href="http://www.mongodb.org/display/DOCS/Connections">MongoDB URI</a> parser for Node.js.</p>

<h3 id="install">Install</h3>

<p>$ npm install muri</p>

<h3 id="use">Use</h3>
<pre class="highlight javascript"><code> <span class="kd">var</span> <span class="nx">muri</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'muri'</span><span class="p">);</span>
 <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">muri</span><span class="p">(</span><span class="s1">'mongodb://user:pass@local,remote:27018,japan:27019/neatdb?replicaSet=myreplset&amp;journal=true&amp;w=2&amp;wtimeoutMS=50'</span><span class="p">);</span>

 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

 <span class="p">{</span> <span class="nl">hosts</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="na">host</span><span class="p">:</span> <span class="s1">'local'</span><span class="p">,</span>  <span class="na">port</span><span class="p">:</span> <span class="mi">27017</span> <span class="p">},</span>
            <span class="p">{</span> <span class="na">host</span><span class="p">:</span> <span class="s1">'remote'</span><span class="p">,</span> <span class="na">port</span><span class="p">:</span> <span class="mi">27018</span> <span class="p">},</span>
            <span class="p">{</span> <span class="na">host</span><span class="p">:</span> <span class="s1">'japan'</span><span class="p">,</span>  <span class="na">port</span><span class="p">:</span> <span class="mi">27019</span> <span class="p">}</span> <span class="p">],</span>
   <span class="nx">db</span><span class="err">:</span> <span class="s1">'neatdb'</span><span class="p">,</span>
   <span class="nx">options</span><span class="err">:</span> <span class="p">{</span>
     <span class="nl">replicaSet</span><span class="p">:</span> <span class="s1">'myreplset'</span><span class="p">,</span>
     <span class="nx">journal</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="nx">w</span><span class="err">:</span> <span class="mi">2</span><span class="p">,</span>
     <span class="nx">wtimeoutMS</span><span class="err">:</span> <span class="mi">50</span>
   <span class="p">},</span>
   <span class="nx">auth</span><span class="err">:</span> <span class="p">{</span>
     <span class="nl">user</span><span class="p">:</span> <span class="s1">'user'</span><span class="p">,</span>
     <span class="nx">pass</span><span class="err">:</span> <span class="s1">'pass'</span>
   <span class="p">}</span>
 <span class="p">}</span>
</code></pre>

<h3 id="details">Details</h3>

<p>The returned object contains the following properties:</p>

<ul>
<li>db: the name of the database. defaults to &ldquo;admin&rdquo; if not specified</li>
<li>auth: if auth is specified, this object will exist <code class="prettyprint">{ user: &#39;username&#39;, pass: &#39;password&#39; }</code></li>
<li>hosts: array of host/port objects, one for each specified <code class="prettyprint">[{ host: &#39;local&#39;, port: 27107 }, { host: &#39;..&#39;, port: port }]</code>

<ul>
<li>if a port is not specified for a given host, the default port (27017) is used</li>
<li>if a unix domain socket is passed, host/port will be undefined and <code class="prettyprint">ipc</code> will be set to the value specified <code class="prettyprint">[{ ipc: &#39;/tmp/mongodb-27017&#39; }]</code></li>
</ul></li>
<li>options: this is a hash of all options specified in the querystring</li>
</ul>

<p><a href="https://github.com/aheckmann/muri/blob/master/LICENSE">LICENSE</a></p>
