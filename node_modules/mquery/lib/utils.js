"use strict";function create(e){function r(){}if(arguments.length>1)throw new Error("Adding properties is not supported");return r.prototype=e,new r}/*!
 * Module dependencies.
 */
var RegExpClone=require("regexp-clone"),clone=exports.clone=function e(r,t){if(void 0===r||null===r)return r;if(Array.isArray(r))return exports.cloneArray(r,t);if(r.constructor){if(/ObjectI[dD]$/.test(r.constructor.name))return"function"==typeof r.clone?r.clone():new r.constructor(r.id);if("ReadPreference"===r._type&&r.isValid&&r.toObject)return"function"==typeof r.clone?r.clone():new r.constructor(r.mode,e(r.tags,t));if("Binary"==r._bsontype&&r.buffer&&r.value)return"function"==typeof r.clone?r.clone():new r.constructor(r.value(!0),r.sub_type);if("Date"===r.constructor.name||"Function"===r.constructor.name)return new r.constructor(+r);if("RegExp"===r.constructor.name)return RegExpClone(r);if("Buffer"===r.constructor.name)return exports.cloneBuffer(r)}return isObject(r)?exports.cloneObject(r,t):r.valueOf?r.valueOf():void 0},cloneObject=exports.cloneObject=function(e,r){var t,n,o,c,i,s=r&&r.retainKeyOrder,u=r&&r.minimize,f={};if(s)for(c in e)o=clone(e[c],r),u&&"undefined"==typeof o||(t||(t=!0),f[c]=o);else for(n=Object.keys(e),i=n.length;i--;)c=n[i],o=clone(e[c],r),u&&"undefined"==typeof o||(t||(t=!0),f[c]=o);return u?t&&f:f},cloneArray=exports.cloneArray=function(e,r){for(var t=[],n=0,o=e.length;o>n;n++)t.push(clone(e[n],r));return t},tick=exports.tick=function(e){return"function"==typeof e?function(){var r=arguments;soon(function(){e.apply(this,r)})}:void 0},merge=exports.merge=function r(e,t){for(var n,o=Object.keys(t),c=o.length;c--;)n=o[c],"undefined"==typeof e[n]?e[n]=t[n]:exports.isObject(t[n])?r(e[n],t[n]):e[n]=t[n]},mergeClone=exports.mergeClone=function t(e,r){for(var n,o=Object.keys(r),c=o.length;c--;)n=o[c],"undefined"==typeof e[n]?e[n]=clone(r[n],{retainKeyOrder:1}):exports.isObject(r[n])?t(e[n],r[n]):e[n]=clone(r[n],{retainKeyOrder:1})};exports.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest"}return e};var _toString=Object.prototype.toString,toString=exports.toString=function(e){return _toString.call(e)},isObject=exports.isObject=function(e){return"[object Object]"==exports.toString(e)},isArray=exports.isArray=function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"==exports.toString(e)};exports.keys=Object.keys||function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(t);return r},exports.create="function"==typeof Object.create?Object.create:create,exports.inherits=function(e,r){e.prototype=exports.create(r.prototype),e.prototype.constructor=e};var soon=exports.soon="function"==typeof setImmediate?setImmediate:process.nextTick;exports.cloneBuffer=function(e){var r=new Buffer(e.length);return e.copy(r,0,0,e.length),r},exports.isArgumentsObject=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)};