"use strict";function isUntypedError(e){return e instanceof Error&&es5.getPrototypeOf(e)===Error.prototype}function wrapAsOperationalError(e){var r;if(isUntypedError(e)){r=new OperationalError(e),r.name=e.name,r.message=e.message,r.stack=e.stack;for(var o=es5.keys(e),t=0;t<o.length;++t){var s=o[t];rErrorKey.test(s)||(r[s]=e[s])}return r}return util.markAsOriginatingFromRejection(e),e}function nodebackForPromise(e){return function(r,o){if(null!==e){if(r){var t=wrapAsOperationalError(maybeWrapAsError(r));e._attachExtraTrace(t),e._reject(t)}else if(arguments.length>2){for(var s=arguments.length,i=new Array(s-1),n=1;s>n;++n)i[n-1]=arguments[n];e._fulfill(i)}else e._fulfill(o);e=null}}}var util=require("./util.js"),maybeWrapAsError=util.maybeWrapAsError,errors=require("./errors.js"),TimeoutError=errors.TimeoutError,OperationalError=errors.OperationalError,haveGetters=util.haveGetters,es5=require("./es5.js"),rErrorKey=/^(?:name|message|stack|cause)$/,PromiseResolver;if(PromiseResolver=haveGetters?function(e){this.promise=e}:function(e){this.promise=e,this.asCallback=nodebackForPromise(e),this.callback=this.asCallback},haveGetters){var prop={get:function(){return nodebackForPromise(this.promise)}};es5.defineProperty(PromiseResolver.prototype,"asCallback",prop),es5.defineProperty(PromiseResolver.prototype,"callback",prop)}PromiseResolver._nodebackForPromise=nodebackForPromise,PromiseResolver.prototype.toString=function(){return"[object PromiseResolver]"},PromiseResolver.prototype.resolve=PromiseResolver.prototype.fulfill=function(e){if(!(this instanceof PromiseResolver))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(e)},PromiseResolver.prototype.reject=function(e){if(!(this instanceof PromiseResolver))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(e)},PromiseResolver.prototype.progress=function(e){if(!(this instanceof PromiseResolver))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(e)},PromiseResolver.prototype.cancel=function(e){this.promise.cancel(e)},PromiseResolver.prototype.timeout=function(){this.reject(new TimeoutError("timeout"))},PromiseResolver.prototype.isResolved=function(){return this.promise.isResolved()},PromiseResolver.prototype.toJSON=function(){return this.promise.toJSON()},module.exports=PromiseResolver;