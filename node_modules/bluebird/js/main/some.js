"use strict";module.exports=function(t,i,e){function n(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,i){if((0|i)!==i||0>i)return e("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var o=new n(t),s=o.promise();return o.setHowMany(i),o.init(),s}var s=require("./util.js"),r=require("./errors.js").RangeError,h=require("./errors.js").AggregateError,u=s.isArray;s.inherits(n,i),n.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=u(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},n.prototype.init=function(){this._initialized=!0,this._init()},n.prototype.setUnwrap=function(){this._unwrap=!0},n.prototype.howMany=function(){return this._howMany},n.prototype.setHowMany=function(t){this._howMany=t},n.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},n.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var i=new h,e=this.length();e<this._values.length;++e)i.push(this._values[e]);this._reject(i)}},n.prototype._fulfilled=function(){return this._totalResolved},n.prototype._rejected=function(){return this._values.length-this.length()},n.prototype._addRejected=function(t){this._values.push(t)},n.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},n.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},n.prototype._getRangeError=function(t){var i="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new r(i)},n.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,i){return o(t,i)},t.prototype.some=function(t){return o(this,t)},t._SomePromiseArray=n};