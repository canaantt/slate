"use strict";module.exports=function(t,n){function e(t){var n=this;return n instanceof Number&&(n=+n),clearTimeout(n),t}function i(t){var n=this;throw n instanceof Number&&(n=+n),clearTimeout(n),t}var r=require("./util.js"),o=t.TimeoutError,u=function(t,n){if(t.isPending()){var e;!r.isPrimitive(n)&&n instanceof Error?e=n:("string"!=typeof n&&(n="operation timed out"),e=new o(n)),r.markAsOriginatingFromRejection(e),t._attachExtraTrace(e),t._cancel(e)}},a=function(t){return c(+this).thenReturn(t)},c=t.delay=function(e,i){if(void 0===i){i=e,e=void 0;var r=new t(n);return setTimeout(function(){r._fulfill()},i),r}return i=+i,t.resolve(e)._then(a,null,null,i,void 0)};t.prototype.delay=function(t){return c(this,t)},t.prototype.timeout=function(t,n){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var o=setTimeout(function(){u(r,n)},t);return r._then(e,i,void 0,o,void 0)}};